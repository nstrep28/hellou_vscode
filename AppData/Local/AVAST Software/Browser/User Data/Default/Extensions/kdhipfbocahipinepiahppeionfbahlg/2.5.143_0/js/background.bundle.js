!function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=278)}([,function(e,t,r){"use strict";r.d(t,"c",(function(){return n})),r.d(t,"b",(function(){return a})),r.d(t,"a",(function(){return i})),r.d(t,"d",(function(){return o}));var n={AppSettings:{KEY:"settings",DISABLED:"disabled",EULA:"eula",DEBUG:"debug"},Stats:{KEY:"VDLData",VIDEO_DOWNLOAD_STARTED:"A1",VIDEO_DOWNLOAD_COMPLETED:"A2",AUDIO_DOWNLOAD_STARTED:"B1",AUDIO_DOWNLOAD_COMPLETED:"B2",PORN_DOWNLOAD_STARTED:"C1",PORN_DOWNLOAD_COMPLETED:"C2"}},i={VIDEO:"video",PORN_VIDEO:"pvideo",AUDIO:"audio"},o={APP_NAME:chrome.i18n.getMessage("appName"),SETTINGS_TITLE:chrome.i18n.getMessage("barSettingsTitle"),SETTINGS_DO_NOT_SHOW_FOR_SITE:chrome.i18n.getMessage("barSettingsDoNotShowForSite"),SETTINGS_DO_NOT_SHOW:chrome.i18n.getMessage("barSettingsDoNotShow"),SETTINGS_ABOUT:chrome.i18n.getMessage("barSettingsAbout"),SETTINGS_DESCRIPTION:chrome.i18n.getMessage("barSettingsDescription"),QUALITY_VIDEO:chrome.i18n.getMessage("barQualityVideo"),QUALITY_AUDIO:chrome.i18n.getMessage("barQualityAudio"),EULA_TITLE:chrome.i18n.getMessage("eulaTitle"),EULA_TEXT:chrome.i18n.getMessage("eulaText",["https://www.avast.com/eula"]),EULA_UNDERSTAND_ACCEPT:chrome.i18n.getMessage("eulaUnderstandAccept"),EULA_CONTINUE:chrome.i18n.getMessage("eulaContinue"),DOWNLOAD_BUTTON:chrome.i18n.getMessage("barDownloadBtn"),POPUP_NO_VIDEOS:chrome.i18n.getMessage("popupNoVideos"),POPUP_DISABLED_FOR_DOMAIN:chrome.i18n.getMessage("popupDisabledFor"),POPUP_ENABLE_FOR_DOMAIN:chrome.i18n.getMessage("popupEnable")},a="vd-root-d19608294"},function(e,t,r){"use strict";r.d(t,"e",(function(){return s})),r.d(t,"g",(function(){return o})),r.d(t,"a",(function(){return a})),r.d(t,"d",(function(){return f})),r.d(t,"c",(function(){return u})),r.d(t,"b",(function(){return c})),r.d(t,"f",(function(){return l}));var n=r(5),i=r.n(n),o=2147483647,a={TRANSPARENT:"transparent",WHITE:"#ffffff",BLACK:"#000000",GREEN:"#0ba24b",DARK_GREEN:"#099344",DARK_GREY:"#757575"},s={DownloadBar:{width:"auto",height:35}},u={OPEN_SANS:'"Asp-font", sans-serif',ROBOTO:'"Roboto", sans-serif'},c={POINTER:"pointer",MOVE:"move",DEFAULT:"default"},l={COMMON:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all";return"".concat(e," 0.3s cubic-bezier(0.4, 0.0, 0.2, 1)")}},f={setRow:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;return{gridRow:"".concat(e," / ").concat(t)}},setCol:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;return{gridColumn:"".concat(e," / ").concat(t)}},setRowCol:function(e,t){return i()({},this.setCol(t),this.setRow(e))}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var n=r(12),i=r.n(n),o=r(13),a=r.n(o),s=r(2),u=r(1),c=function(){function e(){i()(this,e)}return a()(e,null,[{key:"getDomain",value:function(e){var t=e.match(/:\/\/(www[0-9]?\.)?(.[^/:]+)/i);return null!=t&&t.length>2&&"string"==typeof t[2]&&t[2].length>0?t[2]:null}},{key:"hash",value:function(e){return r(38)(e)+""}},{key:"randomInt",value:function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}},{key:"randomArrValue",value:function(e){return e[Math.floor(Math.random()*e.length)]}},{key:"kFormatter",value:function(e){return e>999?(e/1e3).toFixed(1)+"k":e}},{key:"throttle",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=null,i=!0;return function(){var o=this,a=arguments,s=r&&i,u=function(){e.apply(o,a),n=null};s&&(i=!1,u()),n||(n=setTimeout(u,t))}}},{key:"getOffset",value:function(e){var t=e.getBoundingClientRect(),r=window.pageXOffset||document.documentElement.scrollLeft,n=window.pageYOffset||document.documentElement.scrollTop;return{top:t.top+n-s.e.DownloadBar.height+1,left:t.left+r+e.clientWidth-s.e.DownloadBar.width-18,right:document.documentElement.offsetWidth-t.right}}},{key:"getFileExtension",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"mp4",r=new URL(e),n=r.pathname.split(".").pop().replace("/","");return n&&""!==n?n:t}},{key:"matchPattern",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=e.match(t);return n&&n.length>=r?n[r]:null}},{key:"unescapeUnicode",value:function(e){return decodeURIComponent(JSON.parse('"'+e.replace('"','\\"')+'"'))}},{key:"htmlEntities",value:function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}},{key:"createRootElement",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u.b,t=document.getElementById(e);return document.getElementById(u.b)||((t=document.createElement("div")).classList.add("notranslate"),t.setAttribute("style","position: absolute; top: 0; right:0;"),t.id=e,document.documentElement.appendChild(t)),t}},{key:"inIframe",value:function(){try{return window.self!==window.top}catch(e){return!0}}}]),e}()},,function(e,t,r){var n=r(11);e.exports=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?Object(arguments[t]):{},i=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),i.forEach((function(t){n(e,t,r[t])}))}return e}},function(e,t,r){"use strict";r.d(t,"j",(function(){return n})),r.d(t,"n",(function(){return i})),r.d(t,"p",(function(){return o})),r.d(t,"o",(function(){return a})),r.d(t,"k",(function(){return s})),r.d(t,"y",(function(){return u})),r.d(t,"x",(function(){return c})),r.d(t,"s",(function(){return l})),r.d(t,"g",(function(){return f})),r.d(t,"m",(function(){return d})),r.d(t,"f",(function(){return h})),r.d(t,"b",(function(){return p})),r.d(t,"v",(function(){return m})),r.d(t,"a",(function(){return y})),r.d(t,"r",(function(){return g})),r.d(t,"z",(function(){return b})),r.d(t,"d",(function(){return v})),r.d(t,"l",(function(){return w})),r.d(t,"h",(function(){return E})),r.d(t,"i",(function(){return _})),r.d(t,"c",(function(){return T})),r.d(t,"t",(function(){return O})),r.d(t,"w",(function(){return S})),r.d(t,"q",(function(){return A})),r.d(t,"e",(function(){return x})),r.d(t,"u",(function(){return I}));var n="PLAYER::DOWNLOAD_MEDIA",i="PLAYER::GET_MEDIA_INFO",o="PLAYER::GET_MEDIA_INFO_RESOLVED_EMPTY",a="BACKGROUND::GET_MEDIA_INFO_FAILED",s="PLAYER::DOWNLOAD_MEDIA_CHECK_EULA",u="PLAYER::SET_SELECTED_MEDIA",c="PLAYER::SET_MEDIA_ITEMS",l="PLAYER::REMOVE_ALL_TABS",f="SETTINGS::DISABLE_FOR_DOMAIN",d="SETTINGS::ENABLE_FOR_DOMAIN",h="SETTINGS::DISABLE_EXTENSION",p="EULA::ACCEPT_EULA",m="EULA::SET_EULA_ACCEPTED",y="EULA::ACCEPTED_EULA_SUCCESS",g="EULA::REJECT_EULA",b="EULA::SHOW_EULA",v="EULA::CLOSE_EULA",w="DOWNLOAD::DOWNLOAD_STARTED",E="DOWNLOAD::DOWNLOAD_COMPLETED",_="DOWNLOAD::DOWNLOAD_FAILED",T="BACKGROUND::CLEAR_TAB_DATA",O="BACKGROUND::REMOVE_TAB",S="BACKGROUND::SET_ICON",A="OBSERVE",x="DISABLE",I="RESET_TAB"},,function(e,t,r){e.exports=r(84)},function(e,t,r){"use strict";r.d(t,"a",(function(){return f}));var n=r(24),i=r.n(n),o=r(12),a=r.n(o),s=r(13),u=r.n(s),c=r(16),l={INFO:"Info",WARNING:"Warning",ERROR:"Error",DEBUG:"Debug"},f=function(){function e(){a()(this,e)}return u()(e,null,[{key:"log",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.INFO,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";"object"===i()(t)&&(t=JSON.stringify(t));var o=(new Date).toDateString();n.length>0&&console.log("%c".concat(n," START %c").concat("-".repeat(260-n.length-2)),"background: #000; color: #fff","background: #000; color: #000"),console.log("".concat("VD"," :: ").concat(o," :: %c").concat(r,"%c ::  ").concat(t),e.getMessageColor(r),this.getMessageColor(null)),n&&console.log("%c".concat(n," END %c").concat("-".repeat(260-n.length)),"background: #000; color: #fff","background: #000; color: #000")}},{key:"debug",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";c.a.DEBUG&&this.log(e,l.DEBUG,t)}},{key:"info",value:function(e){this.log(e,l.INFO)}},{key:"warn",value:function(e){this.log(e,l.WARNING)}},{key:"error",value:function(e){this.log(e,l.ERROR)}},{key:"getMessageColor",value:function(e){switch(e){case l.INFO:return"color: white";case l.ERROR:return"color: red";case l.WARNING:return"color: #ffad36";case l.DEBUG:return"color: green";default:return"color: grey"}}}]),e}();f.MessageType=l},,function(e,t){e.exports=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e.exports=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}},,function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){"use strict";var n,i,o=r(11),a=r.n(o),s=r(1),u={DEBUG:!1,DEFAULT_SETTINGS:(n={},a()(n,s.c.AppSettings.DISABLED,[]),a()(n,s.c.AppSettings.EULA,!1),a()(n,s.c.AppSettings.DEBUG,!1),n),DEFAULT_STATS:(i={},a()(i,s.c.Stats.VIDEO_DOWNLOAD_STARTED,0),a()(i,s.c.Stats.VIDEO_DOWNLOAD_COMPLETED,0),a()(i,s.c.Stats.AUDIO_DOWNLOAD_STARTED,0),a()(i,s.c.Stats.AUDIO_DOWNLOAD_COMPLETED,0),a()(i,s.c.Stats.PORN_DOWNLOAD_STARTED,0),a()(i,s.c.Stats.PORN_DOWNLOAD_COMPLETED,0),i),APP_DATA:{theme:{primary:"#09884C",secondary:"#09884C",hoverPrimary:"#076D3D",hoverSecondary:"#076D3D"},urls:{eula:"https://www.avast.com/eula",info:"https://support.avast.com/en-ww/article/29/#idt_3970"}},BRAND:"Avast",EULA_VERSION:1};t.a=u},function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var n=r(12),i=r.n(n),o=r(13),a=r.n(o),s=r(20),u=r(9),c=function(){function e(){i()(this,e)}return a()(e,null,[{key:"setSync",value:function(e,t){s.a.setStorageSync(e,t),u.a.debug("".concat(JSON.stringify(t)," was saved to storage key ").concat(e))}},{key:"getSync",value:function(e){return s.a.getStorageSync(e)}},{key:"set",value:function(e,t){s.a.setStorageLocal(e,t),u.a.debug("".concat(JSON.stringify(t)," was saved to storage key ").concat(e))}},{key:"get",value:function(e){return s.a.getStorageLocal(e)}},{key:"removeSync",value:function(e){return s.a.removeSync(e)}},{key:"remove",value:function(e){return s.a.removeLocal(e)}}]),e}()},function(e,t,r){"use strict";r.d(t,"c",(function(){return i})),r.d(t,"a",(function(){return o})),r.d(t,"b",(function(){return a}));var n=r(1),i=function(e){var t={video:[],audio:[]};e.forEach((function(e){switch(e.type){case n.a.VIDEO:case n.a.PORN_VIDEO:return t.video.push(e);case n.a.AUDIO:return t.audio.push(e);default:return}}));var r=function(e,t){return parseInt(e.quality)<parseInt(t.quality)?1:-1};return t.video.sort(r),t.audio.sort(r),t},o=function(){return new Promise((function(e,t){chrome.tabs.query({currentWindow:!0,active:!0},(function(r){chrome.runtime.error&&t(chrome.runtime.error),e(r[0])}))}))},a=function(e,t){"Enter"===e.key&&t(e)}},,function(e,t,r){"use strict";r.d(t,"a",(function(){return f}));var n=r(11),i=r.n(n),o=r(24),a=r.n(o),s=r(12),u=r.n(s),c=r(13),l=r.n(c),f=function(){function e(){u()(this,e)}return l()(e,null,[{key:"getResource",value:function(e){return chrome.extension.getURL(e)}},{key:"getStorageSync",value:function(e){return new Promise((function(t){chrome.storage.sync.get(e,(function(r){"object"===a()(r)&&r[e]?t(r[e]):t(null)}))}))}},{key:"setStorageSync",value:function(e,t){var r=i()({},e,t);chrome.storage.sync.set(r)}},{key:"getStorageLocal",value:function(e){return new Promise((function(t){chrome.storage.local.get(e,(function(r){"object"===a()(r)&&r[e]?t(r[e]):t(null)}))}))}},{key:"setStorageLocal",value:function(e,t){var r=i()({},e,t);chrome.storage.local.set(r)}},{key:"removeSync",value:function(e){return new Promise((function(t,r){chrome.storage.sync.remove(e,(function(){var e=chrome.runtime.lastError;e&&r(e),t()}))}))}},{key:"removeLocal",value:function(e){return new Promise((function(t,r){chrome.storage.local.remove(e,(function(){var e=chrome.runtime.lastError;e&&r(e),t()}))}))}}]),e}()},function(e,t){var r,n,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(r===setTimeout)return setTimeout(e,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:o}catch(e){r=o}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(e){n=a}}();var u,c=[],l=!1,f=-1;function d(){l&&u&&(l=!1,u.length?c=u.concat(c):f=-1,c.length&&h())}function h(){if(!l){var e=s(d);l=!0;for(var t=c.length;t;){for(u=c,c=[];++f<t;)u&&u[f].run();f=-1,t=c.length}u=null,l=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function m(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new p(e,t)),1!==c.length||l||s(h)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},,function(e,t,r){"use strict";var n=r(140),i=r(142);function o(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}t.parse=v,t.resolve=function(e,t){return v(e,!1,!0).resolve(t)},t.resolveObject=function(e,t){return e?v(e,!1,!0).resolveObject(t):t},t.format=function(e){i.isString(e)&&(e=v(e));return e instanceof o?e.format():o.prototype.format.call(e)},t.Url=o;var a=/^([a-z0-9.+-]+:)/i,s=/:[0-9]*$/,u=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,c=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),l=["'"].concat(c),f=["%","/","?",";","#"].concat(l),d=["/","?","#"],h=/^[+a-z0-9A-Z_-]{0,63}$/,p=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,m={javascript:!0,"javascript:":!0},y={javascript:!0,"javascript:":!0},g={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},b=r(46);function v(e,t,r){if(e&&i.isObject(e)&&e instanceof o)return e;var n=new o;return n.parse(e,t,r),n}o.prototype.parse=function(e,t,r){if(!i.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var o=e.indexOf("?"),s=-1!==o&&o<e.indexOf("#")?"?":"#",c=e.split(s);c[0]=c[0].replace(/\\/g,"/");var v=e=c.join(s);if(v=v.trim(),!r&&1===e.split("#").length){var w=u.exec(v);if(w)return this.path=v,this.href=v,this.pathname=w[1],w[2]?(this.search=w[2],this.query=t?b.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var E=a.exec(v);if(E){var _=(E=E[0]).toLowerCase();this.protocol=_,v=v.substr(E.length)}if(r||E||v.match(/^\/\/[^@\/]+@[^@\/]+/)){var T="//"===v.substr(0,2);!T||E&&y[E]||(v=v.substr(2),this.slashes=!0)}if(!y[E]&&(T||E&&!g[E])){for(var O,S,A=-1,x=0;x<d.length;x++){-1!==(I=v.indexOf(d[x]))&&(-1===A||I<A)&&(A=I)}-1!==(S=-1===A?v.lastIndexOf("@"):v.lastIndexOf("@",A))&&(O=v.slice(0,S),v=v.slice(S+1),this.auth=decodeURIComponent(O)),A=-1;for(x=0;x<f.length;x++){var I;-1!==(I=v.indexOf(f[x]))&&(-1===A||I<A)&&(A=I)}-1===A&&(A=v.length),this.host=v.slice(0,A),v=v.slice(A),this.parseHost(),this.hostname=this.hostname||"";var R="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!R)for(var P=this.hostname.split(/\./),D=(x=0,P.length);x<D;x++){var C=P[x];if(C&&!C.match(h)){for(var L="",N=0,k=C.length;N<k;N++)C.charCodeAt(N)>127?L+="x":L+=C[N];if(!L.match(h)){var M=P.slice(0,x),j=P.slice(x+1),U=C.match(p);U&&(M.push(U[1]),j.unshift(U[2])),j.length&&(v="/"+j.join(".")+v),this.hostname=M.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),R||(this.hostname=n.toASCII(this.hostname));var B=this.port?":"+this.port:"",F=this.hostname||"";this.host=F+B,this.href+=this.host,R&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==v[0]&&(v="/"+v))}if(!m[_])for(x=0,D=l.length;x<D;x++){var q=l[x];if(-1!==v.indexOf(q)){var V=encodeURIComponent(q);V===q&&(V=escape(q)),v=v.split(q).join(V)}}var H=v.indexOf("#");-1!==H&&(this.hash=v.substr(H),v=v.slice(0,H));var Y=v.indexOf("?");if(-1!==Y?(this.search=v.substr(Y),this.query=v.substr(Y+1),t&&(this.query=b.parse(this.query)),v=v.slice(0,Y)):t&&(this.search="",this.query={}),v&&(this.pathname=v),g[_]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){B=this.pathname||"";var G=this.search||"";this.path=B+G}return this.href=this.format(),this},o.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",r=this.pathname||"",n=this.hash||"",o=!1,a="";this.host?o=e+this.host:this.hostname&&(o=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&i.isObject(this.query)&&Object.keys(this.query).length&&(a=b.stringify(this.query));var s=this.search||a&&"?"+a||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||g[t])&&!1!==o?(o="//"+(o||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):o||(o=""),n&&"#"!==n.charAt(0)&&(n="#"+n),s&&"?"!==s.charAt(0)&&(s="?"+s),t+o+(r=r.replace(/[?#]/g,(function(e){return encodeURIComponent(e)})))+(s=s.replace("#","%23"))+n},o.prototype.resolve=function(e){return this.resolveObject(v(e,!1,!0)).format()},o.prototype.resolveObject=function(e){if(i.isString(e)){var t=new o;t.parse(e,!1,!0),e=t}for(var r=new o,n=Object.keys(this),a=0;a<n.length;a++){var s=n[a];r[s]=this[s]}if(r.hash=e.hash,""===e.href)return r.href=r.format(),r;if(e.slashes&&!e.protocol){for(var u=Object.keys(e),c=0;c<u.length;c++){var l=u[c];"protocol"!==l&&(r[l]=e[l])}return g[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(e.protocol&&e.protocol!==r.protocol){if(!g[e.protocol]){for(var f=Object.keys(e),d=0;d<f.length;d++){var h=f[d];r[h]=e[h]}return r.href=r.format(),r}if(r.protocol=e.protocol,e.host||y[e.protocol])r.pathname=e.pathname;else{for(var p=(e.pathname||"").split("/");p.length&&!(e.host=p.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==p[0]&&p.unshift(""),p.length<2&&p.unshift(""),r.pathname=p.join("/")}if(r.search=e.search,r.query=e.query,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var m=r.pathname||"",b=r.search||"";r.path=m+b}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r}var v=r.pathname&&"/"===r.pathname.charAt(0),w=e.host||e.pathname&&"/"===e.pathname.charAt(0),E=w||v||r.host&&e.pathname,_=E,T=r.pathname&&r.pathname.split("/")||[],O=(p=e.pathname&&e.pathname.split("/")||[],r.protocol&&!g[r.protocol]);if(O&&(r.hostname="",r.port=null,r.host&&(""===T[0]?T[0]=r.host:T.unshift(r.host)),r.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===p[0]?p[0]=e.host:p.unshift(e.host)),e.host=null),E=E&&(""===p[0]||""===T[0])),w)r.host=e.host||""===e.host?e.host:r.host,r.hostname=e.hostname||""===e.hostname?e.hostname:r.hostname,r.search=e.search,r.query=e.query,T=p;else if(p.length)T||(T=[]),T.pop(),T=T.concat(p),r.search=e.search,r.query=e.query;else if(!i.isNullOrUndefined(e.search)){if(O)r.hostname=r.host=T.shift(),(R=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=R.shift(),r.host=r.hostname=R.shift());return r.search=e.search,r.query=e.query,i.isNull(r.pathname)&&i.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!T.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var S=T.slice(-1)[0],A=(r.host||e.host||T.length>1)&&("."===S||".."===S)||""===S,x=0,I=T.length;I>=0;I--)"."===(S=T[I])?T.splice(I,1):".."===S?(T.splice(I,1),x++):x&&(T.splice(I,1),x--);if(!E&&!_)for(;x--;x)T.unshift("..");!E||""===T[0]||T[0]&&"/"===T[0].charAt(0)||T.unshift(""),A&&"/"!==T.join("/").substr(-1)&&T.push("");var R,P=""===T[0]||T[0]&&"/"===T[0].charAt(0);O&&(r.hostname=r.host=P?"":T.length?T.shift():"",(R=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=R.shift(),r.host=r.hostname=R.shift()));return(E=E||r.host&&T.length)&&!P&&T.unshift(""),T.length?r.pathname=T.join("/"):(r.pathname=null,r.path=null),i.isNull(r.pathname)&&i.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r},o.prototype.parseHost=function(){var e=this.host,t=s.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},function(e,t){function r(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=r=function(e){return typeof e}:e.exports=r=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(t)}e.exports=r},,,,,function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},function(e,t,r){e.exports=i;var n=r(73).EventEmitter;function i(){n.call(this)}r(29)(i,n),i.Readable=r(39),i.Writable=r(135),i.Duplex=r(136),i.Transform=r(137),i.PassThrough=r(138),i.Stream=i,i.prototype.pipe=function(e,t){var r=this;function i(t){e.writable&&!1===e.write(t)&&r.pause&&r.pause()}function o(){r.readable&&r.resume&&r.resume()}r.on("data",i),e.on("drain",o),e._isStdio||t&&!1===t.end||(r.on("end",s),r.on("close",u));var a=!1;function s(){a||(a=!0,e.end())}function u(){a||(a=!0,"function"==typeof e.destroy&&e.destroy())}function c(e){if(l(),0===n.listenerCount(this,"error"))throw e}function l(){r.removeListener("data",i),e.removeListener("drain",o),r.removeListener("end",s),r.removeListener("close",u),r.removeListener("error",c),e.removeListener("error",c),r.removeListener("end",l),r.removeListener("close",l),e.removeListener("close",l)}return r.on("error",c),e.on("error",c),r.on("end",l),r.on("close",l),e.on("close",l),e.emit("pipe",r),e}},function(e,t,r){"use strict";var n=r(44),i=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};e.exports=f;var o=r(40);o.inherits=r(29);var a=r(86),s=r(74);o.inherits(f,a);for(var u=i(s.prototype),c=0;c<u.length;c++){var l=u[c];f.prototype[l]||(f.prototype[l]=s.prototype[l])}function f(e){if(!(this instanceof f))return new f(e);a.call(this,e),s.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",d)}function d(){this.allowHalfOpen||this._writableState.ended||n.nextTick(h,this)}function h(e){e.end()}Object.defineProperty(f.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(f.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),f.prototype._destroy=function(e,t){this.push(null),this.end(),n.nextTick(t,e)}},function(e,t,r){"use strict";r.d(t,"a",(function(){return O}));var n=r(8),i=r.n(n),o=r(35),a=r.n(o),s=r(12),u=r.n(s),c=r(13),l=r.n(c),f=r(118),d=r.n(f),h=r(119),p=r.n(h),m=r(120),y=r.n(m),g=function(){function e(){u()(this,e)}return l()(e,null,[{key:"init",value:function(){throw new Error("You have to implement the method init()!")}}]),e}(),b=r(17),v=r(1),w=r(9),E=r(16),_=(r(3),{}),T={},O=function(e){function t(){return u()(this,t),d()(this,p()(t).apply(this,arguments))}return y()(t,e),l()(t,null,[{key:"init",value:function(){return new Promise(function(){var e=a()(i.a.mark((function e(t){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.getSync(v.c.AppSettings.KEY);case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0={};case 5:return _=e.t0,e.next=8,b.a.getSync(v.c.Stats.KEY);case 8:return r=e.sent,e.next=11,b.a.get(v.c.Stats.KEY);case 11:if(e.t1=e.sent,e.t1){e.next=14;break}e.t1={};case 14:T=e.t1,0===Object.keys(_).length&&(_=E.a.DEFAULT_SETTINGS,b.a.setSync(v.c.AppSettings.KEY,_),w.a.debug("Initialized settings to default")),0===Object.keys(T).length&&(T=r||E.a.DEFAULT_STATS,b.a.set(v.c.Stats.KEY,T),w.a.debug("Initialized stats to default")),w.a.debug("App Configuration initialized"),w.a.debug(_),t();case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},{key:"appSettings",get:function(){return _}}]),t}(g)},,,function(e,t){function r(e,t,r,n,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,i)}e.exports=function(e){return function(){var t=this,n=arguments;return new Promise((function(i,o){var a=e.apply(t,n);function s(e){r(a,i,o,s,u,"next",e)}function u(e){r(a,i,o,s,u,"throw",e)}s(void 0)}))}}},function(e,t,r){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var n=r(128),i=r(129),o=r(87);function a(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(e,t){if(a()<t)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=u.prototype:(null===e&&(e=new u(t)),e.length=t),e}function u(e,t,r){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(e,t,r);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return f(this,e)}return c(this,e,t,r)}function c(e,t,r,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,r,n){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");t=void 0===r&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n);u.TYPED_ARRAY_SUPPORT?(e=t).__proto__=u.prototype:e=d(e,t);return e}(e,t,r,n):"string"==typeof t?function(e,t,r){"string"==typeof r&&""!==r||(r="utf8");if(!u.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|p(t,r),i=(e=s(e,n)).write(t,r);i!==n&&(e=e.slice(0,i));return e}(e,t,r):function(e,t){if(u.isBuffer(t)){var r=0|h(t.length);return 0===(e=s(e,r)).length||t.copy(e,0,0,r),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(n=t.length)!=n?s(e,0):d(e,t);if("Buffer"===t.type&&o(t.data))return d(e,t.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function f(e,t){if(l(t),e=s(e,t<0?0:0|h(t)),!u.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function d(e,t){var r=t.length<0?0:0|h(t.length);e=s(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function h(e){if(e>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|e}function p(e,t){if(u.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return F(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return q(e).length;default:if(n)return F(e).length;t=(""+t).toLowerCase(),n=!0}}function m(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return R(this,t,r);case"utf8":case"utf-8":return A(this,t,r);case"ascii":return x(this,t,r);case"latin1":case"binary":return I(this,t,r);case"base64":return S(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function y(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function g(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=u.from(t,n)),u.isBuffer(t))return 0===t.length?-1:b(e,t,r,n,i);if("number"==typeof t)return t&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):b(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function b(e,t,r,n,i){var o,a=1,s=e.length,u=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;a=2,s/=2,u/=2,r/=2}function c(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){var l=-1;for(o=r;o<s;o++)if(c(e,o)===c(t,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===u)return l*a}else-1!==l&&(o-=o-l),l=-1}else for(r+u>s&&(r=s-u),o=r;o>=0;o--){for(var f=!0,d=0;d<u;d++)if(c(e,o+d)!==c(t,d)){f=!1;break}if(f)return o}return-1}function v(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var a=0;a<n;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[r+a]=s}return a}function w(e,t,r,n){return V(F(t,e.length-r),e,r,n)}function E(e,t,r,n){return V(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function _(e,t,r,n){return E(e,t,r,n)}function T(e,t,r,n){return V(q(t),e,r,n)}function O(e,t,r,n){return V(function(e,t){for(var r,n,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)r=e.charCodeAt(a),n=r>>8,i=r%256,o.push(i),o.push(n);return o}(t,e.length-r),e,r,n)}function S(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r))}function A(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var o,a,s,u,c=e[i],l=null,f=c>239?4:c>223?3:c>191?2:1;if(i+f<=r)switch(f){case 1:c<128&&(l=c);break;case 2:128==(192&(o=e[i+1]))&&(u=(31&c)<<6|63&o)>127&&(l=u);break;case 3:o=e[i+1],a=e[i+2],128==(192&o)&&128==(192&a)&&(u=(15&c)<<12|(63&o)<<6|63&a)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:o=e[i+1],a=e[i+2],s=e[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(u=(15&c)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&u<1114112&&(l=u)}null===l?(l=65533,f=1):l>65535&&(l-=65536,n.push(l>>>10&1023|55296),l=56320|1023&l),n.push(l),i+=f}return function(e){var t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);var r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=4096));return r}(n)}t.Buffer=u,t.SlowBuffer=function(e){+e!=e&&(e=0);return u.alloc(+e)},t.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=a(),u.poolSize=8192,u._augment=function(e){return e.__proto__=u.prototype,e},u.from=function(e,t,r){return c(null,e,t,r)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(e,t,r){return function(e,t,r,n){return l(t),t<=0?s(e,t):void 0!==r?"string"==typeof n?s(e,t).fill(r,n):s(e,t).fill(r):s(e,t)}(null,e,t,r)},u.allocUnsafe=function(e){return f(null,e)},u.allocUnsafeSlow=function(e){return f(null,e)},u.isBuffer=function(e){return!(null==e||!e._isBuffer)},u.compare=function(e,t){if(!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,i=0,o=Math.min(r,n);i<o;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!o(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=u.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){var a=e[r];if(!u.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(n,i),i+=a.length}return n},u.byteLength=p,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)y(this,t,t+1);return this},u.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)y(this,t,t+3),y(this,t+1,t+2);return this},u.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)y(this,t,t+7),y(this,t+1,t+6),y(this,t+2,t+5),y(this,t+3,t+4);return this},u.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?A(this,0,e):m.apply(this,arguments)},u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">"},u.prototype.compare=function(e,t,r,n,i){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(n>>>=0),a=(r>>>=0)-(t>>>=0),s=Math.min(o,a),c=this.slice(n,i),l=e.slice(t,r),f=0;f<s;++f)if(c[f]!==l[f]){o=c[f],a=l[f];break}return o<a?-1:a<o?1:0},u.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},u.prototype.indexOf=function(e,t,r){return g(this,e,t,r,!0)},u.prototype.lastIndexOf=function(e,t,r){return g(this,e,t,r,!1)},u.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return v(this,e,t,r);case"utf8":case"utf-8":return w(this,e,t,r);case"ascii":return E(this,e,t,r);case"latin1":case"binary":return _(this,e,t,r);case"base64":return T(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,e,t,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function x(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function I(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function R(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=t;o<r;++o)i+=B(e[o]);return i}function P(e,t,r){for(var n=e.slice(t,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function D(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function C(e,t,r,n,i,o){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function L(e,t,r,n){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-r,2);i<o;++i)e[r+i]=(t&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function N(e,t,r,n){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-r,4);i<o;++i)e[r+i]=t>>>8*(n?i:3-i)&255}function k(e,t,r,n,i,o){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function M(e,t,r,n,o){return o||k(e,0,r,4),i.write(e,t,r,n,23,4),r+4}function j(e,t,r,n,o){return o||k(e,0,r,8),i.write(e,t,r,n,52,8),r+8}u.prototype.slice=function(e,t){var r,n=this.length;if((e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e),u.TYPED_ARRAY_SUPPORT)(r=this.subarray(e,t)).__proto__=u.prototype;else{var i=t-e;r=new u(i,void 0);for(var o=0;o<i;++o)r[o]=this[o+e]}return r},u.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||D(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n},u.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||D(e,t,this.length);for(var n=this[e+--t],i=1;t>0&&(i*=256);)n+=this[e+--t]*i;return n},u.prototype.readUInt8=function(e,t){return t||D(e,1,this.length),this[e]},u.prototype.readUInt16LE=function(e,t){return t||D(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUInt16BE=function(e,t){return t||D(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUInt32LE=function(e,t){return t||D(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUInt32BE=function(e,t){return t||D(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||D(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*t)),n},u.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||D(e,t,this.length);for(var n=t,i=1,o=this[e+--n];n>0&&(i*=256);)o+=this[e+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},u.prototype.readInt8=function(e,t){return t||D(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){t||D(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt16BE=function(e,t){t||D(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt32LE=function(e,t){return t||D(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return t||D(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readFloatLE=function(e,t){return t||D(e,4,this.length),i.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return t||D(e,4,this.length),i.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return t||D(e,8,this.length),i.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return t||D(e,8,this.length),i.read(this,e,!1,52,8)},u.prototype.writeUIntLE=function(e,t,r,n){(e=+e,t|=0,r|=0,n)||C(this,e,t,r,Math.pow(2,8*r)-1,0);var i=1,o=0;for(this[t]=255&e;++o<r&&(i*=256);)this[t+o]=e/i&255;return t+r},u.prototype.writeUIntBE=function(e,t,r,n){(e=+e,t|=0,r|=0,n)||C(this,e,t,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+r},u.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||C(this,e,t,1,255,0),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},u.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||C(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):L(this,e,t,!0),t+2},u.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||C(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):L(this,e,t,!1),t+2},u.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||C(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):N(this,e,t,!0),t+4},u.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||C(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):N(this,e,t,!1),t+4},u.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);C(this,e,t,r,i-1,-i)}var o=0,a=1,s=0;for(this[t]=255&e;++o<r&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+r},u.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);C(this,e,t,r,i-1,-i)}var o=r-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+r},u.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||C(this,e,t,1,127,-128),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||C(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):L(this,e,t,!0),t+2},u.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||C(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):L(this,e,t,!1),t+2},u.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||C(this,e,t,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):N(this,e,t,!0),t+4},u.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||C(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):N(this,e,t,!1),t+4},u.prototype.writeFloatLE=function(e,t,r){return M(this,e,t,!0,r)},u.prototype.writeFloatBE=function(e,t,r){return M(this,e,t,!1,r)},u.prototype.writeDoubleLE=function(e,t,r){return j(this,e,t,!0,r)},u.prototype.writeDoubleBE=function(e,t,r){return j(this,e,t,!1,r)},u.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i,o=n-r;if(this===e&&r<t&&t<n)for(i=o-1;i>=0;--i)e[i+t]=this[i+r];else if(o<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+o),t);return o},u.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!u.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var o;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(o=t;o<r;++o)this[o]=e;else{var a=u.isBuffer(e)?e:F(new u(e,n).toString()),s=a.length;for(o=0;o<r-t;++o)this[o+t]=a[o%s]}return this};var U=/[^+\/0-9A-Za-z-_]/g;function B(e){return e<16?"0"+e.toString(16):e.toString(16)}function F(e,t){var r;t=t||1/0;for(var n=e.length,i=null,o=[],a=0;a<n;++a){if((r=e.charCodeAt(a))>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function q(e){return n.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(U,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function V(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}}).call(this,r(15))},,function(e,t,r){"use strict";e.exports=function(e){for(var t=5381,r=e.length;r;)t=33*t^e.charCodeAt(--r);return t>>>0}},function(e,t,r){(t=e.exports=r(86)).Stream=t,t.Readable=t,t.Writable=r(74),t.Duplex=r(31),t.Transform=r(90),t.PassThrough=r(134)},function(e,t,r){(function(e){function r(e){return Object.prototype.toString.call(e)}t.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===r(e)},t.isBoolean=function(e){return"boolean"==typeof e},t.isNull=function(e){return null===e},t.isNullOrUndefined=function(e){return null==e},t.isNumber=function(e){return"number"==typeof e},t.isString=function(e){return"string"==typeof e},t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=function(e){return void 0===e},t.isRegExp=function(e){return"[object RegExp]"===r(e)},t.isObject=function(e){return"object"==typeof e&&null!==e},t.isDate=function(e){return"[object Date]"===r(e)},t.isError=function(e){return"[object Error]"===r(e)||e instanceof Error},t.isFunction=function(e){return"function"==typeof e},t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=e.isBuffer}).call(this,r(36).Buffer)},function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var n=r(12),i=r.n(n),o=r(13),a=r.n(o),s=r(20),u=function(){function e(){i()(this,e)}return a()(e,null,[{key:"get",value:function(e){return s.a.getResource(e)}},{key:"image",value:function(t){return e.get("assets/img/".concat(t))}}]),e}()},function(e,t,r){"use strict";r.d(t,"a",(function(){return y})),r.d(t,"b",(function(){return f})),r.d(t,"c",(function(){return c})),r.d(t,"d",(function(){return s}));var n=r(43),i=function(){return Math.random().toString(36).substring(7).split("").join(".")},o={INIT:"@@redux/INIT"+i(),REPLACE:"@@redux/REPLACE"+i(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+i()}};function a(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function s(e,t,r){var i;if("function"==typeof t&&"function"==typeof r||"function"==typeof r&&"function"==typeof arguments[3])throw new Error("It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function.");if("function"==typeof t&&void 0===r&&(r=t,t=void 0),void 0!==r){if("function"!=typeof r)throw new Error("Expected the enhancer to be a function.");return r(s)(e,t)}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var u=e,c=t,l=[],f=l,d=!1;function h(){f===l&&(f=l.slice())}function p(){if(d)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return c}function m(e){if("function"!=typeof e)throw new Error("Expected the listener to be a function.");if(d)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api-reference/store#subscribe(listener) for more details.");var t=!0;return h(),f.push(e),function(){if(t){if(d)throw new Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api-reference/store#subscribe(listener) for more details.");t=!1,h();var r=f.indexOf(e);f.splice(r,1)}}}function y(e){if(!a(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(d)throw new Error("Reducers may not dispatch actions.");try{d=!0,c=u(c,e)}finally{d=!1}for(var t=l=f,r=0;r<t.length;r++){(0,t[r])()}return e}function g(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");u=e,y({type:o.REPLACE})}function b(){var e,t=m;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new TypeError("Expected the observer to be an object.");function r(){e.next&&e.next(p())}return r(),{unsubscribe:t(r)}}})[n.a]=function(){return this},e}return y({type:o.INIT}),(i={dispatch:y,subscribe:m,getState:p,replaceReducer:g})[n.a]=b,i}function u(e,t){var r=t&&t.type;return"Given "+(r&&'action "'+String(r)+'"'||"an action")+', reducer "'+e+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}function c(e){for(var t=Object.keys(e),r={},n=0;n<t.length;n++){var i=t[n];0,"function"==typeof e[i]&&(r[i]=e[i])}var a,s=Object.keys(r);try{!function(e){Object.keys(e).forEach((function(t){var r=e[t];if(void 0===r(void 0,{type:o.INIT}))throw new Error('Reducer "'+t+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if(void 0===r(void 0,{type:o.PROBE_UNKNOWN_ACTION()}))throw new Error('Reducer "'+t+"\" returned undefined when probed with a random type. Don't try to handle "+o.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')}))}(r)}catch(e){a=e}return function(e,t){if(void 0===e&&(e={}),a)throw a;for(var n=!1,i={},o=0;o<s.length;o++){var c=s[o],l=r[c],f=e[c],d=l(f,t);if(void 0===d){var h=u(c,t);throw new Error(h)}i[c]=d,n=n||d!==f}return n?i:e}}function l(e,t){return function(){return t(e.apply(this,arguments))}}function f(e,t){if("function"==typeof e)return l(e,t);if("object"!=typeof e||null===e)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===e?"null":typeof e)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');var r={};for(var n in e){var i=e[n];"function"==typeof i&&(r[n]=l(i,t))}return r}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h(e,t){var r=Object.keys(e);return Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(e)),t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(r,!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function m(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function y(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){return function(){var r=e.apply(void 0,arguments),n=function(){throw new Error("Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.")},i={getState:r.getState,dispatch:function(){return n.apply(void 0,arguments)}},o=t.map((function(e){return e(i)}));return p({},r,{dispatch:n=m.apply(void 0,o)(r.dispatch)})}}}},function(e,t,r){"use strict";(function(e,n){var i,o=r(72);i="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:n;var a=Object(o.a)(i);t.a=a}).call(this,r(15),r(108)(e))},function(e,t,r){"use strict";(function(t){!t.version||0===t.version.indexOf("v0.")||0===t.version.indexOf("v1.")&&0!==t.version.indexOf("v1.8.")?e.exports={nextTick:function(e,r,n,i){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var o,a,s=arguments.length;switch(s){case 0:case 1:return t.nextTick(e);case 2:return t.nextTick((function(){e.call(null,r)}));case 3:return t.nextTick((function(){e.call(null,r,n)}));case 4:return t.nextTick((function(){e.call(null,r,n,i)}));default:for(o=new Array(s-1),a=0;a<o.length;)o[a++]=arguments[a];return t.nextTick((function(){e.apply(null,o)}))}}}:e.exports=t}).call(this,r(21))},function(e,t,r){var n=r(36),i=n.Buffer;function o(e,t){for(var r in e)t[r]=e[r]}function a(e,t,r){return i(e,t,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=n:(o(n,t),t.Buffer=a),o(i,a),a.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,r)},a.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var n=i(e);return void 0!==t?"string"==typeof r?n.fill(t,r):n.fill(t):n.fill(0),n},a.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},a.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n.SlowBuffer(e)}},function(e,t,r){"use strict";t.decode=t.parse=r(143),t.encode=t.stringify=r(144)},function(e,t,r){"use strict";(function(t){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(e){o(e)}}function s(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};const o=i(r(76)),a=i(r(94)),s=r(23),u=r(30),c={"http:":o.default,"https:":a.default},l=new Set([301,302,303,307,308]),f=new Set([429,503]),d=["connect","continue","information","socket","timeout","upgrade"],h=["aborted"];function p(e,r={}){var i;const o=Object.assign({},p.defaultOptions,r),a=new u.PassThrough({highWaterMark:o.highWaterMark});let m,y,g;a.destroyed=a.aborted=!1;let b,v,w,E=0,_=0,T=0,O=!1,S=0,A=0;if(null===(i=o.headers)||void 0===i?void 0:i.Range){let e=/bytes=(\d+)-(\d+)?/.exec(o.headers.Range+"");e&&(S=parseInt(e[1],10),w=parseInt(e[2],10))}o.acceptEncoding&&(o.headers=Object.assign({"Accept-Encoding":Object.keys(o.acceptEncoding).join(", ")},o.headers));const x=e=>!!("HEAD"!=r.method&&O&&A!=v&&T++<o.maxReconnects)&&((e=>{g=null,_=0;let t=o.backoff.inc,r=Math.min(t,o.backoff.max);b=setTimeout(P,r),a.emit("reconnect",T,e)})(e),!0),I=e=>{if(a.destroyed)return!1;if(g&&0<A)return x(e.err);if((!e.statusCode||"ENOTFOUND"===e.err.message)&&_++<o.maxRetries){let t=e.retryAfter||Math.min(_*o.backoff.inc,o.backoff.max);return b=setTimeout(P,t),a.emit("retry",_,e.err),!0}return!1},R=(e,t)=>{for(let r of t)e.on(r,a.emit.bind(a,r))},P=()=>{let t,r;try{t=s.parse(e),r=c[t.protocol]}catch(e){}if(!r)return void a.emit("error",new p.MinigetError("Invalid URL: "+e));if(Object.assign(t,o),O&&A>0){let e=A+S,r=w||"";t.headers=Object.assign({},t.headers,{Range:`bytes=${e}-${r}`})}if(o.transform){try{t=o.transform(t)}catch(e){return void a.emit("error",e)}if((!t||t.protocol)&&(r=c[null==t?void 0:t.protocol],!r))return void a.emit("error",new p.MinigetError("Invalid URL object from `transform` function"))}const n=(e,t)=>{u(),I({err:e,statusCode:t})?m.removeListener("close",i):a.emit("error",e)},i=()=>{u(),I({})},u=()=>{m.removeListener("error",n),m.removeListener("close",i),null==y||y.removeListener("data",b),null==g||g.removeListener("end",_),null==g||g.removeListener("error",n),null==y||y.removeListener("error",n)},b=e=>{A+=e.length},_=()=>{u(),x()||a.end()};m=r.get(t,t=>{if(!a.destroyed){if(l.has(t.statusCode))return E++>=o.maxRedirects?a.emit("error",new p.MinigetError("Too many redirects")):(e=t.headers.location,setTimeout(P,t.headers["retry-after"]?1e3*parseInt(t.headers["retry-after"],10):0),a.emit("redirect",e)),u();if(f.has(t.statusCode)){if(!I({retryAfter:parseInt(t.headers["retry-after"],10)})){let e=new p.MinigetError("Status code: "+t.statusCode,t.statusCode);a.emit("error",e)}return u()}if(t.statusCode<200||400<=t.statusCode){let e=new p.MinigetError("Status code: "+t.statusCode,t.statusCode);return t.statusCode>=500?n(e,t.statusCode):a.emit("error",e),u()}if(g=t,o.acceptEncoding&&t.headers["content-encoding"])for(let e of t.headers["content-encoding"].split(", ").reverse()){let t=o.acceptEncoding[e];null!=t&&(g=g.pipe(t()),g.on("error",n))}v||(v=parseInt(t.headers["content-length"]+"",10),O="bytes"===t.headers["accept-ranges"]&&v>0&&o.maxReconnects>0),t.on("data",b),g.on("end",_),g.pipe(a,{end:!O}),y=t,a.emit("response",t),t.on("error",n),R(t,h)}}),m.on("error",n),m.on("close",i),R(m,d),a.destroyed&&C(D),a.emit("request",m)};let D;a.abort=e=>{console.warn("`MinigetStream#abort()` has been deprecated in favor of `MinigetStream#destroy()`"),a.aborted=!0,a.emit("abort"),a.destroy(e)};const C=e=>{m.destroy(e),null==g||g.unpipe(a),null==g||g.destroy(),clearTimeout(b)};return a._destroy=e=>{a.destroyed=!0,m?C(e):D=e},a.text=()=>n(this,void 0,void 0,(function*(){return new Promise((e,t)=>{let r="";a.setEncoding("utf8"),a.on("data",e=>r+=e),a.on("end",()=>e(r)),a.on("error",t)})})),t.nextTick(P),a}p.MinigetError=class extends Error{constructor(e,t){super(e),this.statusCode=t}},p.defaultOptions={maxRedirects:10,maxRetries:2,maxReconnects:0,backoff:{inc:100,max:1e4}},e.exports=p}).call(this,r(21))},function(e,t,r){const n=r(47);t.between=(e,t,r)=>{let n;if(t instanceof RegExp){const r=e.match(t);if(!r)return"";n=r.index+r[0].length}else{if(n=e.indexOf(t),-1===n)return"";n+=t.length}return n=(e=e.slice(n)).indexOf(r),-1===n?"":e=e.slice(0,n)},t.parseAbbreviatedNumber=e=>{const t=e.replace(",",".").replace(" ","").match(/([\d,.]+)([MK]?)/);if(t){let[,e,r]=t;return e=parseFloat(e),Math.round("M"===r?1e6*e:"K"===r?1e3*e:e)}return null},t.cutAfterJSON=e=>{let t,r;if("["===e[0]?(t="[",r="]"):"{"===e[0]&&(t="{",r="}"),!t)throw new Error("Can't cut unsupported JSON (need to begin with [ or { ) but got: "+e[0]);let n,i=!1,o=0;for(n=0;n<e.length;n++)if('"'!==e[n]||"\\"===e[n-1]){if(!i&&(e[n]===t?o++:e[n]===r&&o--,0===o))return e.substr(0,n+1)}else i=!i;throw Error("Can't cut unsupported JSON (no matching closing bracket found)")},t.playError=(e,t,r=Error)=>{let n=e.playabilityStatus;return n&&t.includes(n.status)?new r(n.reason||n.messages&&n.messages[0]):null},t.deprecate=(e,t,r,n,i)=>{Object.defineProperty(e,t,{get:()=>(console.warn(`\`${n}\` will be removed in a near future release, use \`${i}\` instead.`),r)})};const{version:i}=r(149);t.lastUpdateCheck=0,t.checkForUpdates=()=>!Object({NODE_ENV:"production",BRAND:"Avast",APP_DATA:{theme:{primary:"#09884C",secondary:"#09884C",hoverPrimary:"#076D3D",hoverSecondary:"#076D3D"},urls:{eula:"https://www.avast.com/eula",info:"https://support.avast.com/en-ww/article/29/#idt_3970"}}}).YTDL_NO_UPDATE&&Date.now()-t.lastUpdateCheck>=432e5?(t.lastUpdateCheck=Date.now(),n("https://api.github.com/repos/fent/node-ytdl-core/releases/latest",{headers:{"User-Agent":"ytdl-core"}}).text().then(e=>{JSON.parse(e).tag_name!=="v"+i&&console.warn('[33mWARNING:[0m ytdl-core is out of date! Update with "npm install ytdl-core@latest".')})):null},,,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_PORT_NAME=t.PATCH_STATE_TYPE=t.STATE_TYPE=t.DISPATCH_TYPE=void 0;t.DISPATCH_TYPE="chromex.dispatch";t.STATE_TYPE="chromex.state";t.PATCH_STATE_TYPE="chromex.patch_state";t.DEFAULT_PORT_NAME="chromex.port_name"},function(e,t,r){"use strict";function n(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){i(e,t,r[t])}))}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(t,"__esModule",{value:!0}),t.withSerializer=t.withDeserializer=t.noop=void 0;var o=function(e){return e};t.noop=o;var a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o;return n({},e,e.payload?{payload:t(e.payload)}:{})},s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o,r=arguments.length>2?arguments[2]:void 0;return r?function(n){for(var i=arguments.length,o=new Array(i>1?i-1:0),s=1;s<i;s++)o[s-1]=arguments[s];return r.apply(void 0,[n].concat(o))?e.apply(void 0,[a(n,t)].concat(o)):e.apply(void 0,[n].concat(o))}:function(r){for(var n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];return e.apply(void 0,[a(r,t)].concat(i))}};t.withDeserializer=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o;return function(t){return function(r,n){return t(s(r,e,n))}}};t.withSerializer=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o;return function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(){for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];if(i.length<=r)throw new Error("Message in request could not be serialized. "+"Expected message in position ".concat(r," but only received ").concat(i.length," args."));return i[r]=a(i[r],e),t.apply(void 0,i)}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DIFF_STATUS_ARRAY_UPDATED=t.DIFF_STATUS_KEYS_UPDATED=t.DIFF_STATUS_REMOVED=t.DIFF_STATUS_UPDATED=void 0;t.DIFF_STATUS_UPDATED="updated";t.DIFF_STATUS_REMOVED="removed";t.DIFF_STATUS_KEYS_UPDATED="updated_keys";t.DIFF_STATUS_ARRAY_UPDATED="updated_array"},function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.getBrowserAPI=function(){var t;try{t=e.chrome||e.browser||browser}catch(e){t=browser}if(!t)throw new Error("Browser API is not present");return t}}).call(this,r(15))},,,,,,,,,,,,,,,,,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Store",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"applyMiddleware",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"wrapStore",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"alias",{enumerable:!0,get:function(){return a.default}});var n=s(r(100)),i=s(r(103)),o=s(r(104)),a=s(r(106));function s(e){return e&&e.__esModule?e:{default:e}}},function(e,t,r){"use strict";function n(e){var t,r=e.Symbol;return"function"==typeof r?r.observable?t=r.observable:(t=r("observable"),r.observable=t):t="@@observable",t}r.d(t,"a",(function(){return n}))},function(e,t,r){"use strict";var n,i="object"==typeof Reflect?Reflect:null,o=i&&"function"==typeof i.apply?i.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};n=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var a=Number.isNaN||function(e){return e!=e};function s(){s.init.call(this)}e.exports=s,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var u=10;function c(e){return void 0===e._maxListeners?s.defaultMaxListeners:e._maxListeners}function l(e,t,r,n){var i,o,a,s;if("function"!=typeof r)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof r);if(void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),o=e._events),a=o[t]),void 0===a)a=o[t]=r,++e._eventsCount;else if("function"==typeof a?a=o[t]=n?[r,a]:[a,r]:n?a.unshift(r):a.push(r),(i=c(e))>0&&a.length>i&&!a.warned){a.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=a.length,s=u,console&&console.warn&&console.warn(s)}return e}function f(){for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,o(this.listener,this.target,e))}function d(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},i=f.bind(n);return i.listener=r,n.wrapFn=i,i}function h(e,t,r){var n=e._events;if(void 0===n)return[];var i=n[t];return void 0===i?[]:"function"==typeof i?r?[i.listener||i]:[i]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(i):m(i,i.length)}function p(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function m(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(e){if("number"!=typeof e||e<0||a(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");u=e}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||a(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},s.prototype.getMaxListeners=function(){return c(this)},s.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var n="error"===e,i=this._events;if(void 0!==i)n=n&&void 0===i.error;else if(!n)return!1;if(n){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var u=i[e];if(void 0===u)return!1;if("function"==typeof u)o(u,this,t);else{var c=u.length,l=m(u,c);for(r=0;r<c;++r)o(l[r],this,t)}return!0},s.prototype.addListener=function(e,t){return l(this,e,t,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(e,t){return l(this,e,t,!0)},s.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.on(e,d(this,e,t)),this},s.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.prependListener(e,d(this,e,t)),this},s.prototype.removeListener=function(e,t){var r,n,i,o,a;if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);if(void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===t||r[o].listener===t){a=r[o].listener,i=o;break}if(i<0)return this;0===i?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,i),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,a||t)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var i,o=Object.keys(r);for(n=0;n<o.length;++n)"removeListener"!==(i=o[n])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},s.prototype.listeners=function(e){return h(this,e,!0)},s.prototype.rawListeners=function(e){return h(this,e,!1)},s.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):p.call(e,t)},s.prototype.listenerCount=p,s.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]}},function(e,t,r){"use strict";(function(t,n,i){var o=r(44);function a(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,r){var n=e.entry;e.entry=null;for(;n;){var i=n.callback;t.pendingcb--,i(r),n=n.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}(t,e)}}e.exports=b;var s,u=!t.browser&&["v0.10","v0.9."].indexOf(t.version.slice(0,5))>-1?n:o.nextTick;b.WritableState=g;var c=r(40);c.inherits=r(29);var l={deprecate:r(133)},f=r(88),d=r(45).Buffer,h=i.Uint8Array||function(){};var p,m=r(89);function y(){}function g(e,t){s=s||r(31),e=e||{};var n=t instanceof s;this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var i=e.highWaterMark,c=e.writableHighWaterMark,l=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:n&&(c||0===c)?c:l,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var f=!1===e.decodeStrings;this.decodeStrings=!f,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var r=e._writableState,n=r.sync,i=r.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(r),t)!function(e,t,r,n,i){--t.pendingcb,r?(o.nextTick(i,n),o.nextTick(O,e,t),e._writableState.errorEmitted=!0,e.emit("error",n)):(i(n),e._writableState.errorEmitted=!0,e.emit("error",n),O(e,t))}(e,r,n,t,i);else{var a=_(r);a||r.corked||r.bufferProcessing||!r.bufferedRequest||E(e,r),n?u(w,e,r,a,i):w(e,r,a,i)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new a(this)}function b(e){if(s=s||r(31),!(p.call(b,this)||this instanceof s))return new b(e);this._writableState=new g(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),f.call(this)}function v(e,t,r,n,i,o,a){t.writelen=n,t.writecb=a,t.writing=!0,t.sync=!0,r?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function w(e,t,r,n){r||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,n(),O(e,t)}function E(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,i=new Array(n),o=t.corkedRequestsFree;o.entry=r;for(var s=0,u=!0;r;)i[s]=r,r.isBuf||(u=!1),r=r.next,s+=1;i.allBuffers=u,v(e,t,!0,t.length,i,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new a(t),t.bufferedRequestCount=0}else{for(;r;){var c=r.chunk,l=r.encoding,f=r.callback;if(v(e,t,!1,t.objectMode?1:c.length,c,l,f),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function _(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function T(e,t){e._final((function(r){t.pendingcb--,r&&e.emit("error",r),t.prefinished=!0,e.emit("prefinish"),O(e,t)}))}function O(e,t){var r=_(t);return r&&(!function(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,o.nextTick(T,e,t)):(t.prefinished=!0,e.emit("prefinish")))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),r}c.inherits(b,f),g.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(g.prototype,"buffer",{get:l.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(p=Function.prototype[Symbol.hasInstance],Object.defineProperty(b,Symbol.hasInstance,{value:function(e){return!!p.call(this,e)||this===b&&(e&&e._writableState instanceof g)}})):p=function(e){return e instanceof this},b.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},b.prototype.write=function(e,t,r){var n,i=this._writableState,a=!1,s=!i.objectMode&&(n=e,d.isBuffer(n)||n instanceof h);return s&&!d.isBuffer(e)&&(e=function(e){return d.from(e)}(e)),"function"==typeof t&&(r=t,t=null),s?t="buffer":t||(t=i.defaultEncoding),"function"!=typeof r&&(r=y),i.ended?function(e,t){var r=new Error("write after end");e.emit("error",r),o.nextTick(t,r)}(this,r):(s||function(e,t,r,n){var i=!0,a=!1;return null===r?a=new TypeError("May not write null values to stream"):"string"==typeof r||void 0===r||t.objectMode||(a=new TypeError("Invalid non-string/buffer chunk")),a&&(e.emit("error",a),o.nextTick(n,a),i=!1),i}(this,i,e,r))&&(i.pendingcb++,a=function(e,t,r,n,i,o){if(!r){var a=function(e,t,r){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=d.from(t,r));return t}(t,n,i);n!==a&&(r=!0,i="buffer",n=a)}var s=t.objectMode?1:n.length;t.length+=s;var u=t.length<t.highWaterMark;u||(t.needDrain=!0);if(t.writing||t.corked){var c=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},c?c.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else v(e,t,!1,s,n,i,o);return u}(this,i,s,e,t,r)),a},b.prototype.cork=function(){this._writableState.corked++},b.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||E(this,e))},b.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(b.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),b.prototype._write=function(e,t,r){r(new Error("_write() is not implemented"))},b.prototype._writev=null,b.prototype.end=function(e,t,r){var n=this._writableState;"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!=e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||n.finished||function(e,t,r){t.ending=!0,O(e,t),r&&(t.finished?o.nextTick(r):e.once("finish",r));t.ended=!0,e.writable=!1}(this,n,r)},Object.defineProperty(b.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),b.prototype.destroy=m.destroy,b.prototype._undestroy=m.undestroy,b.prototype._destroy=function(e,t){this.end(),t(e)}}).call(this,r(21),r(85).setImmediate,r(15))},function(e,t,r){"use strict";var n=r(45).Buffer,i=n.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(n.isEncoding===i||!i(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=u,this.end=c,t=4;break;case"utf8":this.fillLast=s,t=4;break;case"base64":this.text=l,this.end=f,t=3;break;default:return this.write=d,void(this.end=h)}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(t)}function a(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function s(e){var t=this.lastTotal-this.lastNeed,r=function(e,t,r){if(128!=(192&t[0]))return e.lastNeed=0,"�";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"�";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"�"}}(this,e);return void 0!==r?r:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function u(e,t){if((e.length-t)%2==0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function c(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function l(e,t){var r=(e.length-t)%3;return 0===r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function f(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function d(e){return e.toString(this.encoding)}function h(e){return e&&e.length?this.write(e):""}t.StringDecoder=o,o.prototype.write=function(e){if(0===e.length)return"";var t,r;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},o.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�":t},o.prototype.text=function(e,t){var r=function(e,t,r){var n=t.length-1;if(n<r)return 0;var i=a(t[n]);if(i>=0)return i>0&&(e.lastNeed=i-1),i;if(--n<r||-2===i)return 0;if((i=a(t[n]))>=0)return i>0&&(e.lastNeed=i-2),i;if(--n<r||-2===i)return 0;if((i=a(t[n]))>=0)return i>0&&(2===i?i=0:e.lastNeed=i-3),i;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)},o.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},function(e,t,r){(function(e){var n=r(145),i=r(93),o=r(147),a=r(148),s=r(23),u=t;u.request=function(t,r){t="string"==typeof t?s.parse(t):o(t);var i=-1===e.location.protocol.search(/^https?:$/)?"http:":"",a=t.protocol||i,u=t.hostname||t.host,c=t.port,l=t.path||"/";u&&-1!==u.indexOf(":")&&(u="["+u+"]"),t.url=(u?a+"//"+u:"")+(c?":"+c:"")+l,t.method=(t.method||"GET").toUpperCase(),t.headers=t.headers||{};var f=new n(t);return r&&f.on("response",r),f},u.get=function(e,t){var r=u.request(e,t);return r.end(),r},u.ClientRequest=n,u.IncomingMessage=i.IncomingMessage,u.Agent=function(){},u.Agent.defaultMaxSockets=4,u.globalAgent=new u.Agent,u.STATUS_CODES=a,u.METHODS=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"]}).call(this,r(15))},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};const i=r(30),o=r(23),a=n(r(152)),s=n(r(153)),u=n(r(154)),c=n(r(155)),l=r(97),f={m3u8:s.default,"dash-mpd":u.default};let d=(e,t={})=>{const r=new i.PassThrough,n=t.chunkReadahead||3,s=t.liveBuffer||2e4,u=t.requestOptions,d=f[t.parser||(/\.mpd$/.test(e)?"dash-mpd":"m3u8")];if(!d)throw TypeError(`parser '${t.parser}' not supported`);let h=0;void 0!==t.begin&&(h="string"==typeof t.begin?l.humanStr(t.begin):Math.max(t.begin-s,0));const p=e=>{for(let t of["abort","request","response","redirect","retry","reconnect"])e.on(t,r.emit.bind(r,t))};let m;const y=new c.default((e,t)=>{m=e;let n=0;e.on("data",e=>n+=e.length),e.pipe(r,{end:!1}),e.on("end",()=>t(void 0,n))},{concurrency:1});let g=0,b=0;const v=new c.default((t,n)=>{let i=Object.assign({},u);t.range&&(i.headers=Object.assign({},i.headers,{Range:`bytes=${t.range.start}-${t.range.end}`}));let s=a.default(o.resolve(e,t.url),i);s.on("error",n),p(s),y.push(s,(e,i)=>{b+=+i,r.emit("progress",{num:++g,size:i,duration:t.duration,url:t.url},v.total,b),n()})},{concurrency:n}),w=e=>{A||(r.emit("error",e),r.end())};let E,_,T,O,S=!0,A=!1,x=!1;const I=e=>{if(m=null,e)w(e);else if(!S&&!A&&!x&&v.tasks.length+v.active<=E){let e=Math.max(0,_-(Date.now()-O));S=!0,T=setTimeout(C,e)}else!A&&!x||v.tasks.length||v.active||r.end()};let R,P,D=0;const C=()=>{O=Date.now(),R=a.default(e,u),R.on("error",w),p(R);const r=R.pipe(new d(t.id));r.on("starttime",e=>{D||(D=e,"string"==typeof t.begin&&h>=0&&(h+=D))}),r.on("endlist",()=>{x=!0}),r.on("endearly",R.unpipe.bind(R,r));let n=[];const i=e=>{if(!e.init){if(e.seq<=P)return;P=e.seq}h=e.time,v.push(e,I),n.push(e)};let o=[],c=0;r.on("item",e=>{let t=Object.assign({time:D},e);if(h<=t.time)i(t);else for(o.push(t),c+=t.duration;o.length>1&&c-o[0].duration>s;)c-=o.shift().duration;D+=t.duration}),r.on("end",()=>{R=null,!n.length&&o.length&&o.forEach(e=>{i(e)}),E=Math.max(1,Math.ceil(.01*n.length)),_=n.reduce((e,t)=>t.duration+e,0),S=!1,I()})};return C(),r.end=()=>{A=!0,y.die(),v.die(),clearTimeout(T),null==R||R.destroy(),null==m||m.destroy(),i.PassThrough.prototype.end.call(r,null)},r};d.parseTimestamp=l.humanStr,e.exports=d},,,,,function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,i;return t=e,(r=[{key:"getMediaInfo",value:function(){throw Error("Not implemented")}},{key:"getContent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text";return new Promise((function(r,n){fetch(e,{method:"GET"}).then((function(e){return"json"===t?e.json():e.text()})).then((function(e){r(e)})).catch((function(e){n(e.messages)}))}))}}])&&n(t.prototype,r),i&&n(t,i),e}(),o=r(1),a=r(3),s=r(9);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t,r,n,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,i)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var m=function(e,t){var r=[];if(!e)return r;if(t.some((function(e){return e.isLive})))return r;var n={};return t.forEach((function(t){var i={type:t.qualityLabel?o.a.VIDEO:o.a.AUDIO,title:e.videoDetails.title,downloadUrl:t.url,ext:t.container,quality:t.qualityLabel||t.audioBitrate};i.quality&&!n[i.quality]&&(r.push(i),n[i.quality]=!0)})),r},y=function(e){function t(){return l(this,t),d(this,h(t).apply(this,arguments))}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,e),n=t,o=[{key:"rules",get:function(){return{name:"youtube",host:"www.youtube.com",native:[{player:".html5-video-player",videoId:function(){return a.a.matchPattern(document.location.href,"[?&]v=([^&]+)[&]?")},isSingleVideoPage:!0},{player:".html5-video-player.ytp-small-mode.ytp-iv-drawer-enabled",videoId:function(){if(a.a.matchPattern(document.location.href,"[?&]v=([^&]+)[&]?"))return null;var e=document.querySelector(".ytp-title-link.yt-uix-sessionlink[href]");return e?a.a.matchPattern(e.href,"[?&]v=([^&]+)[&]?"):null}}],embedded:[{player:'iframe[src*="youtube.com/embed/"]',videoId:function(e){return a.a.matchPattern(e.src,"embed/([a-zA-Z0-9_-]+)*")}}]}}}],(i=[{key:"getMediaInfo",value:function(e){var t=r(126);return new Promise(function(){var r,n=(r=regeneratorRuntime.mark((function r(n,i){var o,a,u,c;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,t.getInfo("http://www.youtube.com/watch?v="+e);case 3:o=r.sent,a=t.filterFormats(o.formats,"audioandvideo"),u=t.filterFormats(o.formats,"audioonly"),c=a.concat(u),n(m(o,c)),r.next=14;break;case 10:r.prev=10,r.t0=r.catch(0),s.a.error(r.t0.message),i(r.t0.message);case 14:case"end":return r.stop()}}),r,null,[[0,10]])})),function(){var e=this,t=arguments;return new Promise((function(n,i){var o=r.apply(e,t);function a(e){c(o,n,i,a,s,"next",e)}function s(e){c(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(e,t){return n.apply(this,arguments)}}())}}])&&f(n.prototype,i),o&&f(n,o),t}(i);function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function w(e,t){return!t||"object"!==g(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var T=function(e){function t(){return b(this,t),w(this,E(t).apply(this,arguments))}var r,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(t,e),r=t,i=[{key:"rules",get:function(){return{name:"Vimeo",host:"vimeo.com",native:[{player:".player_container",videoId:function(){return a.a.matchPattern(document.location.href,"/([0-9]{5,})")}},{player:".iris_video-vital.iris_video-vital--profile",videoId:function(e){return a.a.matchPattern(e.getElementsByTagName("a")[0].href,"/([0-9]{5,})")}},{player:".player_container",videoId:function(e){var t=e.classList.item(e.classList.length-1).split("_");return t.length?t[t.length-1]:null}},{player:"#player",videoId:function(){return a.a.matchPattern(document.location.href,"/([0-9]{5,})")}}],embedded:[{player:'iframe[src*="player.vimeo.com/video/',videoId:function(e){return a.a.matchPattern(e.src,"player.vimeo.com/video/([0-9]+)")}}]}}}],(n=[{key:"getMediaInfo",value:function(e){var t=this;return new Promise((function(r,n){t.getContent("https://vimeo.com/".concat(e)).then((function(e){var t=e.match(/data-config-url="([^"]+)"/);if(t){if(t&&"string"==typeof t[1])return t[1].replace(/&amp;/g,"&")}else{var r=/vimeo\.clip_page_config\s*=\s*({.+?});/;if(r.test(e))return JSON.parse(r.exec(e)[1]).player.config_url}})).then((function(e){e?t.getContent(e,"json").then((function(e){var t=e.request.files.progressive.map((function(t){return{title:e.video.title,quality:t.quality,downloadUrl:t.url,ext:a.a.getFileExtension(t.url),type:o.a.VIDEO}}));r(t)})).catch((function(e){n(e)})):n("No config url was found")}))}))}}])&&v(r.prototype,n),i&&v(r,i),t}(i),O=r(110),S=r.n(O);
/*! @name m3u8-parser @version 4.4.0 @license Apache-2.0 */
function A(){return(A=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function x(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var I=function(){function e(){this.listeners={}}var t=e.prototype;return t.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},t.off=function(e,t){if(!this.listeners[e])return!1;var r=this.listeners[e].indexOf(t);return this.listeners[e].splice(r,1),r>-1},t.trigger=function(e){var t,r,n,i=this.listeners[e];if(i)if(2===arguments.length)for(r=i.length,t=0;t<r;++t)i[t].call(this,arguments[1]);else for(n=Array.prototype.slice.call(arguments,1),r=i.length,t=0;t<r;++t)i[t].apply(this,n)},t.dispose=function(){this.listeners={}},t.pipe=function(e){this.on("data",(function(t){e.push(t)}))},e}(),R=function(e){function t(){var t;return(t=e.call(this)||this).buffer="",t}return x(t,e),t.prototype.push=function(e){var t;for(this.buffer+=e,t=this.buffer.indexOf("\n");t>-1;t=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,t)),this.buffer=this.buffer.substring(t+1)},t}(I),P=function(e){for(var t,r=e.split(new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))')),n={},i=r.length;i--;)""!==r[i]&&((t=/([^=]*)=(.*)/.exec(r[i]).slice(1))[0]=t[0].replace(/^\s+|\s+$/g,""),t[1]=t[1].replace(/^\s+|\s+$/g,""),t[1]=t[1].replace(/^['"](.*)['"]$/g,"$1"),n[t[0]]=t[1]);return n},D=function(e){function t(){var t;return(t=e.call(this)||this).customParsers=[],t.tagMappers=[],t}x(t,e);var r=t.prototype;return r.push=function(e){var t,r,n=this;0!==(e=e.trim()).length&&("#"===e[0]?this.tagMappers.reduce((function(t,r){var n=r(e);return n===e?t:t.concat([n])}),[e]).forEach((function(e){for(var i=0;i<n.customParsers.length;i++)if(n.customParsers[i].call(n,e))return;if(0===e.indexOf("#EXT"))if(e=e.replace("\r",""),t=/^#EXTM3U/.exec(e))n.trigger("data",{type:"tag",tagType:"m3u"});else{if(t=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(e))return r={type:"tag",tagType:"inf"},t[1]&&(r.duration=parseFloat(t[1])),t[2]&&(r.title=t[2]),void n.trigger("data",r);if(t=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(e))return r={type:"tag",tagType:"targetduration"},t[1]&&(r.duration=parseInt(t[1],10)),void n.trigger("data",r);if(t=/^#ZEN-TOTAL-DURATION:?([0-9.]*)?/.exec(e))return r={type:"tag",tagType:"totalduration"},t[1]&&(r.duration=parseInt(t[1],10)),void n.trigger("data",r);if(t=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(e))return r={type:"tag",tagType:"version"},t[1]&&(r.version=parseInt(t[1],10)),void n.trigger("data",r);if(t=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(e))return r={type:"tag",tagType:"media-sequence"},t[1]&&(r.number=parseInt(t[1],10)),void n.trigger("data",r);if(t=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(e))return r={type:"tag",tagType:"discontinuity-sequence"},t[1]&&(r.number=parseInt(t[1],10)),void n.trigger("data",r);if(t=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(e))return r={type:"tag",tagType:"playlist-type"},t[1]&&(r.playlistType=t[1]),void n.trigger("data",r);if(t=/^#EXT-X-BYTERANGE:?([0-9.]*)?@?([0-9.]*)?/.exec(e))return r={type:"tag",tagType:"byterange"},t[1]&&(r.length=parseInt(t[1],10)),t[2]&&(r.offset=parseInt(t[2],10)),void n.trigger("data",r);if(t=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(e))return r={type:"tag",tagType:"allow-cache"},t[1]&&(r.allowed=!/NO/.test(t[1])),void n.trigger("data",r);if(t=/^#EXT-X-MAP:?(.*)$/.exec(e)){if(r={type:"tag",tagType:"map"},t[1]){var o=P(t[1]);if(o.URI&&(r.uri=o.URI),o.BYTERANGE){var a=o.BYTERANGE.split("@"),s=a[0],u=a[1];r.byterange={},s&&(r.byterange.length=parseInt(s,10)),u&&(r.byterange.offset=parseInt(u,10))}}n.trigger("data",r)}else if(t=/^#EXT-X-STREAM-INF:?(.*)$/.exec(e)){if(r={type:"tag",tagType:"stream-inf"},t[1]){if(r.attributes=P(t[1]),r.attributes.RESOLUTION){var c=r.attributes.RESOLUTION.split("x"),l={};c[0]&&(l.width=parseInt(c[0],10)),c[1]&&(l.height=parseInt(c[1],10)),r.attributes.RESOLUTION=l}r.attributes.BANDWIDTH&&(r.attributes.BANDWIDTH=parseInt(r.attributes.BANDWIDTH,10)),r.attributes["PROGRAM-ID"]&&(r.attributes["PROGRAM-ID"]=parseInt(r.attributes["PROGRAM-ID"],10))}n.trigger("data",r)}else{if(t=/^#EXT-X-MEDIA:?(.*)$/.exec(e))return r={type:"tag",tagType:"media"},t[1]&&(r.attributes=P(t[1])),void n.trigger("data",r);if(t=/^#EXT-X-ENDLIST/.exec(e))n.trigger("data",{type:"tag",tagType:"endlist"});else if(t=/^#EXT-X-DISCONTINUITY/.exec(e))n.trigger("data",{type:"tag",tagType:"discontinuity"});else{if(t=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(e))return r={type:"tag",tagType:"program-date-time"},t[1]&&(r.dateTimeString=t[1],r.dateTimeObject=new Date(t[1])),void n.trigger("data",r);if(t=/^#EXT-X-KEY:?(.*)$/.exec(e))return r={type:"tag",tagType:"key"},t[1]&&(r.attributes=P(t[1]),r.attributes.IV&&("0x"===r.attributes.IV.substring(0,2).toLowerCase()&&(r.attributes.IV=r.attributes.IV.substring(2)),r.attributes.IV=r.attributes.IV.match(/.{8}/g),r.attributes.IV[0]=parseInt(r.attributes.IV[0],16),r.attributes.IV[1]=parseInt(r.attributes.IV[1],16),r.attributes.IV[2]=parseInt(r.attributes.IV[2],16),r.attributes.IV[3]=parseInt(r.attributes.IV[3],16),r.attributes.IV=new Uint32Array(r.attributes.IV))),void n.trigger("data",r);if(t=/^#EXT-X-START:?(.*)$/.exec(e))return r={type:"tag",tagType:"start"},t[1]&&(r.attributes=P(t[1]),r.attributes["TIME-OFFSET"]=parseFloat(r.attributes["TIME-OFFSET"]),r.attributes.PRECISE=/YES/.test(r.attributes.PRECISE)),void n.trigger("data",r);if(t=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(e))return r={type:"tag",tagType:"cue-out-cont"},t[1]?r.data=t[1]:r.data="",void n.trigger("data",r);if(t=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(e))return r={type:"tag",tagType:"cue-out"},t[1]?r.data=t[1]:r.data="",void n.trigger("data",r);if(t=/^#EXT-X-CUE-IN:?(.*)?$/.exec(e))return r={type:"tag",tagType:"cue-in"},t[1]?r.data=t[1]:r.data="",void n.trigger("data",r);n.trigger("data",{type:"tag",data:e.slice(4)})}}}else n.trigger("data",{type:"comment",text:e.slice(1)})})):this.trigger("data",{type:"uri",uri:e}))},r.addParser=function(e){var t=this,r=e.expression,n=e.customType,i=e.dataParser,o=e.segment;"function"!=typeof i&&(i=function(e){return e}),this.customParsers.push((function(e){if(r.exec(e))return t.trigger("data",{type:"custom",data:i(e),customType:n,segment:o}),!0}))},r.addTagMapper=function(e){var t=e.expression,r=e.map;this.tagMappers.push((function(e){return t.test(e)?r(e):e}))},t}(I);function C(e){for(var t=S.a.atob(e||""),r=new Uint8Array(t.length),n=0;n<t.length;n++)r[n]=t.charCodeAt(n);return r}var L=function(e){function t(){var t;(t=e.call(this)||this).lineStream=new R,t.parseStream=new D,t.lineStream.pipe(t.parseStream);var r,n,i=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t),o=[],a={},s=function(){},u={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},c=0;return t.manifest={allowCache:!0,discontinuityStarts:[],segments:[]},t.parseStream.on("data",(function(e){var t,l;({tag:function(){({"allow-cache":function(){this.manifest.allowCache=e.allowed,"allowed"in e||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var t={};"length"in e&&(a.byterange=t,t.length=e.length,"offset"in e||(this.trigger("info",{message:"defaulting offset to zero"}),e.offset=0)),"offset"in e&&(a.byterange=t,t.offset=e.offset)},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),e.duration>0&&(a.duration=e.duration),0===e.duration&&(a.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=o},key:function(){if(e.attributes)if("NONE"!==e.attributes.METHOD)if(e.attributes.URI){if("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"===e.attributes.KEYFORMAT){return-1===["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(e.attributes.METHOD)?void this.trigger("warn",{message:"invalid key method provided for Widevine"}):("SAMPLE-AES-CENC"===e.attributes.METHOD&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),"data:text/plain;base64,"!==e.attributes.URI.substring(0,23)?void this.trigger("warn",{message:"invalid key URI provided for Widevine"}):e.attributes.KEYID&&"0x"===e.attributes.KEYID.substring(0,2)?void(this.manifest.contentProtection={"com.widevine.alpha":{attributes:{schemeIdUri:e.attributes.KEYFORMAT,keyId:e.attributes.KEYID.substring(2)},pssh:C(e.attributes.URI.split(",")[1])}}):void this.trigger("warn",{message:"invalid key ID provided for Widevine"}))}e.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),n={method:e.attributes.METHOD||"AES-128",uri:e.attributes.URI},void 0!==e.attributes.IV&&(n.iv=e.attributes.IV)}else this.trigger("warn",{message:"ignoring key declaration without URI"});else n=null;else this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence":function(){isFinite(e.number)?this.manifest.mediaSequence=e.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+e.number})},"discontinuity-sequence":function(){isFinite(e.number)?(this.manifest.discontinuitySequence=e.number,c=e.number):this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+e.number})},"playlist-type":function(){/VOD|EVENT/.test(e.playlistType)?this.manifest.playlistType=e.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+e.playlist})},map:function(){r={},e.uri&&(r.uri=e.uri),e.byterange&&(r.byterange=e.byterange)},"stream-inf":function(){this.manifest.playlists=o,this.manifest.mediaGroups=this.manifest.mediaGroups||u,e.attributes?(a.attributes||(a.attributes={}),A(a.attributes,e.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media:function(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||u,e.attributes&&e.attributes.TYPE&&e.attributes["GROUP-ID"]&&e.attributes.NAME){var r=this.manifest.mediaGroups[e.attributes.TYPE];r[e.attributes["GROUP-ID"]]=r[e.attributes["GROUP-ID"]]||{},t=r[e.attributes["GROUP-ID"]],(l={default:/yes/i.test(e.attributes.DEFAULT)}).default?l.autoselect=!0:l.autoselect=/yes/i.test(e.attributes.AUTOSELECT),e.attributes.LANGUAGE&&(l.language=e.attributes.LANGUAGE),e.attributes.URI&&(l.uri=e.attributes.URI),e.attributes["INSTREAM-ID"]&&(l.instreamId=e.attributes["INSTREAM-ID"]),e.attributes.CHARACTERISTICS&&(l.characteristics=e.attributes.CHARACTERISTICS),e.attributes.FORCED&&(l.forced=/yes/i.test(e.attributes.FORCED)),t[e.attributes.NAME]=l}else this.trigger("warn",{message:"ignoring incomplete or missing media group"})},discontinuity:function(){c+=1,a.discontinuity=!0,this.manifest.discontinuityStarts.push(o.length)},"program-date-time":function(){void 0===this.manifest.dateTimeString&&(this.manifest.dateTimeString=e.dateTimeString,this.manifest.dateTimeObject=e.dateTimeObject),a.dateTimeString=e.dateTimeString,a.dateTimeObject=e.dateTimeObject},targetduration:function(){!isFinite(e.duration)||e.duration<0?this.trigger("warn",{message:"ignoring invalid target duration: "+e.duration}):this.manifest.targetDuration=e.duration},totalduration:function(){!isFinite(e.duration)||e.duration<0?this.trigger("warn",{message:"ignoring invalid total duration: "+e.duration}):this.manifest.totalDuration=e.duration},start:function(){e.attributes&&!isNaN(e.attributes["TIME-OFFSET"])?this.manifest.start={timeOffset:e.attributes["TIME-OFFSET"],precise:e.attributes.PRECISE}:this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"})},"cue-out":function(){a.cueOut=e.data},"cue-out-cont":function(){a.cueOutCont=e.data},"cue-in":function(){a.cueIn=e.data}}[e.tagType]||s).call(i)},uri:function(){a.uri=e.uri,o.push(a),this.manifest.targetDuration&&!("duration"in a)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),a.duration=this.manifest.targetDuration),n&&(a.key=n),a.timeline=c,r&&(a.map=r),a={}},comment:function(){},custom:function(){e.segment?(a.custom=a.custom||{},a.custom[e.customType]=e.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[e.customType]=e.data)}})[e.type].call(i)})),t}x(t,e);var r=t.prototype;return r.push=function(e){this.lineStream.push(e)},r.end=function(){this.lineStream.push("\n")},r.addParser=function(e){this.parseStream.addParser(e)},r.addTagMapper=function(e){this.parseStream.addTagMapper(e)},t}(I);function N(e){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function k(e,t,r,n,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,i)}function M(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){k(o,n,i,a,s,"next",e)}function s(e){k(o,n,i,a,s,"throw",e)}a(void 0)}))}}function j(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function U(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function B(e,t){return!t||"object"!==N(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function F(e){return(F=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function q(e,t){return(q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var V=function(e){function t(){return j(this,t),B(this,F(t).apply(this,arguments))}var r,n,i,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&q(e,t)}(t,e),r=t,n=[{key:"getMediaInfo",value:(s=M(regeneratorRuntime.mark((function e(t){var r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){r.getContent("https://www.dailymotion.com/embed/video/".concat(t,"?this_is_dailymotion_download=true'")).then((function(e){var t=e.match(/\s*window.__PLAYER_CONFIG__\s*=\s*({.*?});/);return t&&t[1]?JSON.parse(t[1]):null})).then(function(){var t=M(regeneratorRuntime.mark((function t(n){var i,s,u,c,l,f,d,h,p,m,y,g,b;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=[],s={},t.t0=regeneratorRuntime.keys(n.metadata.qualities);case 3:if((t.t1=t.t0()).done){t.next=43;break}u=t.t1.value,c=0;case 6:if(!(c<n.metadata.qualities[u].length)){t.next=41;break}if((l=n.metadata.qualities[u][c]).url&&"application/vnd.lumberjack.manifest"!==l.type){t.next=10;break}return t.abrupt("return");case 10:if("application/x-mpegURL"!==l.type){t.next=38;break}return t.next=13,r.getContent(l.url);case 13:if(!(f=t.sent)){t.next=38;break}if((d=new L).push(f),d.end(),!d.manifest){t.next=38;break}for(h=!0,p=!1,m=void 0,t.prev=22,y=d.manifest.playlists[Symbol.iterator]();!(h=(g=y.next()).done);h=!0)b=g.value,s[b.attributes.NAME]||(i.push({type:o.a.VIDEO,title:n.metadata.title,quality:b.attributes.NAME+"p",ext:a.a.getFileExtension(b.attributes["PROGRESSIVE-URI"]),downloadUrl:b.attributes["PROGRESSIVE-URI"]}),s[b.attributes.NAME]=!0);t.next=30;break;case 26:t.prev=26,t.t2=t.catch(22),p=!0,m=t.t2;case 30:t.prev=30,t.prev=31,h||null==y.return||y.return();case 33:if(t.prev=33,!p){t.next=36;break}throw m;case 36:return t.finish(33);case 37:return t.finish(30);case 38:c++,t.next=6;break;case 41:t.next=3;break;case 43:e(i);case 44:case"end":return t.stop()}}),t,null,[[22,26,30,38],[31,,33,37]])})));return function(e){return t.apply(this,arguments)}}())})));case 1:case"end":return e.stop()}}),e)}))),function(e){return s.apply(this,arguments)})}],i=[{key:"rules",get:function(){return{name:"Dailymotion",host:"www.dailymotion.com",native:[{player:"#player-body",videoId:function(){return a.a.matchPattern(document.location.href,"/video/([a-z0-9]+)")},isSingleVideoPage:!0}],embedded:[{player:'iframe[src*="dailymotion.com/embed/video/',videoId:function(e){return a.a.matchPattern(e.src,"dailymotion.com/embed/video/([a-z0-9]+)")}}]}}}],n&&U(r.prototype,n),i&&U(r,i),t}(i);function H(e){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function G(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function W(e,t){return!t||"object"!==H(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function $(e){return($=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function X(e,t){return(X=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var z=function(e){function t(){return Y(this,t),W(this,$(t).apply(this,arguments))}var r,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&X(e,t)}(t,e),r=t,i=[{key:"rules",get:function(){return{name:"Instagram",host:"www.instagram.com",native:[{player:"video[playsinline]",selectorParentCount:5,videoId:function(){return a.a.matchPattern(document.location.href,"/p/([0-9a-zA-Z-_]{5,})")}}],embedded:[]}}}],(n=[{key:"getMediaInfo",value:function(e){var t=this;return new Promise((function(r){t.getContent("https://instagram.com/p/".concat(e)).then((function(e){var t=/window\.__additionalDataLoaded\('[a-zA-Z0-9/_-]+',({.+})\)/.exec(e),n=JSON.parse(t[1]),i=[{quality:(n=n.graphql.shortcode_media).dimensions.height+"p",title:a.a.unescapeUnicode(n.owner.full_name+(n.caption?"-"+n.caption:"")),downloadUrl:n.video_url,ext:a.a.getFileExtension(n.video_url),type:o.a.VIDEO}];r(i)}))}))}}])&&G(r.prototype,n),i&&G(r,i),t}(i);function K(e){return(K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Q(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function J(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Z(e,t){return!t||"object"!==K(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ee(e){return(ee=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function te(e,t){return(te=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var re=function(e){function t(){return Q(this,t),Z(this,ee(t).apply(this,arguments))}var r,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&te(e,t)}(t,e),r=t,i=[{key:"rules",get:function(){return{name:"Facebook",host:"www.facebook.com",native:[{player:'div[data-pagelet="TahoeVideo"',videoId:function(){return a.a.matchPattern(document.location.href,"/videos.*/(vb.[0-9]+/)*([0-9]{5,})",2)}},{player:"._6x84",videoAnchor:function(e){return e.querySelector('[class^="l9j0dhe7"]')||e},videoId:function(e){var t=null==e?void 0:e.querySelector('a[href*="videos/"]');return t?a.a.matchPattern(t.href,"/videos/([0-9]+)"):null}},{player:'[data-pagelet="FeedUnit_{n}"]',videoAnchor:function(e){return(null==e?void 0:e.querySelector(".k4urcfbm.l9j0dhe7.datstx6m.a8c37x1j.du4w35lb"))||e},videoId:function(e){var t=e.querySelector('a[href*="videos/"]');return t?a.a.matchPattern(t.href,"/videos/([0-9]+)"):null}}],embedded:[]}}}],(n=[{key:"getMediaInfo",value:function(e){var t=this;return new Promise((function(r){t.getContent("https://www.facebook.com/video/embed?video_id=".concat(e)).then((function(e){var t,n,i,s,u,c=((u={title:/<title[^>]*>(.+)<\/title>/.exec((t=e).replace(/\r?\n|\r/g,""))[1],video_data:/"videoData":\[{(.+?)}\]/g.exec(t)}).video_data&&(u.video_data=[JSON.parse("{"+u.video_data[0]+"}").videoData[0]],u.title=null===(n=u.video_data[0])||void 0===n||null===(i=n.video_url)||void 0===i||null===(s=i.replace("/videos",""))||void 0===s?void 0:s.replaceAll("/","-").slice(1,-1)),u);r(function(e){var t=[],r={sd:480,hd:1080};return e.video_data&&e.video_data.forEach((function(n){Object.keys(r).forEach((function(i){n[i+"_src"]&&t.push({type:o.a.VIDEO,quality:r[i],title:e.title,downloadUrl:n[i+"_src"],ext:a.a.getFileExtension(n[i+"_src"])})}))})),t}(c))}))}))}}])&&J(r.prototype,n),i&&J(r,i),t}(i);function ne(e){return(ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function oe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ae(e,t){return!t||"object"!==ne(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function se(e){return(se=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ue(e,t){return(ue=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ce=function(e){function t(){return ie(this,t),ae(this,se(t).apply(this,arguments))}var r,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ue(e,t)}(t,e),r=t,i=[{key:"rules",get:function(){return{name:"Xvideos",host:"www.xvideos.com",native:[{player:"#html5video",videoId:function(){return a.a.matchPattern(document.location.href,"/video([0-9]+)/")}}],embedded:[]}}}],(n=[{key:"getMediaInfo",value:function(e){var t=this;return new Promise((function(r,n){t.getContent("http://xvideos.com/video".concat(e,"/").concat(Math.random())).then((function(e){var t=[],n=/<title>(.+)<\/title>/.exec(e)[1],i=e.match(/\.setVideoUrl([a-zA-Z0-9]+)\('(.+)'\);/g),s=/flv_url=(.+?)&/.exec(e);for(var u in n=a.a.htmlEntities(n),s&&t.push({title:n,type:"video",downloadUrl:decodeURIComponent(s[1]),ext:"flv"}),i){var c=/\.setVideoUrl([a-zA-Z0-9]+)\('(.+)'\);/.exec(i[u]);t.push({title:n,type:o.a.PORN_VIDEO,quality:c[1],downloadUrl:c[2],ext:a.a.getFileExtension(c[2])})}r(t)}))}))}}])&&oe(r.prototype,n),i&&oe(r,i),t}(i);function le(e){return(le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function de(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function he(e,t){return!t||"object"!==le(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function pe(e){return(pe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function me(e,t){return(me=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ye=function(e){function t(){return fe(this,t),he(this,pe(t).apply(this,arguments))}var r,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&me(e,t)}(t,e),r=t,i=[{key:"rules",get:function(){return{name:"xnxx",host:"www.xnxx.com",native:[{player:"#html5video",videoId:function(){return a.a.matchPattern(document.location.href,"/video-([0-9a-z]+)/")}}],embedded:[]}}}],(n=[{key:"getMediaInfo",value:function(e){var t=this;return new Promise((function(r,n){t.getContent("http://xnxx.com/video-".concat(e,"/").concat(Math.floor(9999999*Math.random()))).then((function(e){var t=[],n=/<title>(.+)<\/title>/.exec(e)[1];e.match(/html5player\.setVideoUrl[a-zA-Z]+\(["'].+?["']\)/g).forEach((function(e){var r=/html5player\.setVideoUrl([a-zA-Z]+)\(["'](.+?)["']\)/.exec(e);t.push({title:n,type:o.a.PORN_VIDEO,quality:r[1],downloadUrl:r[2],ext:a.a.getFileExtension(r[2])})})),r(t)}))}))}}])&&de(r.prototype,n),i&&de(r,i),t}(i);function ge(e){return(ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function be(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ve(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function we(e,t){return!t||"object"!==ge(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ee(e){return(Ee=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _e(e,t){return(_e=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Te=function(e){function t(){return be(this,t),we(this,Ee(t).apply(this,arguments))}var r,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_e(e,t)}(t,e),r=t,i=[{key:"rules",get:function(){return{name:"Xhamster",host:"xhamster.com",native:[{player:"#player-container",videoId:function(){return a.a.matchPattern(document.location.href,"/videos/[a-z0-9-]+\\-([0-9]+)")}}],embedded:[]}}}],(n=[{key:"getMediaInfo",value:function(e){var t=this;return new Promise((function(r,n){t.getContent("http://xhamster.com/movies/".concat(e)).then((function(e){var t=[],n=/\s+window\.initials\s+=\s+(\{.*\:\{.*\:.*\}\}.*);/gm.exec(e);if(n)for(var i in(n=JSON.parse(n[1]).videoModel).sources.mp4)n.sources.mp4.hasOwnProperty(i)&&t.push({title:n.title,type:o.a.PORN_VIDEO,quality:i,downloadUrl:n.sources.mp4[i],ext:a.a.getFileExtension(n.sources.mp4[i])});r(t)}))}))}}])&&ve(r.prototype,n),i&&ve(r,i),t}(i);function Oe(e){return(Oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Se(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ae(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function xe(e,t){return!t||"object"!==Oe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ie(e){return(Ie=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Re(e,t){return(Re=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Pe=function(e){function t(){return Se(this,t),xe(this,Ie(t).apply(this,arguments))}var r,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Re(e,t)}(t,e),r=t,i=[{key:"rules",get:function(){return{name:"Mofosex",host:"www.mofosex.com",native:[{player:"#spankVideo",videoId:function(){return a.a.matchPattern(document.location.href,"/videos/([0-9]+/[a-zA-Z0-9_-]+).html")}}],embedded:[]}}}],(n=[{key:"getMediaInfo",value:function(e){var t=this;return new Promise((function(r,n){t.getContent("http://mofosex.com/videos/".concat(e)).then((function(e){var t=[],n=/flashvars\s*=\s*({.+?});/.exec(e);if(n){var i=(n=JSON.parse(n[1])).video_title;i||(i=/<h1[^>]*>([^<]+)/.exec(html)[1]),Object.keys(n).forEach((function(e){var r=/quality_([0-9]+p)/.exec(e);r&&n[e]&&t.push({title:i,type:o.a.PORN_VIDEO,quality:r[1],downloadUrl:n[e],ext:a.a.getFileExtension(n[e])})}))}r(t)}))}))}}])&&Ae(r.prototype,n),i&&Ae(r,i),t}(i);function De(e){return(De="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ce(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Le(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ne(e,t){return!t||"object"!==De(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ke(e){return(ke=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Me(e,t){return(Me=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var je=function(e){function t(){return Ce(this,t),Ne(this,ke(t).apply(this,arguments))}var r,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Me(e,t)}(t,e),r=t,i=[{key:"rules",get:function(){return{name:"Tube8",host:"www.tube8.com",native:[{player:"#playerContainer",videoId:function(){return a.a.matchPattern(document.location.href,"/.+/([0-9]+)/")}}],embedded:[]}}}],(n=[{key:"getMediaInfo",value:function(e){var t=this;return new Promise((function(r,n){t.getContent("http://tube8.com/".concat(Math.random(),"/").concat(Math.random(),"/").concat(e)).then((function(e){var t=[],n=/flashvars\s*=\s*({.+?});/.exec(e);if(n){var i=(n=JSON.parse(n[1])).video_title;i||(i=/<h1[^>]*>([^<]+)/.exec(html)[1]),Object.keys(n).forEach((function(e){var r=/quality_([0-9]+p)/.exec(e);r&&n[e]&&t.push({title:i,type:o.a.PORN_VIDEO,quality:r[1],downloadUrl:n[e],ext:a.a.getFileExtension(n[e])})}))}r(t)}))}))}}])&&Le(r.prototype,n),i&&Le(r,i),t}(i);function Ue(e){return(Ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Be(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Fe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function qe(e,t){return!t||"object"!==Ue(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ve(e){return(Ve=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function He(e,t){return(He=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ye=function(e){function t(){return Be(this,t),qe(this,Ve(t).apply(this,arguments))}var r,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&He(e,t)}(t,e),r=t,i=[{key:"rules",get:function(){return{name:"Youporn",host:"www.youporn.com",native:[{player:"#videoContainer",videoId:function(){return a.a.matchPattern(document.location.href,"/watch/([0-9]+)/")}}],embedded:[]}}}],(n=[{key:"getMediaInfo",value:function(e){var t=this;return new Promise((function(r,n){t.getContent("http://www.youporn.com/watch/".concat(e,"/").concat(Math.floor(9999999*Math.random()))).then((function(e){var t=[],n=/<title>(.+)<\/title>/.exec(e)[1],i=/mediaDefinition\s*=\s*(\[.+?\]);/.exec(e);i&&(i=JSON.parse(i[1])).forEach((function(e){if(e.videoUrl){var r=new URL(e.videoUrl),i=r.host+r.pathname+r.search;i=r.protocol+"//"+i.replace(/\/\//g,"/"),t.push({title:n,type:o.a.PORN_VIDEO,quality:e.quality,downloadUrl:i,ext:a.a.getFileExtension(i)})}})),r(t)}))}))}}])&&Fe(r.prototype,n),i&&Fe(r,i),t}(i);function Ge(e){return(Ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function We(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Xe(e,t){return!t||"object"!==Ge(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ze(e){return(ze=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ke(e,t){return(Ke=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Qe=function(e){function t(){return We(this,t),Xe(this,ze(t).apply(this,arguments))}var r,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ke(e,t)}(t,e),r=t,i=[{key:"rules",get:function(){return{name:"Metacafe",host:"www.metacafe.com",native:[{player:"#player_place",videoId:function(){return a.a.matchPattern(document.location.href,"/watch/([0-9]{5,})")}}],embedded:[]}}}],(n=[{key:"getMediaInfo",value:function(e){var t=this;return new Promise((function(r){t.getContent("https://www.metacafe.com/watch/".concat(e,"/").concat(Math.round(1e4*Math.random()))).then((function(e){var t=document.createElement("html"),n=document.createDocumentFragment();t.innerHTML=e,n.appendChild(t);var i=n.firstChild.getElementsByTagName("title")[0].textContent||n.firstChild.getElementsByTagName("title")[0].innerText,s=n.getElementById("json_video_data").textContent,u=JSON.parse(s),c=[];if(u.sources){var l=!0,f=!1,d=void 0;try{for(var h,p=u.sources[Symbol.iterator]();!(l=(h=p.next()).done);l=!0){var m=h.value;u.flashvars.video_url.endsWith("/")&&(u.flashvars.video_url=u.flashvars.video_url.substr(0,u.flashvars.video_url.lastIndexOf("/")));var y=u.flashvars.video_url.split("/").pop(),g=m.src.substring(0,m.src.lastIndexOf("/")+1)+y.replace("%07d","0000000");c.push({type:o.a.VIDEO,quality:u.flashvars.video_url_text,title:i.trim(),downloadUrl:g,ext:a.a.getFileExtension(g)})}}catch(e){f=!0,d=e}finally{try{l||null==p.return||p.return()}finally{if(f)throw d}}r(c)}}))}))}}])&&$e(r.prototype,n),i&&$e(r,i),t}(i);function Je(e){return(Je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ze(e,t,r,n,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,i)}function et(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function rt(e,t){return!t||"object"!==Je(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function nt(e){return(nt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function it(e,t){return(it=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ot=function(e){function t(){return et(this,t),rt(this,nt(t).apply(this,arguments))}var r,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&it(e,t)}(t,e),r=t,i=[{key:"rules",get:function(){return{name:"Tiktok",host:"www.tiktok.com",native:[{player:".video-card-big.browse-mode>.video-card-container",videoId:function(){return a.a.matchPattern(document.location.href,"tiktok.com/@[a-zA-Z0-9_.-]+/video/([0-9]+)+?")},generateBlobUrl:!0,blobUrlElement:"video",getBlobUrl:function(e){return a.a.matchPattern(e.src,"(.+)+")},allowOutOfBounds:!1,isSingleVideoPage:!0}],embedded:[]}}}],(n=[{key:"getMediaInfo",value:function(e,t){var r=this;return new Promise(function(){var n,i=(n=regeneratorRuntime.mark((function n(i,s){var u,c,l,f,d;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.getContent("https://www.tiktok.com/@tiktok/video/".concat(e));case 2:u=n.sent,(c=/<script id="__NEXT_DATA__" type="application\/json" crossorigin="anonymous">([^]*)<\/script><script crossorigin="anonymous" nomodule=/.exec(u))&&((l=JSON.parse(c[1])).props.pageProps.itemInfo||s(),f=l.props.pageProps.itemInfo.itemStruct,d=[{type:o.a.VIDEO,quality:f.video.ratio,title:f.desc,downloadUrl:t,ext:"mp4"}],f.music&&d.push({type:o.a.AUDIO,quality:a.a.getFileExtension(f.music.playUrl),title:"".concat(f.music.authorName," - ").concat(f.music.title),downloadUrl:f.music.playUrl,ext:a.a.getFileExtension(f.music.playUrl)}),i(d));case 5:case"end":return n.stop()}}),n)})),function(){var e=this,t=arguments;return new Promise((function(r,i){var o=n.apply(e,t);function a(e){Ze(o,r,i,a,s,"next",e)}function s(e){Ze(o,r,i,a,s,"throw",e)}a(void 0)}))});return function(e,t){return i.apply(this,arguments)}}())}}])&&tt(r.prototype,n),i&&tt(r,i),t}(i);function at(e){return(at="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function st(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ut(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ct(e,t){return!t||"object"!==at(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function lt(e){return(lt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ft(e,t){return(ft=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var dt=function(e){function t(){return st(this,t),ct(this,lt(t).apply(this,arguments))}var r,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ft(e,t)}(t,e),r=t,i=[{key:"rules",get:function(){return{name:"Spankwire",host:"www.spankwire.com",native:[{player:"#vjs_video_3",videoId:function(){return a.a.matchPattern(document.location.href,"/([a-zA-Z0-9\\-\\/]+)\\/")}}],embedded:[]}}}],(n=[{key:"getMediaInfo",value:function(e){var t=this;return new Promise((function(r,n){t.getContent("https://spankwire.com/".concat(e)).then((function(e){var t=[],n=(new DOMParser).parseFromString(e,"text/html").getElementById("js-react-video-utilities");if(n){var i=n.getAttribute("data-desktop-url").match(/(\d{3,4}p)/i),s="mp4";i&&(s=i[1].toLowerCase()),t.push({title:n.getAttribute("data-video-title"),type:o.a.PORN_VIDEO,quality:s,downloadUrl:n.getAttribute("data-desktop-url"),ext:a.a.getFileExtension(n.getAttribute("data-desktop-url"))})}r(t)}))}))}}])&&ut(r.prototype,n),i&&ut(r,i),t}(i);t.a={youtube:y,vimeo:T,dailymotion:V,instagram:z,facebook:re,xvideos:ce,xnxx:ye,xhamster:Te,mofosex:Pe,tube8:je,metacafe:Qe,youporn:Ye,tiktok:ot,spankwire:dt}},function(e,t,r){"use strict";r.r(t);var n=r(41);r.p=n.a.get("/js/")},function(e,t,r){var n=function(e){"use strict";var t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},i=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var i=t&&t.prototype instanceof f?t:f,o=Object.create(i.prototype),a=new T(n||[]);return o._invoke=function(e,t,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return S()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===l)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=c(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(e,r,a),o}function c(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var l={};function f(){}function d(){}function h(){}var p={};p[i]=function(){return this};var m=Object.getPrototypeOf,y=m&&m(m(O([])));y&&y!==t&&r.call(y,i)&&(p=y);var g=h.prototype=f.prototype=Object.create(p);function b(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function v(e,t){var n;this._invoke=function(i,o){function a(){return new t((function(n,a){!function n(i,o,a,s){var u=c(e[i],e,o);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(f).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,s)}))}s(u.arg)}(i,o,n,a)}))}return n=n?n.then(a,a):a()}}function w(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=c(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,l;var i=n.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function O(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:S}}function S(){return{value:void 0,done:!0}}return d.prototype=g.constructor=h,h.constructor=d,d.displayName=s(h,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,s(e,a,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(v.prototype),v.prototype[o]=function(){return this},e.AsyncIterator=v,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new v(u(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(g),s(g,a,"Generator"),g[i]=function(){return this},g.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=O,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,l):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),_(r),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;_(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:O(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},e}(e.exports);try{regeneratorRuntime=n}catch(e){Function("r","regeneratorRuntime = r")(n)}},function(e,t,r){(function(e){var n=void 0!==e&&e||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function o(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new o(i.call(setTimeout,n,arguments),clearTimeout)},t.setInterval=function(){return new o(i.call(setInterval,n,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(n,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},r(127),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,r(15))},function(e,t,r){"use strict";(function(t,n){var i=r(44);e.exports=v;var o,a=r(87);v.ReadableState=b;r(73).EventEmitter;var s=function(e,t){return e.listeners(t).length},u=r(88),c=r(45).Buffer,l=t.Uint8Array||function(){};var f=r(40);f.inherits=r(29);var d=r(130),h=void 0;h=d&&d.debuglog?d.debuglog("stream"):function(){};var p,m=r(131),y=r(89);f.inherits(v,u);var g=["error","close","destroy","pause","resume"];function b(e,t){e=e||{};var n=t instanceof(o=o||r(31));this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var i=e.highWaterMark,a=e.readableHighWaterMark,s=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:n&&(a||0===a)?a:s,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new m,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(p||(p=r(75).StringDecoder),this.decoder=new p(e.encoding),this.encoding=e.encoding)}function v(e){if(o=o||r(31),!(this instanceof v))return new v(e);this._readableState=new b(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),u.call(this)}function w(e,t,r,n,i){var o,a=e._readableState;null===t?(a.reading=!1,function(e,t){if(t.ended)return;if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,T(e)}(e,a)):(i||(o=function(e,t){var r;n=t,c.isBuffer(n)||n instanceof l||"string"==typeof t||void 0===t||e.objectMode||(r=new TypeError("Invalid non-string/buffer chunk"));var n;return r}(a,t)),o?e.emit("error",o):a.objectMode||t&&t.length>0?("string"==typeof t||a.objectMode||Object.getPrototypeOf(t)===c.prototype||(t=function(e){return c.from(e)}(t)),n?a.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):E(e,a,t,!0):a.ended?e.emit("error",new Error("stream.push() after EOF")):(a.reading=!1,a.decoder&&!r?(t=a.decoder.write(t),a.objectMode||0!==t.length?E(e,a,t,!1):S(e,a)):E(e,a,t,!1))):n||(a.reading=!1));return function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(a)}function E(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(e.emit("data",r),e.read(0)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&T(e)),S(e,t)}Object.defineProperty(v.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),v.prototype.destroy=y.destroy,v.prototype._undestroy=y.undestroy,v.prototype._destroy=function(e,t){this.push(null),t(e)},v.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=c.from(e,t),t=""),r=!0),w(this,e,t,!1,r)},v.prototype.unshift=function(e){return w(this,e,null,!0,!1)},v.prototype.isPaused=function(){return!1===this._readableState.flowing},v.prototype.setEncoding=function(e){return p||(p=r(75).StringDecoder),this._readableState.decoder=new p(e),this._readableState.encoding=e,this};function _(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=8388608?e=8388608:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function T(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(h("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?i.nextTick(O,e):O(e))}function O(e){h("emit readable"),e.emit("readable"),R(e)}function S(e,t){t.readingMore||(t.readingMore=!0,i.nextTick(A,e,t))}function A(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(h("maybeReadMore read 0"),e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}function x(e){h("readable nexttick read 0"),e.read(0)}function I(e,t){t.reading||(h("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),R(e),t.flowing&&!t.reading&&e.read(0)}function R(e){var t=e._readableState;for(h("flow",t.flowing);t.flowing&&null!==e.read(););}function P(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):r=function(e,t,r){var n;e<t.head.data.length?(n=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):n=e===t.head.data.length?t.shift():r?function(e,t){var r=t.head,n=1,i=r.data;e-=i.length;for(;r=r.next;){var o=r.data,a=e>o.length?o.length:e;if(a===o.length?i+=o:i+=o.slice(0,e),0===(e-=a)){a===o.length?(++n,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=o.slice(a));break}++n}return t.length-=n,i}(e,t):function(e,t){var r=c.allocUnsafe(e),n=t.head,i=1;n.data.copy(r),e-=n.data.length;for(;n=n.next;){var o=n.data,a=e>o.length?o.length:e;if(o.copy(r,r.length-e,0,a),0===(e-=a)){a===o.length?(++i,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=o.slice(a));break}++i}return t.length-=i,r}(e,t);return n}(e,t.buffer,t.decoder),r);var r}function D(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,i.nextTick(C,t,e))}function C(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function L(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}v.prototype.read=function(e){h("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return h("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?D(this):T(this),null;if(0===(e=_(e,t))&&t.ended)return 0===t.length&&D(this),null;var n,i=t.needReadable;return h("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&h("length less than watermark",i=!0),t.ended||t.reading?h("reading or ended",i=!1):i&&(h("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=_(r,t))),null===(n=e>0?P(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&D(this)),null!==n&&this.emit("data",n),n},v.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},v.prototype.pipe=function(e,t){var r=this,o=this._readableState;switch(o.pipesCount){case 0:o.pipes=e;break;case 1:o.pipes=[o.pipes,e];break;default:o.pipes.push(e)}o.pipesCount+=1,h("pipe count=%d opts=%j",o.pipesCount,t);var u=(!t||!1!==t.end)&&e!==n.stdout&&e!==n.stderr?l:v;function c(t,n){h("onunpipe"),t===r&&n&&!1===n.hasUnpiped&&(n.hasUnpiped=!0,h("cleanup"),e.removeListener("close",g),e.removeListener("finish",b),e.removeListener("drain",f),e.removeListener("error",y),e.removeListener("unpipe",c),r.removeListener("end",l),r.removeListener("end",v),r.removeListener("data",m),d=!0,!o.awaitDrain||e._writableState&&!e._writableState.needDrain||f())}function l(){h("onend"),e.end()}o.endEmitted?i.nextTick(u):r.once("end",u),e.on("unpipe",c);var f=function(e){return function(){var t=e._readableState;h("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&s(e,"data")&&(t.flowing=!0,R(e))}}(r);e.on("drain",f);var d=!1;var p=!1;function m(t){h("ondata"),p=!1,!1!==e.write(t)||p||((1===o.pipesCount&&o.pipes===e||o.pipesCount>1&&-1!==L(o.pipes,e))&&!d&&(h("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,p=!0),r.pause())}function y(t){h("onerror",t),v(),e.removeListener("error",y),0===s(e,"error")&&e.emit("error",t)}function g(){e.removeListener("finish",b),v()}function b(){h("onfinish"),e.removeListener("close",g),v()}function v(){h("unpipe"),r.unpipe(e)}return r.on("data",m),function(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?a(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}(e,"error",y),e.once("close",g),e.once("finish",b),e.emit("pipe",r),o.flowing||(h("pipe resume"),r.resume()),e},v.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r)),this;if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,r);return this}var a=L(t.pipes,e);return-1===a||(t.pipes.splice(a,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r)),this},v.prototype.on=function(e,t){var r=u.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var n=this._readableState;n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&T(this):i.nextTick(x,this))}return r},v.prototype.addListener=v.prototype.on,v.prototype.resume=function(){var e=this._readableState;return e.flowing||(h("resume"),e.flowing=!0,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,i.nextTick(I,e,t))}(this,e)),this},v.prototype.pause=function(){return h("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(h("pause"),this._readableState.flowing=!1,this.emit("pause")),this},v.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;for(var i in e.on("end",(function(){if(h("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(i){(h("wrapped data"),r.decoder&&(i=r.decoder.write(i)),r.objectMode&&null==i)||(r.objectMode||i&&i.length)&&(t.push(i)||(n=!0,e.pause()))})),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var o=0;o<g.length;o++)e.on(g[o],this.emit.bind(this,g[o]));return this._read=function(t){h("wrapped _read",t),n&&(n=!1,e.resume())},this},Object.defineProperty(v.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),v._fromList=P}).call(this,r(15),r(21))},function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},function(e,t,r){e.exports=r(73).EventEmitter},function(e,t,r){"use strict";var n=r(44);function i(e,t){e.emit("error",t)}e.exports={destroy:function(e,t){var r=this,o=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;return o||a?(t?t(e):!e||this._writableState&&this._writableState.errorEmitted||n.nextTick(i,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!t&&e?(n.nextTick(i,r,e),r._writableState&&(r._writableState.errorEmitted=!0)):t&&t(e)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(e,t,r){"use strict";e.exports=a;var n=r(31),i=r(40);function o(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(!n)return this.emit("error",new Error("write callback called multiple times"));r.writechunk=null,r.writecb=null,null!=t&&this.push(t),n(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function a(e){if(!(this instanceof a))return new a(e);n.call(this,e),this._transformState={afterTransform:o.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",s)}function s(){var e=this;"function"==typeof this._flush?this._flush((function(t,r){u(e,t,r)})):u(this,null,null)}function u(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}i.inherits=r(29),i.inherits(a,n),a.prototype.push=function(e,t){return this._transformState.needTransform=!1,n.prototype.push.call(this,e,t)},a.prototype._transform=function(e,t,r){throw new Error("_transform() is not implemented")},a.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},a.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},a.prototype._destroy=function(e,t){var r=this;n.prototype._destroy.call(this,e,(function(e){t(e),r.emit("close")}))}},function(e,t,r){(function(e){!function(t){t.parser=function(e,t){return new o(e,t)},t.SAXParser=o,t.SAXStream=s,t.createStream=function(e,t){return new s(e,t)},t.MAX_BUFFER_LENGTH=65536;var n,i=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function o(e,r){if(!(this instanceof o))return new o(e,r);!function(e){for(var t=0,r=i.length;t<r;t++)e[i[t]]=""}(this),this.q=this.c="",this.bufferCheckPosition=t.MAX_BUFFER_LENGTH,this.opt=r||{},this.opt.lowercase=this.opt.lowercase||this.opt.lowercasetags,this.looseCase=this.opt.lowercase?"toLowerCase":"toUpperCase",this.tags=[],this.closed=this.closedRoot=this.sawRoot=!1,this.tag=this.error=null,this.strict=!!e,this.noscript=!(!e&&!this.opt.noscript),this.state=_.BEGIN,this.strictEntities=this.opt.strictEntities,this.ENTITIES=this.strictEntities?Object.create(t.XML_ENTITIES):Object.create(t.ENTITIES),this.attribList=[],this.opt.xmlns&&(this.ns=Object.create(c)),this.trackPosition=!1!==this.opt.position,this.trackPosition&&(this.position=this.line=this.column=0),O(this,"onready")}t.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(e){function t(){}return t.prototype=e,new t}),Object.keys||(Object.keys=function(e){var t=[];for(var r in e)e.hasOwnProperty(r)&&t.push(r);return t}),o.prototype={end:function(){R(this)},write:function(e){if(this.error)throw this.error;if(this.closed)return I(this,"Cannot write after close. Assign an onready handler.");if(null===e)return R(this);"object"==typeof e&&(e=e.toString());var r=0,n="";for(;n=U(e,r++),this.c=n,n;)switch(this.trackPosition&&(this.position++,"\n"===n?(this.line++,this.column=0):this.column++),this.state){case _.BEGIN:if(this.state=_.BEGIN_WHITESPACE,"\ufeff"===n)continue;j(this,n);continue;case _.BEGIN_WHITESPACE:j(this,n);continue;case _.TEXT:if(this.sawRoot&&!this.closedRoot){for(var o=r-1;n&&"<"!==n&&"&"!==n;)(n=U(e,r++))&&this.trackPosition&&(this.position++,"\n"===n?(this.line++,this.column=0):this.column++);this.textNode+=e.substring(o,r-1)}"<"!==n||this.sawRoot&&this.closedRoot&&!this.strict?(p(n)||this.sawRoot&&!this.closedRoot||P(this,"Text data outside of root node."),"&"===n?this.state=_.TEXT_ENTITY:this.textNode+=n):(this.state=_.OPEN_WAKA,this.startTagPosition=this.position);continue;case _.SCRIPT:"<"===n?this.state=_.SCRIPT_ENDING:this.script+=n;continue;case _.SCRIPT_ENDING:"/"===n?this.state=_.CLOSE_TAG:(this.script+="<"+n,this.state=_.SCRIPT);continue;case _.OPEN_WAKA:if("!"===n)this.state=_.SGML_DECL,this.sgmlDecl="";else if(p(n));else if(g(l,n))this.state=_.OPEN_TAG,this.tagName=n;else if("/"===n)this.state=_.CLOSE_TAG,this.tagName="";else if("?"===n)this.state=_.PROC_INST,this.procInstName=this.procInstBody="";else{if(P(this,"Unencoded <"),this.startTagPosition+1<this.position){var a=this.position-this.startTagPosition;n=new Array(a).join(" ")+n}this.textNode+="<"+n,this.state=_.TEXT}continue;case _.SGML_DECL:"[CDATA["===(this.sgmlDecl+n).toUpperCase()?(S(this,"onopencdata"),this.state=_.CDATA,this.sgmlDecl="",this.cdata=""):this.sgmlDecl+n==="--"?(this.state=_.COMMENT,this.comment="",this.sgmlDecl=""):"DOCTYPE"===(this.sgmlDecl+n).toUpperCase()?(this.state=_.DOCTYPE,(this.doctype||this.sawRoot)&&P(this,"Inappropriately located doctype declaration"),this.doctype="",this.sgmlDecl=""):">"===n?(S(this,"onsgmldeclaration",this.sgmlDecl),this.sgmlDecl="",this.state=_.TEXT):m(n)?(this.state=_.SGML_DECL_QUOTED,this.sgmlDecl+=n):this.sgmlDecl+=n;continue;case _.SGML_DECL_QUOTED:n===this.q&&(this.state=_.SGML_DECL,this.q=""),this.sgmlDecl+=n;continue;case _.DOCTYPE:">"===n?(this.state=_.TEXT,S(this,"ondoctype",this.doctype),this.doctype=!0):(this.doctype+=n,"["===n?this.state=_.DOCTYPE_DTD:m(n)&&(this.state=_.DOCTYPE_QUOTED,this.q=n));continue;case _.DOCTYPE_QUOTED:this.doctype+=n,n===this.q&&(this.q="",this.state=_.DOCTYPE);continue;case _.DOCTYPE_DTD:this.doctype+=n,"]"===n?this.state=_.DOCTYPE:m(n)&&(this.state=_.DOCTYPE_DTD_QUOTED,this.q=n);continue;case _.DOCTYPE_DTD_QUOTED:this.doctype+=n,n===this.q&&(this.state=_.DOCTYPE_DTD,this.q="");continue;case _.COMMENT:"-"===n?this.state=_.COMMENT_ENDING:this.comment+=n;continue;case _.COMMENT_ENDING:"-"===n?(this.state=_.COMMENT_ENDED,this.comment=x(this.opt,this.comment),this.comment&&S(this,"oncomment",this.comment),this.comment=""):(this.comment+="-"+n,this.state=_.COMMENT);continue;case _.COMMENT_ENDED:">"!==n?(P(this,"Malformed comment"),this.comment+="--"+n,this.state=_.COMMENT):this.state=_.TEXT;continue;case _.CDATA:"]"===n?this.state=_.CDATA_ENDING:this.cdata+=n;continue;case _.CDATA_ENDING:"]"===n?this.state=_.CDATA_ENDING_2:(this.cdata+="]"+n,this.state=_.CDATA);continue;case _.CDATA_ENDING_2:">"===n?(this.cdata&&S(this,"oncdata",this.cdata),S(this,"onclosecdata"),this.cdata="",this.state=_.TEXT):"]"===n?this.cdata+="]":(this.cdata+="]]"+n,this.state=_.CDATA);continue;case _.PROC_INST:"?"===n?this.state=_.PROC_INST_ENDING:p(n)?this.state=_.PROC_INST_BODY:this.procInstName+=n;continue;case _.PROC_INST_BODY:if(!this.procInstBody&&p(n))continue;"?"===n?this.state=_.PROC_INST_ENDING:this.procInstBody+=n;continue;case _.PROC_INST_ENDING:">"===n?(S(this,"onprocessinginstruction",{name:this.procInstName,body:this.procInstBody}),this.procInstName=this.procInstBody="",this.state=_.TEXT):(this.procInstBody+="?"+n,this.state=_.PROC_INST_BODY);continue;case _.OPEN_TAG:g(f,n)?this.tagName+=n:(D(this),">"===n?N(this):"/"===n?this.state=_.OPEN_TAG_SLASH:(p(n)||P(this,"Invalid character in tag name"),this.state=_.ATTRIB));continue;case _.OPEN_TAG_SLASH:">"===n?(N(this,!0),k(this)):(P(this,"Forward-slash in opening tag not followed by >"),this.state=_.ATTRIB);continue;case _.ATTRIB:if(p(n))continue;">"===n?N(this):"/"===n?this.state=_.OPEN_TAG_SLASH:g(l,n)?(this.attribName=n,this.attribValue="",this.state=_.ATTRIB_NAME):P(this,"Invalid attribute name");continue;case _.ATTRIB_NAME:"="===n?this.state=_.ATTRIB_VALUE:">"===n?(P(this,"Attribute without value"),this.attribValue=this.attribName,L(this),N(this)):p(n)?this.state=_.ATTRIB_NAME_SAW_WHITE:g(f,n)?this.attribName+=n:P(this,"Invalid attribute name");continue;case _.ATTRIB_NAME_SAW_WHITE:if("="===n)this.state=_.ATTRIB_VALUE;else{if(p(n))continue;P(this,"Attribute without value"),this.tag.attributes[this.attribName]="",this.attribValue="",S(this,"onattribute",{name:this.attribName,value:""}),this.attribName="",">"===n?N(this):g(l,n)?(this.attribName=n,this.state=_.ATTRIB_NAME):(P(this,"Invalid attribute name"),this.state=_.ATTRIB)}continue;case _.ATTRIB_VALUE:if(p(n))continue;m(n)?(this.q=n,this.state=_.ATTRIB_VALUE_QUOTED):(P(this,"Unquoted attribute value"),this.state=_.ATTRIB_VALUE_UNQUOTED,this.attribValue=n);continue;case _.ATTRIB_VALUE_QUOTED:if(n!==this.q){"&"===n?this.state=_.ATTRIB_VALUE_ENTITY_Q:this.attribValue+=n;continue}L(this),this.q="",this.state=_.ATTRIB_VALUE_CLOSED;continue;case _.ATTRIB_VALUE_CLOSED:p(n)?this.state=_.ATTRIB:">"===n?N(this):"/"===n?this.state=_.OPEN_TAG_SLASH:g(l,n)?(P(this,"No whitespace between attributes"),this.attribName=n,this.attribValue="",this.state=_.ATTRIB_NAME):P(this,"Invalid attribute name");continue;case _.ATTRIB_VALUE_UNQUOTED:if(!y(n)){"&"===n?this.state=_.ATTRIB_VALUE_ENTITY_U:this.attribValue+=n;continue}L(this),">"===n?N(this):this.state=_.ATTRIB;continue;case _.CLOSE_TAG:if(this.tagName)">"===n?k(this):g(f,n)?this.tagName+=n:this.script?(this.script+="</"+this.tagName,this.tagName="",this.state=_.SCRIPT):(p(n)||P(this,"Invalid tagname in closing tag"),this.state=_.CLOSE_TAG_SAW_WHITE);else{if(p(n))continue;b(l,n)?this.script?(this.script+="</"+n,this.state=_.SCRIPT):P(this,"Invalid tagname in closing tag."):this.tagName=n}continue;case _.CLOSE_TAG_SAW_WHITE:if(p(n))continue;">"===n?k(this):P(this,"Invalid characters in closing tag");continue;case _.TEXT_ENTITY:case _.ATTRIB_VALUE_ENTITY_Q:case _.ATTRIB_VALUE_ENTITY_U:var s,u;switch(this.state){case _.TEXT_ENTITY:s=_.TEXT,u="textNode";break;case _.ATTRIB_VALUE_ENTITY_Q:s=_.ATTRIB_VALUE_QUOTED,u="attribValue";break;case _.ATTRIB_VALUE_ENTITY_U:s=_.ATTRIB_VALUE_UNQUOTED,u="attribValue"}";"===n?(this[u]+=M(this),this.entity="",this.state=s):g(this.entity.length?h:d,n)?this.entity+=n:(P(this,"Invalid character in entity name"),this[u]+="&"+this.entity+n,this.entity="",this.state=s);continue;default:throw new Error(this,"Unknown state: "+this.state)}this.position>=this.bufferCheckPosition&&function(e){for(var r=Math.max(t.MAX_BUFFER_LENGTH,10),n=0,o=0,a=i.length;o<a;o++){var s=e[i[o]].length;if(s>r)switch(i[o]){case"textNode":A(e);break;case"cdata":S(e,"oncdata",e.cdata),e.cdata="";break;case"script":S(e,"onscript",e.script),e.script="";break;default:I(e,"Max buffer length exceeded: "+i[o])}n=Math.max(n,s)}var u=t.MAX_BUFFER_LENGTH-n;e.bufferCheckPosition=u+e.position}(this);return this}
/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){var e;A(e=this),""!==e.cdata&&(S(e,"oncdata",e.cdata),e.cdata=""),""!==e.script&&(S(e,"onscript",e.script),e.script="")}};try{n=r(30).Stream}catch(e){n=function(){}}var a=t.EVENTS.filter((function(e){return"error"!==e&&"end"!==e}));function s(e,t){if(!(this instanceof s))return new s(e,t);n.apply(this),this._parser=new o(e,t),this.writable=!0,this.readable=!0;var r=this;this._parser.onend=function(){r.emit("end")},this._parser.onerror=function(e){r.emit("error",e),r._parser.error=null},this._decoder=null,a.forEach((function(e){Object.defineProperty(r,"on"+e,{get:function(){return r._parser["on"+e]},set:function(t){if(!t)return r.removeAllListeners(e),r._parser["on"+e]=t,t;r.on(e,t)},enumerable:!0,configurable:!1})}))}s.prototype=Object.create(n.prototype,{constructor:{value:s}}),s.prototype.write=function(t){if("function"==typeof e&&"function"==typeof e.isBuffer&&e.isBuffer(t)){if(!this._decoder){var n=r(75).StringDecoder;this._decoder=new n("utf8")}t=this._decoder.write(t)}return this._parser.write(t.toString()),this.emit("data",t),!0},s.prototype.end=function(e){return e&&e.length&&this.write(e),this._parser.end(),!0},s.prototype.on=function(e,t){var r=this;return r._parser["on"+e]||-1===a.indexOf(e)||(r._parser["on"+e]=function(){var t=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);t.splice(0,0,e),r.emit.apply(r,t)}),n.prototype.on.call(r,e,t)};var u="http://www.w3.org/XML/1998/namespace",c={xml:u,xmlns:"http://www.w3.org/2000/xmlns/"},l=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,f=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,d=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,h=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function p(e){return" "===e||"\n"===e||"\r"===e||"\t"===e}function m(e){return'"'===e||"'"===e}function y(e){return">"===e||p(e)}function g(e,t){return e.test(t)}function b(e,t){return!g(e,t)}var v,w,E,_=0;for(var T in t.STATE={BEGIN:_++,BEGIN_WHITESPACE:_++,TEXT:_++,TEXT_ENTITY:_++,OPEN_WAKA:_++,SGML_DECL:_++,SGML_DECL_QUOTED:_++,DOCTYPE:_++,DOCTYPE_QUOTED:_++,DOCTYPE_DTD:_++,DOCTYPE_DTD_QUOTED:_++,COMMENT_STARTING:_++,COMMENT:_++,COMMENT_ENDING:_++,COMMENT_ENDED:_++,CDATA:_++,CDATA_ENDING:_++,CDATA_ENDING_2:_++,PROC_INST:_++,PROC_INST_BODY:_++,PROC_INST_ENDING:_++,OPEN_TAG:_++,OPEN_TAG_SLASH:_++,ATTRIB:_++,ATTRIB_NAME:_++,ATTRIB_NAME_SAW_WHITE:_++,ATTRIB_VALUE:_++,ATTRIB_VALUE_QUOTED:_++,ATTRIB_VALUE_CLOSED:_++,ATTRIB_VALUE_UNQUOTED:_++,ATTRIB_VALUE_ENTITY_Q:_++,ATTRIB_VALUE_ENTITY_U:_++,CLOSE_TAG:_++,CLOSE_TAG_SAW_WHITE:_++,SCRIPT:_++,SCRIPT_ENDING:_++},t.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},t.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(t.ENTITIES).forEach((function(e){var r=t.ENTITIES[e],n="number"==typeof r?String.fromCharCode(r):r;t.ENTITIES[e]=n})),t.STATE)t.STATE[t.STATE[T]]=T;function O(e,t,r){e[t]&&e[t](r)}function S(e,t,r){e.textNode&&A(e),O(e,t,r)}function A(e){e.textNode=x(e.opt,e.textNode),e.textNode&&O(e,"ontext",e.textNode),e.textNode=""}function x(e,t){return e.trim&&(t=t.trim()),e.normalize&&(t=t.replace(/\s+/g," ")),t}function I(e,t){return A(e),e.trackPosition&&(t+="\nLine: "+e.line+"\nColumn: "+e.column+"\nChar: "+e.c),t=new Error(t),e.error=t,O(e,"onerror",t),e}function R(e){return e.sawRoot&&!e.closedRoot&&P(e,"Unclosed root tag"),e.state!==_.BEGIN&&e.state!==_.BEGIN_WHITESPACE&&e.state!==_.TEXT&&I(e,"Unexpected end"),A(e),e.c="",e.closed=!0,O(e,"onend"),o.call(e,e.strict,e.opt),e}function P(e,t){if("object"!=typeof e||!(e instanceof o))throw new Error("bad call to strictFail");e.strict&&I(e,t)}function D(e){e.strict||(e.tagName=e.tagName[e.looseCase]());var t=e.tags[e.tags.length-1]||e,r=e.tag={name:e.tagName,attributes:{}};e.opt.xmlns&&(r.ns=t.ns),e.attribList.length=0,S(e,"onopentagstart",r)}function C(e,t){var r=e.indexOf(":")<0?["",e]:e.split(":"),n=r[0],i=r[1];return t&&"xmlns"===e&&(n="xmlns",i=""),{prefix:n,local:i}}function L(e){if(e.strict||(e.attribName=e.attribName[e.looseCase]()),-1!==e.attribList.indexOf(e.attribName)||e.tag.attributes.hasOwnProperty(e.attribName))e.attribName=e.attribValue="";else{if(e.opt.xmlns){var t=C(e.attribName,!0),r=t.prefix,n=t.local;if("xmlns"===r)if("xml"===n&&e.attribValue!==u)P(e,"xml: prefix must be bound to "+u+"\nActual: "+e.attribValue);else if("xmlns"===n&&"http://www.w3.org/2000/xmlns/"!==e.attribValue)P(e,"xmlns: prefix must be bound to http://www.w3.org/2000/xmlns/\nActual: "+e.attribValue);else{var i=e.tag,o=e.tags[e.tags.length-1]||e;i.ns===o.ns&&(i.ns=Object.create(o.ns)),i.ns[n]=e.attribValue}e.attribList.push([e.attribName,e.attribValue])}else e.tag.attributes[e.attribName]=e.attribValue,S(e,"onattribute",{name:e.attribName,value:e.attribValue});e.attribName=e.attribValue=""}}function N(e,t){if(e.opt.xmlns){var r=e.tag,n=C(e.tagName);r.prefix=n.prefix,r.local=n.local,r.uri=r.ns[n.prefix]||"",r.prefix&&!r.uri&&(P(e,"Unbound namespace prefix: "+JSON.stringify(e.tagName)),r.uri=n.prefix);var i=e.tags[e.tags.length-1]||e;r.ns&&i.ns!==r.ns&&Object.keys(r.ns).forEach((function(t){S(e,"onopennamespace",{prefix:t,uri:r.ns[t]})}));for(var o=0,a=e.attribList.length;o<a;o++){var s=e.attribList[o],u=s[0],c=s[1],l=C(u,!0),f=l.prefix,d=l.local,h=""===f?"":r.ns[f]||"",p={name:u,value:c,prefix:f,local:d,uri:h};f&&"xmlns"!==f&&!h&&(P(e,"Unbound namespace prefix: "+JSON.stringify(f)),p.uri=f),e.tag.attributes[u]=p,S(e,"onattribute",p)}e.attribList.length=0}e.tag.isSelfClosing=!!t,e.sawRoot=!0,e.tags.push(e.tag),S(e,"onopentag",e.tag),t||(e.noscript||"script"!==e.tagName.toLowerCase()?e.state=_.TEXT:e.state=_.SCRIPT,e.tag=null,e.tagName=""),e.attribName=e.attribValue="",e.attribList.length=0}function k(e){if(!e.tagName)return P(e,"Weird empty close tag."),e.textNode+="</>",void(e.state=_.TEXT);if(e.script){if("script"!==e.tagName)return e.script+="</"+e.tagName+">",e.tagName="",void(e.state=_.SCRIPT);S(e,"onscript",e.script),e.script=""}var t=e.tags.length,r=e.tagName;e.strict||(r=r[e.looseCase]());for(var n=r;t--;){if(e.tags[t].name===n)break;P(e,"Unexpected close tag")}if(t<0)return P(e,"Unmatched closing tag: "+e.tagName),e.textNode+="</"+e.tagName+">",void(e.state=_.TEXT);e.tagName=r;for(var i=e.tags.length;i-- >t;){var o=e.tag=e.tags.pop();e.tagName=e.tag.name,S(e,"onclosetag",e.tagName);var a={};for(var s in o.ns)a[s]=o.ns[s];var u=e.tags[e.tags.length-1]||e;e.opt.xmlns&&o.ns!==u.ns&&Object.keys(o.ns).forEach((function(t){var r=o.ns[t];S(e,"onclosenamespace",{prefix:t,uri:r})}))}0===t&&(e.closedRoot=!0),e.tagName=e.attribValue=e.attribName="",e.attribList.length=0,e.state=_.TEXT}function M(e){var t,r=e.entity,n=r.toLowerCase(),i="";return e.ENTITIES[r]?e.ENTITIES[r]:e.ENTITIES[n]?e.ENTITIES[n]:("#"===(r=n).charAt(0)&&("x"===r.charAt(1)?(r=r.slice(2),i=(t=parseInt(r,16)).toString(16)):(r=r.slice(1),i=(t=parseInt(r,10)).toString(10))),r=r.replace(/^0+/,""),isNaN(t)||i.toLowerCase()!==r?(P(e,"Invalid character entity"),"&"+e.entity+";"):String.fromCodePoint(t))}function j(e,t){"<"===t?(e.state=_.OPEN_WAKA,e.startTagPosition=e.position):p(t)||(P(e,"Non-whitespace before first tag."),e.textNode=t,e.state=_.TEXT)}function U(e,t){var r="";return t<e.length&&(r=e.charAt(t)),r}_=t.STATE,String.fromCodePoint||(v=String.fromCharCode,w=Math.floor,E=function(){var e,t,r=16384,n=[],i=-1,o=arguments.length;if(!o)return"";for(var a="";++i<o;){var s=Number(arguments[i]);if(!isFinite(s)||s<0||s>1114111||w(s)!==s)throw RangeError("Invalid code point: "+s);s<=65535?n.push(s):(e=55296+((s-=65536)>>10),t=s%1024+56320,n.push(e,t)),(i+1===o||n.length>r)&&(a+=v.apply(null,n),n.length=0)}return a},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:E,configurable:!0,writable:!0}):String.fromCodePoint=E)}(t)}).call(this,r(36).Buffer)},function(e,t,r){(function(e){t.fetch=s(e.fetch)&&s(e.ReadableStream),t.writableStream=s(e.WritableStream),t.abortController=s(e.AbortController),t.blobConstructor=!1;try{new Blob([new ArrayBuffer(1)]),t.blobConstructor=!0}catch(e){}var r;function n(){if(void 0!==r)return r;if(e.XMLHttpRequest){r=new e.XMLHttpRequest;try{r.open("GET",e.XDomainRequest?"/":"https://example.com")}catch(e){r=null}}else r=null;return r}function i(e){var t=n();if(!t)return!1;try{return t.responseType=e,t.responseType===e}catch(e){}return!1}var o=void 0!==e.ArrayBuffer,a=o&&s(e.ArrayBuffer.prototype.slice);function s(e){return"function"==typeof e}t.arraybuffer=t.fetch||o&&i("arraybuffer"),t.msstream=!t.fetch&&a&&i("ms-stream"),t.mozchunkedarraybuffer=!t.fetch&&o&&i("moz-chunked-arraybuffer"),t.overrideMimeType=t.fetch||!!n()&&s(n().overrideMimeType),t.vbArray=s(e.VBArray),r=null}).call(this,r(15))},function(e,t,r){(function(e,n,i){var o=r(92),a=r(29),s=r(39),u=t.readyStates={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},c=t.IncomingMessage=function(t,r,a,u){var c=this;if(s.Readable.call(c),c._mode=a,c.headers={},c.rawHeaders=[],c.trailers={},c.rawTrailers=[],c.on("end",(function(){e.nextTick((function(){c.emit("close")}))})),"fetch"===a){if(c._fetchResponse=r,c.url=r.url,c.statusCode=r.status,c.statusMessage=r.statusText,r.headers.forEach((function(e,t){c.headers[t.toLowerCase()]=e,c.rawHeaders.push(t,e)})),o.writableStream){var l=new WritableStream({write:function(e){return new Promise((function(t,r){c._destroyed?r():c.push(new n(e))?t():c._resumeFetch=t}))},close:function(){i.clearTimeout(u),c._destroyed||c.push(null)},abort:function(e){c._destroyed||c.emit("error",e)}});try{return void r.body.pipeTo(l).catch((function(e){i.clearTimeout(u),c._destroyed||c.emit("error",e)}))}catch(e){}}var f=r.body.getReader();!function e(){f.read().then((function(t){if(!c._destroyed){if(t.done)return i.clearTimeout(u),void c.push(null);c.push(new n(t.value)),e()}})).catch((function(e){i.clearTimeout(u),c._destroyed||c.emit("error",e)}))}()}else{if(c._xhr=t,c._pos=0,c.url=t.responseURL,c.statusCode=t.status,c.statusMessage=t.statusText,t.getAllResponseHeaders().split(/\r?\n/).forEach((function(e){var t=e.match(/^([^:]+):\s*(.*)/);if(t){var r=t[1].toLowerCase();"set-cookie"===r?(void 0===c.headers[r]&&(c.headers[r]=[]),c.headers[r].push(t[2])):void 0!==c.headers[r]?c.headers[r]+=", "+t[2]:c.headers[r]=t[2],c.rawHeaders.push(t[1],t[2])}})),c._charset="x-user-defined",!o.overrideMimeType){var d=c.rawHeaders["mime-type"];if(d){var h=d.match(/;\s*charset=([^;])(;|$)/);h&&(c._charset=h[1].toLowerCase())}c._charset||(c._charset="utf-8")}}};a(c,s.Readable),c.prototype._read=function(){var e=this._resumeFetch;e&&(this._resumeFetch=null,e())},c.prototype._onXHRProgress=function(){var e=this,t=e._xhr,r=null;switch(e._mode){case"text:vbarray":if(t.readyState!==u.DONE)break;try{r=new i.VBArray(t.responseBody).toArray()}catch(e){}if(null!==r){e.push(new n(r));break}case"text":try{r=t.responseText}catch(t){e._mode="text:vbarray";break}if(r.length>e._pos){var o=r.substr(e._pos);if("x-user-defined"===e._charset){for(var a=new n(o.length),s=0;s<o.length;s++)a[s]=255&o.charCodeAt(s);e.push(a)}else e.push(o,e._charset);e._pos=r.length}break;case"arraybuffer":if(t.readyState!==u.DONE||!t.response)break;r=t.response,e.push(new n(new Uint8Array(r)));break;case"moz-chunked-arraybuffer":if(r=t.response,t.readyState!==u.LOADING||!r)break;e.push(new n(new Uint8Array(r)));break;case"ms-stream":if(r=t.response,t.readyState!==u.LOADING)break;var c=new i.MSStreamReader;c.onprogress=function(){c.result.byteLength>e._pos&&(e.push(new n(new Uint8Array(c.result.slice(e._pos)))),e._pos=c.result.byteLength)},c.onload=function(){e.push(null)},c.readAsArrayBuffer(r)}e._xhr.readyState===u.DONE&&"ms-stream"!==e._mode&&e.push(null)}}).call(this,r(21),r(36).Buffer,r(15))},function(e,t,r){var n=r(76),i=r(23),o=e.exports;for(var a in n)n.hasOwnProperty(a)&&(o[a]=n[a]);function s(e){if("string"==typeof e&&(e=i.parse(e)),e.protocol||(e.protocol="https:"),"https:"!==e.protocol)throw new Error('Protocol "'+e.protocol+'" not supported. Expected "https:"');return e}o.request=function(e,t){return e=s(e),n.request.call(this,e,t)},o.get=function(e,t){return e=s(e),n.get.call(this,e,t)}},function(e,t,r){const n=r(48),i=r(150),o=["mp4a","mp3","vorbis","aac","opus","flac"],a=["mp4v","avc1","Sorenson H.283","MPEG-4 Visual","VP8","VP9","H.264"],s=e=>e.bitrate||0,u=e=>a.findIndex(t=>e.codecs&&e.codecs.includes(t)),c=e=>e.audioBitrate||0,l=e=>o.findIndex(t=>e.codecs&&e.codecs.includes(t)),f=(e,t,r)=>{let n=0;for(let i of r)if(n=i(t)-i(e),0!==n)break;return n},d=(e,t)=>f(e,t,[e=>parseInt(e.qualityLabel),s,u]),h=(e,t)=>f(e,t,[c,l]);t.sortFormats=(e,t)=>f(e,t,[e=>+!!e.isHLS,e=>+!!e.isDashMPD,e=>+(e.contentLength>0),e=>+(e.hasVideo&&e.hasAudio),e=>+e.hasVideo,e=>parseInt(e.qualityLabel)||0,s,c,u,l]),t.chooseFormat=(e,r)=>{if("object"==typeof r.format){if(!r.format.url)throw Error("Invalid format given, did you use `ytdl.getInfo()`?");return r.format}let n;r.filter&&(e=t.filterFormats(e,r.filter));const i=r.quality||"highest";switch(i){case"highest":n=e[0];break;case"lowest":n=e[e.length-1];break;case"highestaudio":(e=t.filterFormats(e,"audio")).sort(h),n=e[0];break;case"lowestaudio":(e=t.filterFormats(e,"audio")).sort(h),n=e[e.length-1];break;case"highestvideo":(e=t.filterFormats(e,"video")).sort(d),n=e[0];break;case"lowestvideo":(e=t.filterFormats(e,"video")).sort(d),n=e[e.length-1];break;default:n=p(i,e)}if(!n)throw Error("No such format found: "+i);return n};const p=(e,t)=>{let r=e=>t.find(t=>""+t.itag==""+e);return Array.isArray(e)?r(e.find(e=>r(e))):r(e)};t.filterFormats=(e,t)=>{let r;switch(t){case"videoandaudio":case"audioandvideo":r=e=>e.hasVideo&&e.hasAudio;break;case"video":r=e=>e.hasVideo;break;case"videoonly":r=e=>e.hasVideo&&!e.hasAudio;break;case"audio":r=e=>e.hasAudio;break;case"audioonly":r=e=>!e.hasVideo&&e.hasAudio;break;default:if("function"!=typeof t)throw TypeError(`Given filter (${t}) is not supported`);r=t}return e.filter(e=>!!e.url&&r(e))},t.addFormatMeta=e=>((e=Object.assign({},i[e.itag],e)).hasVideo=!!e.qualityLabel,e.hasAudio=!!e.audioBitrate,e.container=e.mimeType?e.mimeType.split(";")[0].split("/")[1]:null,e.codecs=e.mimeType?n.between(e.mimeType,'codecs="','"'):null,e.videoCodec=e.hasVideo&&e.codecs?e.codecs.split(", ")[0]:null,e.audioCodec=e.hasAudio&&e.codecs?e.codecs.split(", ").slice(-1)[0]:null,e.isLive=/\bsource[/=]yt_live_broadcast\b/.test(e.url),e.isHLS=/\/manifest\/hls_(variant|playlist)\//.test(e.url),e.isDashMPD=/\/manifest\/dash\//.test(e.url),e)},function(e,t,r){const n=r(23),i=new Set(["youtube.com","www.youtube.com","m.youtube.com","music.youtube.com","gaming.youtube.com"]),o=/^https?:\/\/(youtu\.be\/|(www\.)?youtube.com\/(embed|v)\/)/;t.getURLVideoID=e=>{const r=n.parse(e,!0);let s=r.query.v;if(o.test(e)&&!s){const e=r.pathname.split("/");s=e[e.length-1]}else if(r.hostname&&!i.has(r.hostname))throw Error("Not a YouTube domain");if(!s)throw Error("No video id found: "+e);if(s=s.substring(0,11),!t.validateID(s))throw TypeError(`Video id (${s}) does not match expected format (${a.toString()})`);return s},t.getVideoID=e=>t.validateID(e)?e:t.getURLVideoID(e);const a=/^[a-zA-Z0-9-_]{11}$/;t.validateID=e=>a.test(e),t.validateURL=e=>{try{return t.getURLVideoID(e),!0}catch(e){return!1}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.durationStr=t.humanStr=void 0;const n=/^\d+$/,i=/^(?:(?:(\d+):)?(\d{1,2}):)?(\d{1,2})(?:\.(\d{3}))?$/,o={ms:1,s:1e3,m:6e4,h:36e5};t.humanStr=e=>{if("number"==typeof e)return e;if(n.test(e))return+e;const t=i.exec(e);if(t)return+(t[1]||0)*o.h+ +(t[2]||0)*o.m+ +t[3]*o.s+ +(t[4]||0);{let t=0;const r=/(-?\d+)(ms|s|m|h)/g;let n;for(;null!=(n=r.exec(e));)t+=+n[1]*o[n[2]];return t}},t.durationStr=e=>{let t=0;const r=/(\d+(?:\.\d+)?)(S|M|H)/g;let n;for(;null!=(n=r.exec(e));)t+=+n[1]*o[n[2].toLowerCase()];return t}},function(e,t,r){const n=r(23),i=r(47),o=r(46),a=r(99);t.cache=new a,t.getTokens=(e,r)=>t.cache.getOrSet(e,async()=>{let n=await i(e,r.requestOptions).text();const o=t.extractActions(n);if(!o||!o.length)throw Error("Could not extract signature deciphering actions");return t.cache.set(e,o),o}),t.decipher=(e,t)=>{t=t.split("");for(let r=0,n=e.length;r<n;r++){let n,i=e[r];switch(i[0]){case"r":t=t.reverse();break;case"w":n=~~i.slice(1),t=s(t,n);break;case"s":n=~~i.slice(1),t=t.slice(n);break;case"p":n=~~i.slice(1),t.splice(0,n)}}return t.join("")};const s=(e,t)=>{const r=e[0];return e[0]=e[t%e.length],e[t]=r,e},u="[a-zA-Z_\\$][a-zA-Z_0-9]*",c="(?:'[^'\\\\]*(:?\\\\[\\s\\S][^'\\\\]*)*'|\"[^\"\\\\]*(:?\\\\[\\s\\S][^\"\\\\]*)*\")",l=`(?:${u}|${c})`,f=`(?:\\.${u}|\\[${c}\\])`,d=":function\\(a\\)\\{(?:return )?a\\.reverse\\(\\)\\}",h=":function\\(a,b\\)\\{return a\\.slice\\(b\\)\\}",p=":function\\(a,b\\)\\{a\\.splice\\(0,b\\)\\}",m=":function\\(a,b\\)\\{var c=a\\[0\\];a\\[0\\]=a\\[b(?:%a\\.length)?\\];a\\[b(?:%a\\.length)?\\]=c(?:;return a)?\\}",y=new RegExp(`var (${u})=\\{((?:(?:${l}${d}|${l}${h}|${l}${p}|${l}${m}),?\\r?\\n?)+)\\};`),g=new RegExp(`function(?: ${u})?\\(a\\)\\{a=a\\.split\\((?:''|"")\\);\\s*((?:(?:a=)?[a-zA-Z_\\$][a-zA-Z_0-9]*${f}\\(a,\\d+\\);)+)return a\\.join\\((?:''|"")\\)\\}`),b=new RegExp(`(?:^|,)(${l})${d}`,"m"),v=new RegExp(`(?:^|,)(${l})${h}`,"m"),w=new RegExp(`(?:^|,)(${l})${p}`,"m"),E=new RegExp(`(?:^|,)(${l})${m}`,"m");t.extractActions=e=>{const t=y.exec(e),r=g.exec(e);if(!t||!r)return null;const n=t[1].replace(/\$/g,"\\$"),i=t[2].replace(/\$/g,"\\$"),o=r[1].replace(/\$/g,"\\$");let a=b.exec(i);const s=a&&a[1].replace(/\$/g,"\\$").replace(/\$|^'|^"|'$|"$/g,"");a=v.exec(i);const u=a&&a[1].replace(/\$/g,"\\$").replace(/\$|^'|^"|'$|"$/g,"");a=w.exec(i);const c=a&&a[1].replace(/\$/g,"\\$").replace(/\$|^'|^"|'$|"$/g,"");a=E.exec(i);const l=a&&a[1].replace(/\$/g,"\\$").replace(/\$|^'|^"|'$|"$/g,""),f=`(${[s,u,c,l].join("|")})`,d=new RegExp(`(?:a=)?${n}(?:\\.${f}|\\['${f}'\\]|\\["${f}"\\])\\(a,(\\d+)\\)`,"g"),h=[];for(;null!==(a=d.exec(o));){switch(a[1]||a[2]||a[3]){case l:h.push("w"+a[4]);break;case s:h.push("r");break;case u:h.push("s"+a[4]);break;case c:h.push("p"+a[4])}}return h},t.setDownloadURL=(e,t)=>{let r;if(!e.url)return;r=e.url;try{r=decodeURIComponent(r)}catch(e){return}const i=n.parse(r,!0);delete i.search;let o=i.query;o.ratebypass="yes",t&&(o[e.sp||"signature"]=t),e.url=n.format(i)},t.decipherFormats=async(e,r,n)=>{let i={},a=await t.getTokens(r,n);return e.forEach(e=>{let r=e.signatureCipher||e.cipher;r&&(Object.assign(e,o.parse(r)),delete e.signatureCipher,delete e.cipher);const n=a&&e.s?t.decipher(a,e.s):null;t.setDownloadURL(e,n),i[e.url]=e}),i}},function(e,t){e.exports=class extends Map{constructor(e=1e3){super(),this.timeout=e}set(e,t){this.has(e)&&clearTimeout(super.get(e).tid),super.set(e,{tid:setTimeout(this.delete.bind(this,e),this.timeout),value:t})}get(e){let t=super.get(e);return t?t.value:null}getOrSet(e,t){if(this.has(e))return this.get(e);{let r=t();return this.set(e,r),r}}delete(e){let t=super.get(e);t&&(clearTimeout(t.tid),super.delete(e))}clear(){for(let e of this.values())clearTimeout(e.tid);super.clear()}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=u(r(101)),i=r(51),o=r(52),a=u(r(102)),s=r(54);function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var f={portName:i.DEFAULT_PORT_NAME,state:{},extensionId:null,serializer:o.noop,deserializer:o.noop,patchStrategy:a.default},d=function(){function e(){var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,n=r.portName,a=void 0===n?f.portName:n,u=r.state,l=void 0===u?f.state:u,d=r.extensionId,h=void 0===d?f.extensionId:d,p=r.serializer,m=void 0===p?f.serializer:p,y=r.deserializer,g=void 0===y?f.deserializer:y,b=r.patchStrategy,v=void 0===b?f.patchStrategy:b;if(c(this,e),!a)throw new Error("portName is required in options");if("function"!=typeof m)throw new Error("serializer must be a function");if("function"!=typeof g)throw new Error("deserializer must be a function");if("function"!=typeof v)throw new Error("patchStrategy must be one of the included patching strategies or a custom patching function");this.portName=a,this.readyResolved=!1,this.readyPromise=new Promise((function(e){return t.readyResolve=e})),this.browserAPI=(0,s.getBrowserAPI)(),this.extensionId=h,this.port=this.browserAPI.runtime.connect(this.extensionId,{name:a}),this.safetyHandler=this.safetyHandler.bind(this),this.safetyMessage=this.browserAPI.runtime.onMessage.addListener(this.safetyHandler),this.serializedPortListener=(0,o.withDeserializer)(g)((function(){var e;return(e=t.port.onMessage).addListener.apply(e,arguments)})),this.serializedMessageSender=(0,o.withSerializer)(m)((function(){var e;return(e=t.browserAPI.runtime).sendMessage.apply(e,arguments)}),1),this.listeners=[],this.state=l,this.patchStrategy=v,this.serializedPortListener((function(e){switch(e.type){case i.STATE_TYPE:t.replaceState(e.payload),t.readyResolved||(t.readyResolved=!0,t.readyResolve());break;case i.PATCH_STATE_TYPE:t.patchState(e.payload)}})),this.dispatch=this.dispatch.bind(this)}var t,r,a;return t=e,(r=[{key:"ready",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null!==e?this.readyPromise.then(e):this.readyPromise}},{key:"subscribe",value:function(e){var t=this;return this.listeners.push(e),function(){t.listeners=t.listeners.filter((function(t){return t!==e}))}}},{key:"patchState",value:function(e){this.state=this.patchStrategy(this.state,e),this.listeners.forEach((function(e){return e()}))}},{key:"replaceState",value:function(e){this.state=e,this.listeners.forEach((function(e){return e()}))}},{key:"getState",value:function(){return this.state}},{key:"replaceReducer",value:function(){}},{key:"dispatch",value:function(e){var t=this;return new Promise((function(r,o){t.serializedMessageSender(t.extensionId,{type:i.DISPATCH_TYPE,portName:t.portName,payload:e},null,(function(e){var t=e.error,i=e.value;if(t){var a=new Error("".concat("\nLooks like there is an error in the background page. You might want to inspect your background page for more details.\n").concat(t));o((0,n.default)(a,t))}else r(i&&i.payload)}))}))}},{key:"safetyHandler",value:function(e){"storeReady"===e.action&&(this.browserAPI.runtime.onMessage.removeListener(this.safetyHandler),this.readyResolved||(this.readyResolved=!0,this.readyResolve()))}}])&&l(t.prototype,r),a&&l(t,a),e}();t.default=d},function(e,t){var r=/^(?:0|[1-9]\d*)$/;function n(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var i=Object.prototype,o=i.hasOwnProperty,a=i.toString,s=i.propertyIsEnumerable,u=Math.max;function c(e,t){var r=p(e)||function(e){return function(e){return function(e){return!!e&&"object"==typeof e}(e)&&m(e)}(e)&&o.call(e,"callee")&&(!s.call(e,"callee")||"[object Arguments]"==a.call(e))}(e)?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],n=r.length,i=!!n;for(var u in e)!t&&!o.call(e,u)||i&&("length"==u||d(u,n))||r.push(u);return r}function l(e,t,r){var n=e[t];o.call(e,t)&&h(n,r)&&(void 0!==r||t in e)||(e[t]=r)}function f(e){if(!y(e))return function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}(e);var t,r,n,a=(r=(t=e)&&t.constructor,n="function"==typeof r&&r.prototype||i,t===n),s=[];for(var u in e)("constructor"!=u||!a&&o.call(e,u))&&s.push(u);return s}function d(e,t){return!!(t=null==t?9007199254740991:t)&&("number"==typeof e||r.test(e))&&e>-1&&e%1==0&&e<t}function h(e,t){return e===t||e!=e&&t!=t}var p=Array.isArray;function m(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}(e.length)&&!function(e){var t=y(e)?a.call(e):"";return"[object Function]"==t||"[object GeneratorFunction]"==t}(e)}function y(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}var g,b,v,w=(g=function(e,t){!function(e,t,r,n){r||(r={});for(var i=-1,o=t.length;++i<o;){var a=t[i],s=n?n(r[a],e[a],a,r,e):void 0;l(r,a,void 0===s?e[a]:s)}}(t,function(e){return m(e)?c(e,!0):f(e)}(t),e)},b=function(e,t){var r=-1,n=t.length,i=n>1?t[n-1]:void 0,o=n>2?t[2]:void 0;for(i=g.length>3&&"function"==typeof i?(n--,i):void 0,o&&function(e,t,r){if(!y(r))return!1;var n=typeof t;return!!("number"==n?m(r)&&d(t,r.length):"string"==n&&t in r)&&h(r[t],e)}(t[0],t[1],o)&&(i=n<3?void 0:i,n=1),e=Object(e);++r<n;){var a=t[r];a&&g(e,a,r,i)}return e},v=u(void 0===v?b.length-1:v,0),function(){for(var e=arguments,t=-1,r=u(e.length-v,0),i=Array(r);++t<r;)i[t]=e[v+t];t=-1;for(var o=Array(v+1);++t<v;)o[t]=e[t];return o[v]=i,n(b,this,o)});e.exports=w},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var r=Object.assign({},e);return t.forEach((function(e){var t=e.change,i=e.key,o=e.value;switch(t){case n.DIFF_STATUS_UPDATED:r[i]=o;break;case n.DIFF_STATUS_REMOVED:Reflect.deleteProperty(r,i)}})),r};var n=r(53)},function(e,t,r){"use strict";function n(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function i(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];var a=function(){throw new Error("Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.")},s={getState:e.getState.bind(e),dispatch:function(){return a.apply(void 0,arguments)}};return r=(r||[]).map((function(e){return e(s)})),a=i.apply(void 0,n(r))(e.dispatch),e.dispatch=a,e}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,i=r(51),o=r(52),a=r(54),s=(n=r(105))&&n.__esModule?n:{default:n};var u={portName:i.DEFAULT_PORT_NAME,dispatchResponder:function(e,t){Promise.resolve(e).then((function(e){t({error:null,value:e})})).catch((function(e){console.error("error dispatching result:",e),t({error:e.message,value:null})}))},serializer:o.noop,deserializer:o.noop,diffStrategy:s.default};t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u,r=t.portName,n=void 0===r?u.portName:r,s=t.dispatchResponder,c=void 0===s?u.dispatchResponder:s,l=t.serializer,f=void 0===l?u.serializer:l,d=t.deserializer,h=void 0===d?u.deserializer:d,p=t.diffStrategy,m=void 0===p?u.diffStrategy:p;if(!n)throw new Error("portName is required in options");if("function"!=typeof f)throw new Error("serializer must be a function");if("function"!=typeof h)throw new Error("deserializer must be a function");if("function"!=typeof m)throw new Error("diffStrategy must be one of the included diffing strategies or a custom diff function");var y=(0,a.getBrowserAPI)(),g=function(t,r,o){if(t.type===i.DISPATCH_TYPE&&t.portName===n){var a=Object.assign({},t.payload,{_sender:r}),s=null;try{s=e.dispatch(a)}catch(e){s=Promise.reject(e.message),console.error(e)}return c(s,o),!0}},b=function(t){if(t.name===n){var r=(0,o.withSerializer)(f)((function(){return t.postMessage.apply(t,arguments)})),a=e.getState(),s=e.subscribe((function(){var t=e.getState(),n=m(a,t);n.length&&(a=t,r({type:i.PATCH_STATE_TYPE,payload:n}))}));t.onDisconnect.addListener(s),r({type:i.STATE_TYPE,payload:a})}},v=(0,o.withDeserializer)(h),w=function(e){return e.type===i.DISPATCH_TYPE&&e.portName===n};v((function(){var e;return(e=y.runtime.onMessage).addListener.apply(e,arguments)}))(g,w),y.runtime.onMessageExternal?v((function(){var e;return(e=y.runtime.onMessageExternal).addListener.apply(e,arguments)}))(g,w):console.warn("runtime.onMessageExternal is not supported"),y.runtime.onConnect.addListener(b),y.runtime.onConnectExternal?y.runtime.onConnectExternal.addListener(b):console.warn("runtime.onConnectExternal is not supported"),y.tabs.query({},(function(e){var t=!0,r=!1,n=void 0;try{for(var i,o=e[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;y.tabs.sendMessage(a.id,{action:"storeReady"},(function(){chrome.runtime.lastError}))}}catch(e){r=!0,n=e}finally{try{t||null==o.return||o.return()}finally{if(r)throw n}}}))}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var r=[];return Object.keys(t).forEach((function(i){e[i]!==t[i]&&r.push({key:i,value:t[i],change:n.DIFF_STATUS_UPDATED})})),Object.keys(e).forEach((function(e){t.hasOwnProperty(e)||r.push({key:e,change:n.DIFF_STATUS_REMOVED})})),r};var n=r(53)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=function(e){return function(){return function(t){return function(r){var n=e[r.type];return t(n?n(r):r)}}}}},,function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},,function(e,t,r){(function(t){var r;r="undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{},e.exports=r}).call(this,r(15))},,,,,,,,function(e,t,r){var n=r(24),i=r(182);e.exports=function(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?i(e):t}},function(e,t){function r(t){return e.exports=r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},r(t)}e.exports=r},function(e,t,r){var n=r(183);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)}},function(e,t,r){"use strict";r.r(t),r.d(t,"MessageContent",(function(){return _}));var n=r(8),i=r.n(n),o=r(35),a=r.n(o),s=(r(16).a.DEBUG?r(!function(){var e=new Error("Cannot find module './bg-store.dev'");throw e.code="MODULE_NOT_FOUND",e}()):r(285)).default(),u=r(6),c=r(32),l=r(3),f=r(9),d=r(12),h=r.n(d),p=r(13),m=r.n(p),y=[c.a],g=function(){function e(){h()(this,e)}return m()(e,null,[{key:"init",value:function(){var e=[];return new Promise((function(t){for(var r=0;r<y.length;r++)e.push(y[r].init());Promise.all(e).then((function(){t(!0)}))}))}}]),e}(),b=r(17),v=r(1),w={},E=function(){var e=a()(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.init();case 2:return e.next=4,b.a.removeSync(v.c.Stats.KEY);case 4:chrome.tabs.onRemoved.addListener((function(e){s.dispatch({type:u.t,tabId:e})})),chrome.tabs.onUpdated.addListener((function(e,t){(t.url||"loading"===t.status)&&(f.a.debug("Clearing tab data"),s.dispatch({type:u.c,tabId:e}),s.dispatch({type:u.w,tabId:e}),_(e,u.u))})),chrome.tabs.onActivated.addListener((function(e){var t=e.tabId;s.dispatch({type:u.w,tabId:t})})),chrome.runtime.onConnect.addListener((function(e){if(e.sender.tab){w[e.sender.tab.id]=e;var t=l.a.getDomain(e.sender.tab.url);c.a.appSettings.disabled.includes(t)?f.a.debug("Domain ".concat(t," is disabled")):_(e.sender.tab.id,u.q)}}));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_=function(e,t){var r=w[e];r&&r.postMessage({action:t,payload:e})};E()},,,,,function(e,t,r){(function(t){const n=r(30).PassThrough,i=r(139),o=r(48),a=r(95),s=r(96),u=r(98),c=r(47),l=r(77),{parseTimestamp:f}=r(77),d=(e,t)=>{const r=h(t);return d.getInfo(e,t).then(e=>{m(r,e,t)},r.emit.bind(r,"error")),r};e.exports=d,d.getBasicInfo=i.getBasicInfo,d.getInfo=i.getInfo,d.chooseFormat=a.chooseFormat,d.filterFormats=a.filterFormats,d.validateID=s.validateID,d.validateURL=s.validateURL,d.getURLVideoID=s.getURLVideoID,d.getVideoID=s.getVideoID,d.cache={sig:u.cache,info:i.cache,watch:i.watchPageCache,cookie:i.cookieCache};const h=e=>{const t=new n({highWaterMark:e&&e.highWaterMark||524288});return t._destroy=()=>{t.destroyed=!0},t},p=(e,t,r)=>{["abort","request","response","error","redirect","retry","reconnect"].forEach(r=>{e.prependListener(r,t.emit.bind(t,r))}),e.pipe(t,{end:r})},m=(e,t,r)=>{r=r||{};let n,i=o.playError(t.player_response,["UNPLAYABLE","LIVE_STREAM_OFFLINE","LOGIN_REQUIRED"]);if(i)return void e.emit("error",i);if(!t.formats.length)return void e.emit("error",Error("This video is unavailable"));try{n=a.chooseFormat(t.formats,r)}catch(t){return void e.emit("error",t)}if(e.emit("info",t,n),e.destroyed)return;let s,u=0;const d=t=>{u+=t.length,e.emit("progress",t.length,u,s)},h=r.dlChunkSize||10485760;let m,y=!0;if(n.isHLS||n.isDashMPD)m=l(n.url,{chunkReadahead:+t.live_chunk_readahead,begin:r.begin||n.isLive&&Date.now(),liveBuffer:r.liveBuffer,requestOptions:r.requestOptions,parser:n.isDashMPD?"dash-mpd":"m3u8",id:n.itag}),m.on("progress",(t,r)=>{e.emit("progress",t.size,t.num,r)}),p(m,e,y);else{const t=Object.assign({},r.requestOptions,{maxReconnects:6,maxRetries:3,backoff:{inc:500,max:1e4}});if(!(0===h||n.hasAudio&&n.hasVideo)){let i=r.range&&r.range.start||0,o=i+h;const a=r.range&&r.range.end;s=r.range?(a?a+1:parseInt(n.contentLength))-i:parseInt(n.contentLength);const u=()=>{!a&&o>=s&&(o=0),a&&o>a&&(o=a),y=!o||o===a,t.headers=Object.assign({},t.headers,{Range:`bytes=${i}-${o||""}`}),m=c(n.url,t),m.on("data",d),m.on("end",()=>{e.destroyed||o&&o!==a&&(i=o+1,o+=h,u())}),p(m,e,y)};u()}else r.begin&&(n.url+="&begin="+f(r.begin)),r.range&&(r.range.start||r.range.end)&&(t.headers=Object.assign({},t.headers,{Range:`bytes=${r.range.start||"0"}-${r.range.end||""}`})),m=c(n.url,t),m.on("response",t=>{e.destroyed||(s=s||parseInt(t.headers["content-length"]))}),m.on("data",d),p(m,e,y)}e._destroy=()=>{e.destroyed=!0,m.destroy(),m.end()}};d.downloadFromInfo=(e,r)=>{const n=h(r);if(!e.full)throw Error("Cannot use `ytdl.downloadFromInfo()` when called with info from `ytdl.getBasicInfo()`");return t(()=>{m(n,e,r)}),n}}).call(this,r(85).setImmediate)},function(e,t,r){(function(e,t){!function(e,r){"use strict";if(!e.setImmediate){var n,i,o,a,s=1,u={},c=!1,l=e.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(e);f=f&&f.setTimeout?f:e,"[object process]"==={}.toString.call(e.process)?n=function(e){t.nextTick((function(){h(e)}))}:function(){if(e.postMessage&&!e.importScripts){var t=!0,r=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=r,t}}()?(o="setImmediate$"+Math.random()+"$",a=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(o)&&h(+t.data.slice(o.length))},e.addEventListener?e.addEventListener("message",a,!1):e.attachEvent("onmessage",a),n=function(t){e.postMessage(o+t,"*")}):e.MessageChannel?((i=new MessageChannel).port1.onmessage=function(e){h(e.data)},n=function(e){i.port2.postMessage(e)}):l&&"onreadystatechange"in l.createElement("script")?function(){var e=l.documentElement;n=function(t){var r=l.createElement("script");r.onreadystatechange=function(){h(t),r.onreadystatechange=null,e.removeChild(r),r=null},e.appendChild(r)}}():n=function(e){setTimeout(h,0,e)},f.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),r=0;r<t.length;r++)t[r]=arguments[r+1];var i={callback:e,args:t};return u[s]=i,n(s),s++},f.clearImmediate=d}function d(e){delete u[e]}function h(e){if(c)setTimeout(h,0,e);else{var t=u[e];if(t){c=!0;try{!function(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(void 0,r)}}(t)}finally{d(e),c=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,r(15),r(21))},function(e,t,r){"use strict";t.byteLength=function(e){var t=c(e),r=t[0],n=t[1];return 3*(r+n)/4-n},t.toByteArray=function(e){for(var t,r=c(e),n=r[0],a=r[1],s=new o(function(e,t,r){return 3*(t+r)/4-r}(0,n,a)),u=0,l=a>0?n-4:n,f=0;f<l;f+=4)t=i[e.charCodeAt(f)]<<18|i[e.charCodeAt(f+1)]<<12|i[e.charCodeAt(f+2)]<<6|i[e.charCodeAt(f+3)],s[u++]=t>>16&255,s[u++]=t>>8&255,s[u++]=255&t;2===a&&(t=i[e.charCodeAt(f)]<<2|i[e.charCodeAt(f+1)]>>4,s[u++]=255&t);1===a&&(t=i[e.charCodeAt(f)]<<10|i[e.charCodeAt(f+1)]<<4|i[e.charCodeAt(f+2)]>>2,s[u++]=t>>8&255,s[u++]=255&t);return s},t.fromByteArray=function(e){for(var t,r=e.length,i=r%3,o=[],a=0,s=r-i;a<s;a+=16383)o.push(l(e,a,a+16383>s?s:a+16383));1===i?(t=e[r-1],o.push(n[t>>2]+n[t<<4&63]+"==")):2===i&&(t=(e[r-2]<<8)+e[r-1],o.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"="));return o.join("")};for(var n=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,u=a.length;s<u;++s)n[s]=a[s],i[a.charCodeAt(s)]=s;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function l(e,t,r){for(var i,o,a=[],s=t;s<r;s+=3)i=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),a.push(n[(o=i)>>18&63]+n[o>>12&63]+n[o>>6&63]+n[63&o]);return a.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,r,n,i){var o,a,s=8*i-n-1,u=(1<<s)-1,c=u>>1,l=-7,f=r?i-1:0,d=r?-1:1,h=e[t+f];for(f+=d,o=h&(1<<-l)-1,h>>=-l,l+=s;l>0;o=256*o+e[t+f],f+=d,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=n;l>0;a=256*a+e[t+f],f+=d,l-=8);if(0===o)o=1-c;else{if(o===u)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,n),o-=c}return(h?-1:1)*a*Math.pow(2,o-n)},t.write=function(e,t,r,n,i,o){var a,s,u,c=8*o-i-1,l=(1<<c)-1,f=l>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=n?0:o-1,p=n?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=l):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),(t+=a+f>=1?d/u:d*Math.pow(2,1-f))*u>=2&&(a++,u/=2),a+f>=l?(s=0,a=l):a+f>=1?(s=(t*u-1)*Math.pow(2,i),a+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;e[r+h]=255&s,h+=p,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;e[r+h]=255&a,h+=p,a/=256,c-=8);e[r+h-p]|=128*m}},function(e,t){},function(e,t,r){"use strict";var n=r(45).Buffer,i=r(132);e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r},e.prototype.concat=function(e){if(0===this.length)return n.alloc(0);if(1===this.length)return this.head.data;for(var t,r,i,o=n.allocUnsafe(e>>>0),a=this.head,s=0;a;)t=a.data,r=o,i=s,t.copy(r,i),s+=a.data.length,a=a.next;return o},e}(),i&&i.inspect&&i.inspect.custom&&(e.exports.prototype[i.inspect.custom]=function(){var e=i.inspect({length:this.length});return this.constructor.name+" "+e})},function(e,t){},function(e,t,r){(function(t){function r(e){try{if(!t.localStorage)return!1}catch(e){return!1}var r=t.localStorage[e];return null!=r&&"true"===String(r).toLowerCase()}e.exports=function(e,t){if(r("noDeprecation"))return e;var n=!1;return function(){if(!n){if(r("throwDeprecation"))throw new Error(t);r("traceDeprecation")?console.trace(t):console.warn(t),n=!0}return e.apply(this,arguments)}}}).call(this,r(15))},function(e,t,r){"use strict";e.exports=o;var n=r(90),i=r(40);function o(e){if(!(this instanceof o))return new o(e);n.call(this,e)}i.inherits=r(29),i.inherits(o,n),o.prototype._transform=function(e,t,r){r(null,e)}},function(e,t,r){e.exports=r(74)},function(e,t,r){e.exports=r(31)},function(e,t,r){e.exports=r(39).Transform},function(e,t,r){e.exports=r(39).PassThrough},function(e,t,r){const n=r(23),i=r(46),o=r(91),a=r(47),s=r(48),u=r(95),c=r(96),l=r(151),f=r(98),d=r(99),h="https://www.youtube.com/watch?v=";t.cache=new d,t.cookieCache=new d(864e5),t.watchPageCache=new d;class p extends Error{}t.getBasicInfo=async(e,t)=>{const r=Object.assign({},a.defaultOptions,t.requestOptions);let n=await v([e,t],r,e=>e.player_response&&(s.playError(e.player_response,["LOGIN_REQUIRED"])||e.player_response.streamingData||m(e.player_response)),[S,A,x]);Object.assign(n,{formats:I(n.player_response),related_videos:l.getRelatedVideos(n)});const i=l.getMedia(n);let o={author:l.getAuthor(n),media:i,likes:l.getLikes(n),dislikes:l.getDislikes(n),age_restricted:/Age-restricted video/.test(i.notice),video_url:h+e};return n.videoDetails=Object.assign({},n.player_response.microformat.playerMicroformatRenderer,n.player_response.videoDetails,o),n};const m=e=>{let t=e.playabilityStatus;return t&&"UNPLAYABLE"===t.status&&/requires payment/.test(t.reason)},y=(e,t)=>`${h+e}&hl=${t.lang||"en"}`,g=(e,r)=>{const n=y(e,r);return t.watchPageCache.getOrSet(n,()=>a(n,r.requestOptions).text())},b=e=>{let t=/<script\s+src="([^"]+)"(?:\s+type="text\/javascript")?\s+name="player_ias\/base"\s*>|"jsUrl":"([^"]+)"/.exec(e);return t?t[1]||t[2]:null},v=async(e,t,r,n)=>{let i;for(let o of n)try{const n=await E(o,e.concat([i]),t);if(n.player_response.videoDetails=w(i&&i.player_response&&i.player_response.videoDetails,n.player_response.videoDetails),n.player_response=w(i&&i.player_response,n.player_response),i=w(i,n),r(i))break}catch(e){if(e instanceof p||o===n[n.length-1])throw e}return i},w=(e,t)=>{if(!e||!t)return e||t;for(let[r,n]of Object.entries(t))null!=n&&(e[r]=n);return e},E=async(e,t,r)=>{let n,i=0;for(;i<=r.maxRetries;)try{n=await e(...t);break}catch(e){if(e instanceof p||e instanceof a.MinigetError&&e.statusCode<500||i>=r.maxRetries)throw e;let t=Math.min(++i*r.backoff.inc,r.backoff.max);await new Promise(e=>setTimeout(e,t))}return n},_=/^[)\]}'\s]+/,T=(e,t)=>{if(!t||"object"==typeof t)return t;try{return t=t.replace(_,""),JSON.parse(t)}catch(t){throw Error(`Error parsing ${e}: ${t.message}`)}},O=(e,t)=>{const r=t&&(t.player&&t.player.args&&t.player.args.player_response||t.player_response||t.playerResponse||t.embedded_player_response);return T(e,r)},S=async(e,r)=>{const n=Object.assign({headers:{}},r.requestOptions);let i=n.headers.Cookie||n.headers.cookie;n.headers=Object.assign({"x-youtube-client-name":"1","x-youtube-client-version":"2.20201117.05.00","x-youtube-identity-token":t.cookieCache.get(i||"browser")||""},n.headers);const o=async(i,o)=>{n.headers["x-youtube-identity-token"]||(n.headers["x-youtube-identity-token"]=await((e,r,n,i)=>t.cookieCache.getOrSet(n,async()=>{let t=(await g(e,r)).match(/(["'])ID_TOKEN\1[:,]\s?"([^"]+)"/);if(!t&&i)throw new p("Cookie header used in request, but unable to find YouTube identity token");return t&&t[2]}))(e,r,i,o))};i&&await o(i,!0);const u=((e,t)=>y(e,t)+"&pbj=1")(e,r);let c,l=await a(u,n).text();if(c=T("watch.json",l),"now"===c.reload&&await o("browser",!1),"now"===c.reload||!Array.isArray(c))throw Error("Unable to retrieve video metadata in watch.json");let f=c.reduce((e,t)=>Object.assign(t,e),{});f.player_response=O("watch.json `player_response`",f),f.html5player=f.player&&f.player.assets&&f.player.assets.js;let d=s.playError(f.player_response,["ERROR"],p),h=(e=>{let t=e.playabilityStatus;return"LOGIN_REQUIRED"===t.status&&t.messages&&t.messages.filter(e=>/This is a private video/.test(e)).length?new p(t.reason||t.messages&&t.messages[0]):null})(f.player_response);if(d||h)throw d||h;return f},A=async(e,t)=>{const r=((e,t)=>`${"https://www.youtube.com/embed/"+e}?hl=${t.lang||"en"}`)(e,t);let n=await a(r,t.requestOptions).text(),i=s.between(n,/(['"])PLAYER_(CONFIG|VARS)\1:\s?/,"<\/script>");if(!i)throw Error("Could not find player config in embed.html");let o=T("embed config",s.cutAfterJSON(i)),u=o.args||o;return u.player_response=O("embed `player_response`",u),u.html5player=b(n),u},x=async(e,t)=>{const r=n.format({protocol:"https",host:"www.youtube.com",pathname:"/get_video_info",query:{video_id:e,eurl:"https://youtube.googleapis.com/v/"+e,ps:"default",gl:"US",hl:t.lang||"en"}});let o=await a(r,t.requestOptions).text(),s=i.parse(o);return s.player_response=O("get_video_info `player_response`",s),s},I=e=>{let t=[];return e.streamingData&&(t=t.concat(e.streamingData.formats||[]).concat(e.streamingData.adaptiveFormats||[])),t};t.getInfo=async(e,r)=>{let i=await t.getBasicInfo(e,r);const o=i.player_response&&i.player_response.streamingData&&(i.player_response.streamingData.dashManifestUrl||i.player_response.streamingData.hlsManifestUrl);let a=[];if(i.formats.length){if(i.html5player=i.html5player||b(await g(e,r)),!i.html5player)throw Error("Unable to find html5player file");const t=n.resolve(h,i.html5player);a.push(f.decipherFormats(i.formats,t,r))}if(o&&i.player_response.streamingData.dashManifestUrl){let e=i.player_response.streamingData.dashManifestUrl;a.push(R(e,r))}if(o&&i.player_response.streamingData.hlsManifestUrl){let e=i.player_response.streamingData.hlsManifestUrl;a.push(P(e,r))}let s=await Promise.all(a);return i.formats=Object.values(Object.assign({},...s)),i.formats=i.formats.map(u.addFormatMeta),i.formats.sort(u.sortFormats),i.full=!0,i};const R=(e,t)=>new Promise((r,i)=>{let s={};const u=o.parser(!1);let c;u.onerror=i,u.onopentag=t=>{if("ADAPTATIONSET"===t.name)c=t.attributes;else if("REPRESENTATION"===t.name){const r=parseInt(t.attributes.ID);isNaN(r)||(s[e]=Object.assign({itag:r,url:e,bitrate:parseInt(t.attributes.BANDWIDTH),mimeType:`${c.MIMETYPE}; codecs="${t.attributes.CODECS}"`},t.attributes.HEIGHT?{width:parseInt(t.attributes.WIDTH),height:parseInt(t.attributes.HEIGHT),fps:parseInt(t.attributes.FRAMERATE)}:{audioSampleRate:t.attributes.AUDIOSAMPLINGRATE}))}},u.onend=()=>{r(s)};const l=a(n.resolve(h,e),t.requestOptions);l.setEncoding("utf8"),l.on("error",i),l.on("data",e=>{u.write(e)}),l.on("end",u.close.bind(u))}),P=async(e,t)=>{e=n.resolve(h,e);let r=await a(e,t.requestOptions).text(),i={};return r.split("\n").filter(e=>/^https?:\/\//.test(e)).forEach(e=>{const t=parseInt(e.match(/\/itag\/(\d+)\//)[1]);i[e]={itag:t,url:e}}),i};for(let e of["getBasicInfo","getInfo"]){const r=t[e];t[e]=(n,i={})=>{s.checkForUpdates();let o=c.getVideoID(n);const a=[e,o,i.lang].join("-");return t.cache.getOrSet(a,()=>r(o,i))}}t.validateID=c.validateID,t.validateURL=c.validateURL,t.getURLVideoID=c.getURLVideoID,t.getVideoID=c.getVideoID},function(e,t,r){(function(e,n){var i;/*! https://mths.be/punycode v1.4.1 by @mathias */!function(o){t&&t.nodeType,e&&e.nodeType;var a="object"==typeof n&&n;a.global!==a&&a.window!==a&&a.self;var s,u=2147483647,c=/^xn--/,l=/[^\x20-\x7E]/,f=/[\x2E\u3002\uFF0E\uFF61]/g,d={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},h=Math.floor,p=String.fromCharCode;function m(e){throw new RangeError(d[e])}function y(e,t){for(var r=e.length,n=[];r--;)n[r]=t(e[r]);return n}function g(e,t){var r=e.split("@"),n="";return r.length>1&&(n=r[0]+"@",e=r[1]),n+y((e=e.replace(f,".")).split("."),t).join(".")}function b(e){for(var t,r,n=[],i=0,o=e.length;i<o;)(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<o?56320==(64512&(r=e.charCodeAt(i++)))?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),i--):n.push(t);return n}function v(e){return y(e,(function(e){var t="";return e>65535&&(t+=p((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=p(e)})).join("")}function w(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function E(e,t,r){var n=0;for(e=r?h(e/700):e>>1,e+=h(e/t);e>455;n+=36)e=h(e/35);return h(n+36*e/(e+38))}function _(e){var t,r,n,i,o,a,s,c,l,f,d,p=[],y=e.length,g=0,b=128,w=72;for((r=e.lastIndexOf("-"))<0&&(r=0),n=0;n<r;++n)e.charCodeAt(n)>=128&&m("not-basic"),p.push(e.charCodeAt(n));for(i=r>0?r+1:0;i<y;){for(o=g,a=1,s=36;i>=y&&m("invalid-input"),((c=(d=e.charCodeAt(i++))-48<10?d-22:d-65<26?d-65:d-97<26?d-97:36)>=36||c>h((u-g)/a))&&m("overflow"),g+=c*a,!(c<(l=s<=w?1:s>=w+26?26:s-w));s+=36)a>h(u/(f=36-l))&&m("overflow"),a*=f;w=E(g-o,t=p.length+1,0==o),h(g/t)>u-b&&m("overflow"),b+=h(g/t),g%=t,p.splice(g++,0,b)}return v(p)}function T(e){var t,r,n,i,o,a,s,c,l,f,d,y,g,v,_,T=[];for(y=(e=b(e)).length,t=128,r=0,o=72,a=0;a<y;++a)(d=e[a])<128&&T.push(p(d));for(n=i=T.length,i&&T.push("-");n<y;){for(s=u,a=0;a<y;++a)(d=e[a])>=t&&d<s&&(s=d);for(s-t>h((u-r)/(g=n+1))&&m("overflow"),r+=(s-t)*g,t=s,a=0;a<y;++a)if((d=e[a])<t&&++r>u&&m("overflow"),d==t){for(c=r,l=36;!(c<(f=l<=o?1:l>=o+26?26:l-o));l+=36)_=c-f,v=36-f,T.push(p(w(f+_%v,0))),c=h(_/v);T.push(p(w(c,0))),o=E(r,g,n==i),r=0,++n}++r,++t}return T.join("")}s={version:"1.4.1",ucs2:{decode:b,encode:v},decode:_,encode:T,toASCII:function(e){return g(e,(function(e){return l.test(e)?"xn--"+T(e):e}))},toUnicode:function(e){return g(e,(function(e){return c.test(e)?_(e.slice(4).toLowerCase()):e}))}},void 0===(i=function(){return s}.call(t,r,t,e))||(e.exports=i)}()}).call(this,r(141)(e),r(15))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,r){"use strict";e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},function(e,t,r){"use strict";function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,r,o){t=t||"&",r=r||"=";var a={};if("string"!=typeof e||0===e.length)return a;var s=/\+/g;e=e.split(t);var u=1e3;o&&"number"==typeof o.maxKeys&&(u=o.maxKeys);var c=e.length;u>0&&c>u&&(c=u);for(var l=0;l<c;++l){var f,d,h,p,m=e[l].replace(s,"%20"),y=m.indexOf(r);y>=0?(f=m.substr(0,y),d=m.substr(y+1)):(f=m,d=""),h=decodeURIComponent(f),p=decodeURIComponent(d),n(a,h)?i(a[h])?a[h].push(p):a[h]=[a[h],p]:a[h]=p}return a};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,r){"use strict";var n=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,r,s){return t=t||"&",r=r||"=",null===e&&(e=void 0),"object"==typeof e?o(a(e),(function(a){var s=encodeURIComponent(n(a))+r;return i(e[a])?o(e[a],(function(e){return s+encodeURIComponent(n(e))})).join(t):s+encodeURIComponent(n(e[a]))})).join(t):s?encodeURIComponent(n(s))+r+encodeURIComponent(n(e)):""};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function o(e,t){if(e.map)return e.map(t);for(var r=[],n=0;n<e.length;n++)r.push(t(e[n],n));return r}var a=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t}},function(e,t,r){(function(t,n,i){var o=r(92),a=r(29),s=r(93),u=r(39),c=r(146),l=s.IncomingMessage,f=s.readyStates;var d=e.exports=function(e){var r,n=this;u.Writable.call(n),n._opts=e,n._body=[],n._headers={},e.auth&&n.setHeader("Authorization","Basic "+new t(e.auth).toString("base64")),Object.keys(e.headers).forEach((function(t){n.setHeader(t,e.headers[t])}));var i=!0;if("disable-fetch"===e.mode||"requestTimeout"in e&&!o.abortController)i=!1,r=!0;else if("prefer-streaming"===e.mode)r=!1;else if("allow-wrong-content-type"===e.mode)r=!o.overrideMimeType;else{if(e.mode&&"default"!==e.mode&&"prefer-fast"!==e.mode)throw new Error("Invalid value for opts.mode");r=!0}n._mode=function(e,t){return o.fetch&&t?"fetch":o.mozchunkedarraybuffer?"moz-chunked-arraybuffer":o.msstream?"ms-stream":o.arraybuffer&&e?"arraybuffer":o.vbArray&&e?"text:vbarray":"text"}(r,i),n._fetchTimer=null,n.on("finish",(function(){n._onFinish()}))};a(d,u.Writable),d.prototype.setHeader=function(e,t){var r=e.toLowerCase();-1===h.indexOf(r)&&(this._headers[r]={name:e,value:t})},d.prototype.getHeader=function(e){var t=this._headers[e.toLowerCase()];return t?t.value:null},d.prototype.removeHeader=function(e){delete this._headers[e.toLowerCase()]},d.prototype._onFinish=function(){var e=this;if(!e._destroyed){var r=e._opts,a=e._headers,s=null;"GET"!==r.method&&"HEAD"!==r.method&&(s=o.arraybuffer?c(t.concat(e._body)):o.blobConstructor?new n.Blob(e._body.map((function(e){return c(e)})),{type:(a["content-type"]||{}).value||""}):t.concat(e._body).toString());var u=[];if(Object.keys(a).forEach((function(e){var t=a[e].name,r=a[e].value;Array.isArray(r)?r.forEach((function(e){u.push([t,e])})):u.push([t,r])})),"fetch"===e._mode){var l=null;if(o.abortController){var d=new AbortController;l=d.signal,e._fetchAbortController=d,"requestTimeout"in r&&0!==r.requestTimeout&&(e._fetchTimer=n.setTimeout((function(){e.emit("requestTimeout"),e._fetchAbortController&&e._fetchAbortController.abort()}),r.requestTimeout))}n.fetch(e._opts.url,{method:e._opts.method,headers:u,body:s||void 0,mode:"cors",credentials:r.withCredentials?"include":"same-origin",signal:l}).then((function(t){e._fetchResponse=t,e._connect()}),(function(t){n.clearTimeout(e._fetchTimer),e._destroyed||e.emit("error",t)}))}else{var h=e._xhr=new n.XMLHttpRequest;try{h.open(e._opts.method,e._opts.url,!0)}catch(t){return void i.nextTick((function(){e.emit("error",t)}))}"responseType"in h&&(h.responseType=e._mode.split(":")[0]),"withCredentials"in h&&(h.withCredentials=!!r.withCredentials),"text"===e._mode&&"overrideMimeType"in h&&h.overrideMimeType("text/plain; charset=x-user-defined"),"requestTimeout"in r&&(h.timeout=r.requestTimeout,h.ontimeout=function(){e.emit("requestTimeout")}),u.forEach((function(e){h.setRequestHeader(e[0],e[1])})),e._response=null,h.onreadystatechange=function(){switch(h.readyState){case f.LOADING:case f.DONE:e._onXHRProgress()}},"moz-chunked-arraybuffer"===e._mode&&(h.onprogress=function(){e._onXHRProgress()}),h.onerror=function(){e._destroyed||e.emit("error",new Error("XHR error"))};try{h.send(s)}catch(t){return void i.nextTick((function(){e.emit("error",t)}))}}}},d.prototype._onXHRProgress=function(){(function(e){try{var t=e.status;return null!==t&&0!==t}catch(e){return!1}})(this._xhr)&&!this._destroyed&&(this._response||this._connect(),this._response._onXHRProgress())},d.prototype._connect=function(){var e=this;e._destroyed||(e._response=new l(e._xhr,e._fetchResponse,e._mode,e._fetchTimer),e._response.on("error",(function(t){e.emit("error",t)})),e.emit("response",e._response))},d.prototype._write=function(e,t,r){this._body.push(e),r()},d.prototype.abort=d.prototype.destroy=function(){this._destroyed=!0,n.clearTimeout(this._fetchTimer),this._response&&(this._response._destroyed=!0),this._xhr?this._xhr.abort():this._fetchAbortController&&this._fetchAbortController.abort()},d.prototype.end=function(e,t,r){"function"==typeof e&&(r=e,e=void 0),u.Writable.prototype.end.call(this,e,t,r)},d.prototype.flushHeaders=function(){},d.prototype.setTimeout=function(){},d.prototype.setNoDelay=function(){},d.prototype.setSocketKeepAlive=function(){};var h=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"]}).call(this,r(36).Buffer,r(15),r(21))},function(e,t,r){var n=r(36).Buffer;e.exports=function(e){if(e instanceof Uint8Array){if(0===e.byteOffset&&e.byteLength===e.buffer.byteLength)return e.buffer;if("function"==typeof e.buffer.slice)return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}if(n.isBuffer(e)){for(var t=new Uint8Array(e.length),r=e.length,i=0;i<r;i++)t[i]=e[i];return t.buffer}throw new Error("Argument must be a Buffer")}},function(e,t){e.exports=function(){for(var e={},t=0;t<arguments.length;t++){var n=arguments[t];for(var i in n)r.call(n,i)&&(e[i]=n[i])}return e};var r=Object.prototype.hasOwnProperty},function(e,t){e.exports={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},function(e){e.exports=JSON.parse('{"_args":[["ytdl-core@4.1.1","/home/tcagent/work/1df821ee96ffacd8"]],"_development":true,"_from":"ytdl-core@4.1.1","_id":"ytdl-core@4.1.1","_inBundle":false,"_integrity":"sha512-T2VIS64sHKdLLqvuTV7S4WyoUCZLdR7HOP/9jX1CyXKYUjKLFP9UpVIFH0ZUvFSmK48eNFErWLOO5dGouwqztQ==","_location":"/ytdl-core","_phantomChildren":{},"_requested":{"type":"version","registry":true,"raw":"ytdl-core@4.1.1","name":"ytdl-core","escapedName":"ytdl-core","rawSpec":"4.1.1","saveSpec":null,"fetchSpec":"4.1.1"},"_requiredBy":["#DEV:/"],"_resolved":"https://registry.npmjs.org/ytdl-core/-/ytdl-core-4.1.1.tgz","_spec":"4.1.1","_where":"/home/tcagent/work/1df821ee96ffacd8","author":{"name":"fent","email":"fentbox@gmail.com","url":"https://github.com/fent"},"bugs":{"url":"https://github.com/fent/node-ytdl-core/issues"},"contributors":[{"name":"Tobias Kutscha","url":"https://github.com/TimeForANinja"},{"name":"Andrew Kelley","url":"https://github.com/andrewrk"},{"name":"Mauricio Allende","url":"https://github.com/mallendeo"},{"name":"Rodrigo Altamirano","url":"https://github.com/raltamirano"},{"name":"Jim Buck","url":"https://github.com/JimmyBoh"}],"dependencies":{"html-entities":"^1.3.1","m3u8stream":"^0.8.3","miniget":"^4.0.0","sax":"^1.1.3"},"description":"Youtube video downloader in pure javascript.","devDependencies":{"@types/node":"^13.1.0","assert-diff":"^3.0.1","dtslint":"^3.6.14","eslint":"^6.8.0","mocha":"^7.0.0","muk-require":"^1.2.0","nock":"^13.0.4","nyc":"^15.0.0","sinon":"^9.0.0","stream-equal":"~1.1.0","typescript":"^3.9.7"},"engines":{"node":">=10"},"files":["lib","typings"],"homepage":"https://github.com/fent/node-ytdl-core#readme","keywords":["youtube","video","download"],"license":"MIT","main":"./lib/index.js","name":"ytdl-core","repository":{"type":"git","url":"git://github.com/fent/node-ytdl-core.git"},"scripts":{"lint":"eslint ./","lint:fix":"eslint --fix ./","lint:typings":"tslint typings/index.d.ts","lint:typings:fix":"tslint --fix typings/index.d.ts","test":"nyc --reporter=lcov --reporter=text-summary npm run test:unit","test:irl":"mocha --timeout 16000 test/irl-test.js","test:unit":"mocha --ignore test/irl-test.js test/*-test.js --timeout 4000"},"types":"./typings/index.d.ts","version":"4.1.1"}')},function(e,t){e.exports={5:{mimeType:'video/flv; codecs="Sorenson H.283, mp3"',qualityLabel:"240p",bitrate:25e4,audioBitrate:64},6:{mimeType:'video/flv; codecs="Sorenson H.263, mp3"',qualityLabel:"270p",bitrate:8e5,audioBitrate:64},13:{mimeType:'video/3gp; codecs="MPEG-4 Visual, aac"',qualityLabel:null,bitrate:5e5,audioBitrate:null},17:{mimeType:'video/3gp; codecs="MPEG-4 Visual, aac"',qualityLabel:"144p",bitrate:5e4,audioBitrate:24},18:{mimeType:'video/mp4; codecs="H.264, aac"',qualityLabel:"360p",bitrate:5e5,audioBitrate:96},22:{mimeType:'video/mp4; codecs="H.264, aac"',qualityLabel:"720p",bitrate:2e6,audioBitrate:192},34:{mimeType:'video/flv; codecs="H.264, aac"',qualityLabel:"360p",bitrate:5e5,audioBitrate:128},35:{mimeType:'video/flv; codecs="H.264, aac"',qualityLabel:"480p",bitrate:8e5,audioBitrate:128},36:{mimeType:'video/3gp; codecs="MPEG-4 Visual, aac"',qualityLabel:"240p",bitrate:175e3,audioBitrate:32},37:{mimeType:'video/mp4; codecs="H.264, aac"',qualityLabel:"1080p",bitrate:3e6,audioBitrate:192},38:{mimeType:'video/mp4; codecs="H.264, aac"',qualityLabel:"3072p",bitrate:35e5,audioBitrate:192},43:{mimeType:'video/webm; codecs="VP8, vorbis"',qualityLabel:"360p",bitrate:5e5,audioBitrate:128},44:{mimeType:'video/webm; codecs="VP8, vorbis"',qualityLabel:"480p",bitrate:1e6,audioBitrate:128},45:{mimeType:'video/webm; codecs="VP8, vorbis"',qualityLabel:"720p",bitrate:2e6,audioBitrate:192},46:{mimeType:'audio/webm; codecs="vp8, vorbis"',qualityLabel:"1080p",bitrate:null,audioBitrate:192},82:{mimeType:'video/mp4; codecs="H.264, aac"',qualityLabel:"360p",bitrate:5e5,audioBitrate:96},83:{mimeType:'video/mp4; codecs="H.264, aac"',qualityLabel:"240p",bitrate:5e5,audioBitrate:96},84:{mimeType:'video/mp4; codecs="H.264, aac"',qualityLabel:"720p",bitrate:2e6,audioBitrate:192},85:{mimeType:'video/mp4; codecs="H.264, aac"',qualityLabel:"1080p",bitrate:3e6,audioBitrate:192},91:{mimeType:'video/ts; codecs="H.264, aac"',qualityLabel:"144p",bitrate:1e5,audioBitrate:48},92:{mimeType:'video/ts; codecs="H.264, aac"',qualityLabel:"240p",bitrate:15e4,audioBitrate:48},93:{mimeType:'video/ts; codecs="H.264, aac"',qualityLabel:"360p",bitrate:5e5,audioBitrate:128},94:{mimeType:'video/ts; codecs="H.264, aac"',qualityLabel:"480p",bitrate:8e5,audioBitrate:128},95:{mimeType:'video/ts; codecs="H.264, aac"',qualityLabel:"720p",bitrate:15e5,audioBitrate:256},96:{mimeType:'video/ts; codecs="H.264, aac"',qualityLabel:"1080p",bitrate:25e5,audioBitrate:256},100:{mimeType:'audio/webm; codecs="VP8, vorbis"',qualityLabel:"360p",bitrate:null,audioBitrate:128},101:{mimeType:'audio/webm; codecs="VP8, vorbis"',qualityLabel:"360p",bitrate:null,audioBitrate:192},102:{mimeType:'audio/webm; codecs="VP8, vorbis"',qualityLabel:"720p",bitrate:null,audioBitrate:192},120:{mimeType:'video/flv; codecs="H.264, aac"',qualityLabel:"720p",bitrate:2e6,audioBitrate:128},127:{mimeType:'audio/ts; codecs="aac"',qualityLabel:null,bitrate:null,audioBitrate:96},128:{mimeType:'audio/ts; codecs="aac"',qualityLabel:null,bitrate:null,audioBitrate:96},132:{mimeType:'video/ts; codecs="H.264, aac"',qualityLabel:"240p",bitrate:15e4,audioBitrate:48},133:{mimeType:'video/mp4; codecs="H.264"',qualityLabel:"240p",bitrate:2e5,audioBitrate:null},134:{mimeType:'video/mp4; codecs="H.264"',qualityLabel:"360p",bitrate:3e5,audioBitrate:null},135:{mimeType:'video/mp4; codecs="H.264"',qualityLabel:"480p",bitrate:5e5,audioBitrate:null},136:{mimeType:'video/mp4; codecs="H.264"',qualityLabel:"720p",bitrate:1e6,audioBitrate:null},137:{mimeType:'video/mp4; codecs="H.264"',qualityLabel:"1080p",bitrate:25e5,audioBitrate:null},138:{mimeType:'video/mp4; codecs="H.264"',qualityLabel:"4320p",bitrate:135e5,audioBitrate:null},139:{mimeType:'audio/mp4; codecs="aac"',qualityLabel:null,bitrate:null,audioBitrate:48},140:{mimeType:'audio/m4a; codecs="aac"',qualityLabel:null,bitrate:null,audioBitrate:128},141:{mimeType:'audio/mp4; codecs="aac"',qualityLabel:null,bitrate:null,audioBitrate:256},151:{mimeType:'video/ts; codecs="H.264, aac"',qualityLabel:"720p",bitrate:5e4,audioBitrate:24},160:{mimeType:'video/mp4; codecs="H.264"',qualityLabel:"144p",bitrate:1e5,audioBitrate:null},171:{mimeType:'audio/webm; codecs="vorbis"',qualityLabel:null,bitrate:null,audioBitrate:128},172:{mimeType:'audio/webm; codecs="vorbis"',qualityLabel:null,bitrate:null,audioBitrate:192},242:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"240p",bitrate:1e5,audioBitrate:null},243:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"360p",bitrate:25e4,audioBitrate:null},244:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"480p",bitrate:5e5,audioBitrate:null},247:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"720p",bitrate:7e5,audioBitrate:null},248:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"1080p",bitrate:15e5,audioBitrate:null},249:{mimeType:'audio/webm; codecs="opus"',qualityLabel:null,bitrate:null,audioBitrate:48},250:{mimeType:'audio/webm; codecs="opus"',qualityLabel:null,bitrate:null,audioBitrate:64},251:{mimeType:'audio/webm; codecs="opus"',qualityLabel:null,bitrate:null,audioBitrate:160},264:{mimeType:'video/mp4; codecs="H.264"',qualityLabel:"1440p",bitrate:4e6,audioBitrate:null},266:{mimeType:'video/mp4; codecs="H.264"',qualityLabel:"2160p",bitrate:125e5,audioBitrate:null},271:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"1440p",bitrate:9e6,audioBitrate:null},272:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"4320p",bitrate:2e7,audioBitrate:null},278:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"144p 30fps",bitrate:8e4,audioBitrate:null},298:{mimeType:'video/mp4; codecs="H.264"',qualityLabel:"720p",bitrate:3e6,audioBitrate:null},299:{mimeType:'video/mp4; codecs="H.264"',qualityLabel:"1080p",bitrate:55e5,audioBitrate:null},300:{mimeType:'video/ts; codecs="H.264, aac"',qualityLabel:"720p",bitrate:1318e3,audioBitrate:48},302:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"720p HFR",bitrate:25e5,audioBitrate:null},303:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"1080p HFR",bitrate:5e6,audioBitrate:null},308:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"1440p HFR",bitrate:1e7,audioBitrate:null},313:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"2160p",bitrate:13e6,audioBitrate:null},315:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"2160p HFR",bitrate:2e7,audioBitrate:null},330:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"144p HDR, HFR",bitrate:8e4,audioBitrate:null},331:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"240p HDR, HFR",bitrate:1e5,audioBitrate:null},332:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"360p HDR, HFR",bitrate:25e4,audioBitrate:null},333:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"240p HDR, HFR",bitrate:5e5,audioBitrate:null},334:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"720p HDR, HFR",bitrate:1e6,audioBitrate:null},335:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"1080p HDR, HFR",bitrate:15e5,audioBitrate:null},336:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"1440p HDR, HFR",bitrate:5e6,audioBitrate:null},337:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"2160p HDR, HFR",bitrate:12e6,audioBitrate:null}}},function(e,t,r){const n=r(48),i=r(46),o=r(23),{parseTimestamp:a}=r(77),s="https://www.youtube.com/watch?v=",u={song:{name:"Music",url:"https://music.youtube.com/"}},c=e=>e?e.runs?e.runs[0].text:e.simpleText:null;t.getMedia=e=>{let t={},r=[];try{r=e.response.contents.twoColumnWatchNextResults.results.results.contents}catch(e){}let n=r.find(e=>e.videoSecondaryInfoRenderer);if(!n)return{};try{let e=(n.metadataRowContainer||n.videoSecondaryInfoRenderer.metadataRowContainer).metadataRowContainerRenderer.rows;for(let r of e)if(r.metadataRowRenderer){let e=c(r.metadataRowRenderer.title).toLowerCase(),n=r.metadataRowRenderer.contents[0];t[e]=c(n);let i=n.runs;i&&i[0].navigationEndpoint&&(t[e+"_url"]=o.resolve(s,i[0].navigationEndpoint.commandMetadata.webCommandMetadata.url)),e in u&&(t.category=u[e].name,t.category_url=u[e].url)}else if(r.richMetadataRowRenderer){let e=r.richMetadataRowRenderer.contents,n=e.filter(e=>"RICH_METADATA_RENDERER_STYLE_BOX_ART"===e.richMetadataRenderer.style);for(let{richMetadataRenderer:e}of n){let r=e;t.year=c(r.subtitle);let n=c(r.callToAction).split(" ")[1];t[n]=c(r.title),t[n+"_url"]=o.resolve(s,r.endpoint.commandMetadata.webCommandMetadata.url),t.thumbnails=r.thumbnail.thumbnails}let i=e.filter(e=>"RICH_METADATA_RENDERER_STYLE_TOPIC"===e.richMetadataRenderer.style);for(let{richMetadataRenderer:e}of i){let r=e;t.category=c(r.title),t.category_url=o.resolve(s,r.endpoint.commandMetadata.webCommandMetadata.url)}}}catch(e){}return t};const l=e=>!(!e||!e.find(e=>"Verified"===e.metadataBadgeRenderer.tooltip));t.getAuthor=e=>{let t,r,i=[],a=!1;try{let u=e.response.contents.twoColumnWatchNextResults.results.results.contents.find(e=>e.videoSecondaryInfoRenderer&&e.videoSecondaryInfoRenderer.owner&&e.videoSecondaryInfoRenderer.owner.videoOwnerRenderer).videoSecondaryInfoRenderer.owner.videoOwnerRenderer;t=u.navigationEndpoint.browseEndpoint.browseId,i=u.thumbnail.thumbnails.map(e=>(e.url=o.resolve(s,e.url),e)),r=n.parseAbbreviatedNumber(c(u.subscriberCountText)),a=l(u.badges)}catch(e){}try{let u=e.player_response.microformat.playerMicroformatRenderer,c=u.channelId||t,l={id:c,name:u.ownerChannelName,user:u.ownerProfileUrl.split("/").slice(-1)[0],channel_url:"https://www.youtube.com/channel/"+c,external_channel_url:"https://www.youtube.com/channel/"+u.externalChannelId,user_url:o.resolve(s,u.ownerProfileUrl),thumbnails:i,verified:a,subscriber_count:r};return n.deprecate(l,"avatar",l.thumbnails[0].url,"author.avatar","author.thumbnails[0].url"),l}catch(e){return{}}},t.getRelatedVideos=e=>{let t=[],r=[];try{t=e.response.webWatchNextResponseExtensionData.relatedVideoArgs.split(",").map(e=>i.parse(e))}catch(e){}try{r=e.response.contents.twoColumnWatchNextResults.secondaryResults.secondaryResults.results}catch(e){return[]}let u=[];for(let e of r||[]){let r=e.compactVideoRenderer;if(r)try{let e=c(r.viewCountText),i=c(r.shortViewCountText),f=t.find(e=>e.id===r.videoId);/^\d/.test(i)||(i=f&&f.short_view_count_text||""),e=(/^\d/.test(e)?e:i).split(" ")[0];let d=r.shortBylineText.runs[0].navigationEndpoint.browseEndpoint,h=d.browseId,p=c(r.shortBylineText),m=(d.canonicalBaseUrl||"").split("/").slice(-1)[0],y={id:r.videoId,title:c(r.title),published:c(r.publishedTimeText),author:{id:h,name:p,user:m,channel_url:"https://www.youtube.com/channel/"+h,user_url:"https://www.youtube.com/user/"+m,thumbnails:r.channelThumbnail.thumbnails.map(e=>(e.url=o.resolve(s,e.url),e)),verified:l(r.ownerBadges),[Symbol.toPrimitive]:()=>(console.warn("`relatedVideo.author` will be removed in a near future release, use `relatedVideo.author.name` instead."),y.author.name)},short_view_count_text:i.split(" ")[0],view_count:e.replace(/,/g,""),length_seconds:r.lengthText?Math.floor(a(c(r.lengthText))/1e3):t&&""+t.length_seconds,thumbnails:r.thumbnail.thumbnails,isLive:!(!r.badges||!r.badges.find(e=>"LIVE NOW"===e.metadataBadgeRenderer.label))};n.deprecate(y,"author_thumbnail",y.author.thumbnails[0].url,"relatedVideo.author_thumbnail","relatedVideo.author.thumbnails[0].url"),n.deprecate(y,"ucid",y.author.id,"relatedVideo.ucid","relatedVideo.author.id"),n.deprecate(y,"video_thumbnail",y.thumbnails[0].url,"relatedVideo.video_thumbnail","relatedVideo.thumbnails[0].url"),u.push(y)}catch(e){}}return u},t.getLikes=e=>{try{let t=e.response.contents.twoColumnWatchNextResults.results.results.contents.find(e=>e.videoPrimaryInfoRenderer).videoPrimaryInfoRenderer.videoActions.menuRenderer.topLevelButtons.find(e=>e.toggleButtonRenderer&&"LIKE"===e.toggleButtonRenderer.defaultIcon.iconType);return parseInt(t.toggleButtonRenderer.defaultText.accessibility.accessibilityData.label.replace(/\D+/g,""))}catch(e){return null}},t.getDislikes=e=>{try{let t=e.response.contents.twoColumnWatchNextResults.results.results.contents.find(e=>e.videoPrimaryInfoRenderer).videoPrimaryInfoRenderer.videoActions.menuRenderer.topLevelButtons.find(e=>e.toggleButtonRenderer&&"DISLIKE"===e.toggleButtonRenderer.defaultIcon.iconType);return parseInt(t.toggleButtonRenderer.defaultText.accessibility.accessibilityData.label.replace(/\D+/g,""))}catch(e){return null}}},function(e,t,r){"use strict";(function(t){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};const i=n(r(76)),o=n(r(94)),a=r(23),s=r(30),u={"http:":i.default,"https:":o.default},c=new Set([301,302,303,307,308]),l=new Set([429,503]),f=["connect","continue","information","socket","timeout","upgrade"],d=["aborted"];function h(e,r={}){var n;const i=Object.assign({},h.defaultOptions,r),o=new s.PassThrough({highWaterMark:i.highWaterMark});let p,m,y;o.destroyed=o.aborted=!1;let g,b,v,w=0,E=0,_=0,T=!1,O=0,S=0;if(null===(n=i.headers)||void 0===n?void 0:n.Range){let e=/bytes=(\d+)-(\d+)?/.exec(""+i.headers.Range);e&&(O=parseInt(e[1],10),v=parseInt(e[2],10))}i.acceptEncoding&&(i.headers=Object.assign({"Accept-Encoding":Object.keys(i.acceptEncoding).join(", ")},i.headers));const A=e=>!!("HEAD"!==r.method&&T&&S!==b&&_++<i.maxReconnects)&&((e=>{y=null,E=0;let t=i.backoff.inc,r=Math.min(t,i.backoff.max);g=setTimeout(R,r),o.emit("reconnect",_,e)})(e),!0),x=e=>{if(o.destroyed)return!1;if(y&&S>0)return A(e.err);if((!e.err||"ENOTFOUND"===e.err.message)&&E++<i.maxRetries){let t=e.retryAfter||Math.min(E*i.backoff.inc,i.backoff.max);return g=setTimeout(R,t),o.emit("retry",E,e.err),!0}return!1},I=(e,t)=>{for(let r of t)e.on(r,o.emit.bind(o,r))},R=()=>{let t,r={};try{let n="string"==typeof e?new a.URL(e):e;r=Object.assign({},{host:n.host,hostname:n.hostname,path:n.pathname+n.search+n.hash,port:n.port,protocol:n.protocol}),n.username&&(r.auth=`${n.username}:${n.password}`),t=u[String(r.protocol)]}catch(e){}if(!t)return void o.emit("error",new h.MinigetError("Invalid URL: "+e));if(Object.assign(r,i),T&&S>0){let e=S+O,t=v||"";r.headers=Object.assign({},r.headers,{Range:`bytes=${e}-${t}`})}if(i.transform){try{r=i.transform(r)}catch(e){return void o.emit("error",e)}if((!r||r.protocol)&&(t=u[String(null==r?void 0:r.protocol)],!t))return void o.emit("error",new h.MinigetError("Invalid URL object from `transform` function"))}const n=e=>{o.destroyed||o.readableEnded||o._readableState.ended||(g(),x({err:e})?p.removeListener("close",s):o.emit("error",e))},s=()=>{g(),x({})},g=()=>{p.removeListener("close",s),null==m||m.removeListener("data",E),null==y||y.removeListener("end",_)},E=e=>{S+=e.length},_=()=>{g(),A()||o.end()};p=t.request(r,t=>{if(!o.destroyed)if(c.has(t.statusCode)){if(w++>=i.maxRedirects)o.emit("error",new h.MinigetError("Too many redirects"));else{if(!t.headers.location){let e=new h.MinigetError("Redirect status code given with no location",t.statusCode);return o.emit("error",e),void g()}e=t.headers.location,setTimeout(R,1e3*parseInt(t.headers["retry-after"]||"0",10)),o.emit("redirect",e)}g()}else if(l.has(t.statusCode)){if(!x({retryAfter:parseInt(t.headers["retry-after"]||"0",10)})){let e=new h.MinigetError("Status code: "+t.statusCode,t.statusCode);o.emit("error",e)}g()}else{if(t.statusCode&&(t.statusCode<200||t.statusCode>=400)){let e=new h.MinigetError("Status code: "+t.statusCode,t.statusCode);return t.statusCode>=500?n(e):o.emit("error",e),void g()}if(y=t,i.acceptEncoding&&t.headers["content-encoding"])for(let e of t.headers["content-encoding"].split(", ").reverse()){let t=i.acceptEncoding[e];t&&(y=y.pipe(t()),y.on("error",n))}b||(b=parseInt(""+t.headers["content-length"],10),T="bytes"===t.headers["accept-ranges"]&&b>0&&i.maxReconnects>0),t.on("data",E),y.on("end",_),y.pipe(o,{end:!T}),m=t,o.emit("response",t),t.on("error",n),I(t,d)}}),p.on("error",n),p.on("close",s),I(p,f),o.destroyed&&D(...P),o.emit("request",p),p.end()};let P;o.abort=e=>{console.warn("`MinigetStream#abort()` has been deprecated in favor of `MinigetStream#destroy()`"),o.aborted=!0,o.emit("abort"),o.destroy(e)};const D=e=>{p.destroy(e),null==y||y.unpipe(o),null==y||y.destroy(),clearTimeout(g)};return o._destroy=(...e)=>{o.destroyed=!0,p?D(...e):P=e},o.text=()=>new Promise((e,t)=>{let r="";o.setEncoding("utf8"),o.on("data",e=>r+=e),o.on("end",()=>e(r)),o.on("error",t)}),t.nextTick(R),o}h.MinigetError=class extends Error{constructor(e,t){super(e),this.statusCode=t}},h.defaultOptions={maxRedirects:10,maxRetries:2,maxReconnects:0,backoff:{inc:100,max:1e4}},e.exports=h}).call(this,r(21))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(30);class i extends n.Writable{constructor(){super(),this._lastLine="",this._seq=0,this._nextItemDuration=null,this._nextItemRange=null,this._lastItemRangeEnd=0,this.on("finish",()=>{this._parseLine(this._lastLine),this.emit("end")})}_parseAttrList(e){let t,r={},n=/([A-Z0-9-]+)=(?:"([^"]*?)"|([^,]*?))/g;for(;null!=(t=n.exec(e));)r[t[1]]=t[2]||t[3];return r}_parseRange(e){if(!e)return null;let t=e.split("@"),r=t[1]?parseInt(t[1]):this._lastItemRangeEnd+1,n={start:r,end:r+parseInt(t[0])-1};return this._lastItemRangeEnd=n.end,n}_parseLine(e){let t=e.match(/^#(EXT[A-Z0-9-]+)(?::(.*))?/);if(t){const e=t[1],r=t[2]||"";switch(e){case"EXT-X-PROGRAM-DATE-TIME":this.emit("starttime",new Date(r).getTime());break;case"EXT-X-MEDIA-SEQUENCE":this._seq=parseInt(r);break;case"EXT-X-MAP":{let e=this._parseAttrList(r);if(!e.URI)return void this.destroy(new Error("`EXT-X-MAP` found without required attribute `URI`"));this.emit("item",{url:e.URI,seq:this._seq,init:!0,duration:0,range:this._parseRange(e.BYTERANGE)});break}case"EXT-X-BYTERANGE":this._nextItemRange=this._parseRange(r);break;case"EXTINF":this._nextItemDuration=Math.round(1e3*parseFloat(r.split(",")[0]));break;case"EXT-X-ENDLIST":this.emit("endlist")}}else!/^#/.test(e)&&e.trim()&&(this.emit("item",{url:e.trim(),seq:this._seq++,duration:this._nextItemDuration,range:this._nextItemRange}),this._nextItemRange=null)}_write(e,t,r){let n=e.toString("utf8").split("\n");this._lastLine&&(n[0]=this._lastLine+n[0]),n.forEach((e,t)=>{this.destroyed||(t<n.length-1?this._parseLine(e):this._lastLine=e)}),r()}}t.default=i},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(30),o=n(r(91)),a=r(97);class s extends i.Writable{constructor(e){let t;super(),this._parser=o.default.createStream(!1,{lowercase:!0}),this._parser.on("error",this.destroy.bind(this));let r,n,i,s,u,c,l,f,d=0,h=0,p=[],m=!1,y=!1;const g=t=>{const r={RepresentationID:e,Number:h,Time:d};return t.replace(/\$(\w+)\$/g,(e,t)=>r[t]+"")};this._parser.on("opentag",o=>{switch(o.name){case"mpd":d=o.attributes.availabilitystarttime?new Date(o.attributes.availabilitystarttime).getTime():0,c="dynamic"!==o.attributes.type;break;case"period":h=0,n=1e3,s=0,i=0,u=[],l=0,f=a.durationStr(o.attributes.start)||0;break;case"segmentlist":h=parseInt(o.attributes.startnumber)||h,n=parseInt(o.attributes.timescale)||n,s=parseInt(o.attributes.duration)||s,i=parseInt(o.attributes.presentationtimeoffset)||i;break;case"segmenttemplate":r=o.attributes,h=parseInt(o.attributes.startnumber)||h,n=parseInt(o.attributes.timescale)||n;break;case"segmenttimeline":case"baseurl":t=o.name;break;case"s":p.push({duration:parseInt(o.attributes.d),repeat:parseInt(o.attributes.r),time:parseInt(o.attributes.t)});break;case"adaptationset":case"representation":l++,null==e&&(e=o.attributes.id),m=o.attributes.id===e+"",m&&(f&&(d+=f),i&&(d-=i/n*1e3),this.emit("starttime",d));break;case"initialization":m&&this.emit("item",{url:u.filter(e=>!!e).join("")+o.attributes.sourceurl,seq:h,init:!0,duration:0});break;case"segmenturl":if(m){y=!0;let e=p.shift(),t=(e&&e.duration||s)/n*1e3;this.emit("item",{url:u.filter(e=>!!e).join("")+o.attributes.media,seq:h++,duration:t}),d+=t}}});const b=()=>{c&&this.emit("endlist"),m?this.emit("end"):this.destroy(Error(`Representation '${e}' not found`))};this._parser.on("closetag",e=>{switch(e){case"adaptationset":case"representation":if(l--,r&&p.length){y=!0,r.initialization&&this.emit("item",{url:u.filter(e=>!!e).join("")+g(r.initialization),seq:h,init:!0,duration:0});for(let{duration:e,repeat:t,time:i}of p){e=e/n*1e3,t=t||1,d=i||d;for(let n=0;n<t;n++)this.emit("item",{url:u.filter(e=>!!e).join("")+g(r.media),seq:h++,duration:e}),d+=e}}y&&(this.emit("endearly"),b(),this._parser.removeAllListeners(),this.removeAllListeners("finish"))}}),this._parser.on("text",e=>{"baseurl"===t&&(u[l]=e,t=null)}),this.on("finish",b)}_write(e,t,r){this._parser.write(e,t),r()}}t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e,t={}){this._worker=e,this._concurrency=t.concurrency||1,this.tasks=[],this.total=0,this.active=0}push(e,t){this.tasks.push({item:e,callback:t}),this.total++,this._next()}_next(){if(this.active>=this._concurrency||!this.tasks.length)return;const{item:e,callback:t}=this.tasks.shift();let r=!1;this.active++,this._worker(e,(e,n)=>{r||(this.active--,r=!0,t&&t(e,n),this._next())})}die(){this.tasks=[]}}},,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},function(e,t){function r(t,n){return e.exports=r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},r(t,n)}e.exports=r},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){r(83),e.exports=r(121)},function(e,t,r){"use strict";var n=r(280),i=/[\/\?<>\\:\*\|"]/g,o=/[\x00-\x1f\x80-\x9f]/g,a=/^\.+$/,s=/^(con|prn|aux|nul|com[0-9]|lpt[0-9])(\..*)?$/i,u=/[\. ]+$/;function c(e,t){if("string"!=typeof e)throw new Error("Input must be string");var r=e.replace(i,t).replace(o,t).replace(a,t).replace(s,t).replace(u,t);return n(r,255)}e.exports=function(e,t){var r=t&&t.replacement||"",n=c(e,r);return""===r?n:c(n,"")}},function(e,t,r){"use strict";var n=r(281),i=r(282);e.exports=n.bind(null,i)},function(e,t,r){"use strict";function n(e){return e>=55296&&e<=56319}function i(e){return e>=56320&&e<=57343}e.exports=function(e,t,r){if("string"!=typeof t)throw new Error("Input must be string");for(var o,a,s=t.length,u=0,c=0;c<s;c+=1){if(o=t.charCodeAt(c),a=t[c],n(o)&&i(t.charCodeAt(c+1))&&(a+=t[c+=1]),(u+=e(a))===r)return t.slice(0,c+1);if(u>r)return t.slice(0,c-a.length+1)}return t}},function(e,t,r){"use strict";function n(e){return e>=55296&&e<=56319}function i(e){return e>=56320&&e<=57343}e.exports=function(e){if("string"!=typeof e)throw new Error("Input must be string");for(var t=e.length,r=0,o=null,a=null,s=0;s<t;s++)i(o=e.charCodeAt(s))?null!=a&&n(a)?r+=1:r+=3:o<=127?r+=1:o>=128&&o<=2047?r+=2:o>=2048&&o<=65535&&(r+=3),a=o;return r}},,,function(e,t,r){"use strict";r.r(t);var n=r(71),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(e){return"@@redux-saga/"+e},s=a("TASK"),u=a("HELPER"),c=a("MATCH"),l=a("CANCEL_PROMISE"),f=a("SAGA_ACTION"),d=a("SELF_CANCELLATION"),h=function(e){return function(){return e}},p=h(!0),m=function(){},y=function(e){return e};function g(e,t,r){if(!t(e))throw D("error","uncaught at check",r),new Error(r)}var b=Object.prototype.hasOwnProperty;function v(e,t){return w.notUndef(e)&&b.call(e,t)}var w={undef:function(e){return null==e},notUndef:function(e){return null!=e},func:function(e){return"function"==typeof e},number:function(e){return"number"==typeof e},string:function(e){return"string"==typeof e},array:Array.isArray,object:function(e){return e&&!w.array(e)&&"object"===(void 0===e?"undefined":o(e))},promise:function(e){return e&&w.func(e.then)},iterator:function(e){return e&&w.func(e.next)&&w.func(e.throw)},iterable:function(e){return e&&w.func(Symbol)?w.func(e[Symbol.iterator]):w.array(e)},task:function(e){return e&&e[s]},observable:function(e){return e&&w.func(e.subscribe)},buffer:function(e){return e&&w.func(e.isEmpty)&&w.func(e.take)&&w.func(e.put)},pattern:function(e){return e&&(w.string(e)||"symbol"===(void 0===e?"undefined":o(e))||w.func(e)||w.array(e))},channel:function(e){return e&&w.func(e.take)&&w.func(e.close)},helper:function(e){return e&&e[u]},stringableFunc:function(e){return w.func(e)&&v(e,"toString")}},E=function(e,t){for(var r in t)v(t,r)&&(e[r]=t[r])};function _(e,t){var r=e.indexOf(t);r>=0&&e.splice(r,1)}var T=function(e){var t=Array(e.length);for(var r in e)v(e,r)&&(t[r]=e[r]);return t};function O(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=i({},e),r=new Promise((function(e,r){t.resolve=e,t.reject=r}));return t.promise=r,t}function S(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=void 0,n=new Promise((function(n){r=setTimeout((function(){return n(t)}),e)}));return n[l]=function(){return clearTimeout(r)},n}function A(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return function(){return++e}}var x=A(),I=function(e){throw e},R=function(e){return{value:e,done:!0}};function P(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:I,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments[3],i={name:r,next:e,throw:t,return:R};return n&&(i[u]=!0),"undefined"!=typeof Symbol&&(i[Symbol.iterator]=function(){return i}),i}function D(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";"undefined"==typeof window?console.log("redux-saga "+e+": "+t+"\n"+(r&&r.stack||r)):console[e](t,r)}function C(e,t){return function(){return e.apply(void 0,arguments)}}var L=function(e,t){return e+" has been deprecated in favor of "+t+", please update your code"},N=function(e){return new Error("\n  redux-saga: Error checking hooks detected an inconsistent state. This is likely a bug\n  in redux-saga code and not yours. Thanks for reporting this in the project's github repo.\n  Error: "+e+"\n")},k=function(e,t){return(e?e+".":"")+"setContext(props): argument "+t+" is not a plain object"},M=function(e){return function(t){return e(Object.defineProperty(t,f,{value:!0}))}},j={isEmpty:p,put:m,take:m};function U(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments[1],r=new Array(e),n=0,i=0,o=0,a=function(t){r[i]=t,i=(i+1)%e,n++},s=function(){if(0!=n){var t=r[o];return r[o]=null,n--,o=(o+1)%e,t}},u=function(){for(var e=[];n;)e.push(s());return e};return{isEmpty:function(){return 0==n},put:function(s){if(n<e)a(s);else{var c=void 0;switch(t){case 1:throw new Error("Channel's Buffer overflow!");case 3:r[i]=s,o=i=(i+1)%e;break;case 4:c=2*e,r=u(),n=r.length,i=r.length,o=0,r.length=c,e=c,a(s)}}},take:s,flush:u}}var B=function(){return j},F=function(e){return U(e,1)},q=[],V=0;function H(e){try{G(),e()}finally{W()}}function Y(e){q.push(e),V||(G(),$())}function G(){V++}function W(){V--}function $(){W();for(var e=void 0;!V&&void 0!==(e=q.shift());)H(e)}var X=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},z={type:"@@redux-saga/CHANNEL_END"},K=function(e){return e&&"@@redux-saga/CHANNEL_END"===e.type};function Q(){var e=[];return{subscribe:function(t){return e.push(t),function(){return _(e,t)}},emit:function(t){for(var r=e.slice(),n=0,i=r.length;n<i;n++)r[n](t)}}}var J="invalid buffer passed to channel factory function";function Z(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F(),t=!1,r=[];function n(){if(t&&r.length)throw N("Cannot have a closed channel with pending takers");if(r.length&&!e.isEmpty())throw N("Cannot have pending takers with non empty buffer")}function i(i){if(n(),g(i,w.notUndef,"Saga was provided with an undefined action"),!t){if(!r.length)return e.put(i);for(var o=0;o<r.length;o++){var a=r[o];if(!a[c]||a[c](i))return r.splice(o,1),a(i)}}}function o(i){n(),g(i,w.func,"channel.take's callback must be a function"),t&&e.isEmpty()?i(z):e.isEmpty()?(r.push(i),i.cancel=function(){return _(r,i)}):i(e.take())}function a(r){n(),g(r,w.func,"channel.flush' callback must be a function"),t&&e.isEmpty()?r(z):r(e.flush())}function s(){if(n(),!t&&(t=!0,r.length)){var e=r;r=[];for(var i=0,o=e.length;i<o;i++)e[i](z)}}return g(e,w.buffer,J),{take:o,put:i,flush:a,close:s,get __takers__(){return r},get __closed__(){return t}}}function ee(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:B(),r=arguments[2];arguments.length>2&&g(r,w.func,"Invalid match function passed to eventChannel");var n=Z(t),i=function(){n.__closed__||(o&&o(),n.close())},o=e((function(e){K(e)?i():r&&!r(e)||n.put(e)}));if(n.__closed__&&o(),!w.func(o))throw new Error("in eventChannel: subscribe should return a function to unsubscribe");return{take:n.take,flush:n.flush,close:i}}function te(e){var t=ee((function(t){return e((function(e){e[f]?t(e):Y((function(){return t(e)}))}))}));return X({},t,{take:function(e,r){arguments.length>1&&(g(r,w.func,"channel.take's matcher argument must be a function"),e[c]=r),t.take(e)}})}var re=a("IO"),ne="TAKE",ie="\n(HINT: if you are getting this errors in tests, consider using createMockTask from redux-saga/utils)",oe=function(e,t){var r;return(r={})[re]=!0,r[e]=t,r};function ae(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"*";if(arguments.length&&g(arguments[0],w.notUndef,"take(patternOrChannel): patternOrChannel is undefined"),w.pattern(e))return oe(ne,{pattern:e});if(w.channel(e))return oe(ne,{channel:e});throw new Error("take(patternOrChannel): argument "+String(e)+" is not valid channel or a valid pattern")}ae.maybe=function(){var e=ae.apply(void 0,arguments);return e[ne].maybe=!0,e};ae.maybe;function se(e,t){return arguments.length>1?(g(e,w.notUndef,"put(channel, action): argument channel is undefined"),g(e,w.channel,"put(channel, action): argument "+e+" is not a valid channel"),g(t,w.notUndef,"put(channel, action): argument action is undefined")):(g(e,w.notUndef,"put(action): argument action is undefined"),t=e,e=null),oe("PUT",{channel:e,action:t})}function ue(e){return oe("ALL",e)}function ce(e,t,r){g(t,w.notUndef,e+": argument fn is undefined");var n=null;if(w.array(t)){var i=t;n=i[0],t=i[1]}else if(t.fn){var o=t;n=o.context,t=o.fn}return n&&w.string(t)&&w.func(n[t])&&(t=n[t]),g(t,w.func,e+": argument "+t+" is not a function"),{context:n,fn:t,args:r}}function le(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return oe("CALL",ce("call",e,r))}function fe(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return oe("FORK",ce("fork",e,r))}function de(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];if(t.length>1)return ue(t.map((function(e){return de(e)})));var n=t[0];return 1===t.length&&(g(n,w.notUndef,"cancel(task): argument task is undefined"),g(n,w.task,"cancel(task): argument "+n+" is not a valid Task object "+ie)),oe("CANCEL",n||d)}function he(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return 0===arguments.length?e=y:(g(e,w.notUndef,"select(selector,[...]): argument selector is undefined"),g(e,w.func,"select(selector,[...]): argument "+e+" is not a function")),oe("SELECT",{selector:e,args:r})}se.resolve=function(){var e=se.apply(void 0,arguments);return e.PUT.resolve=!0,e},se.sync=C(se.resolve);var pe=function(e){return function(t){return t&&t[re]&&t[e]}},me={take:pe(ne),put:pe("PUT"),all:pe("ALL"),race:pe("RACE"),call:pe("CALL"),cps:pe("CPS"),fork:pe("FORK"),join:pe("JOIN"),cancel:pe("CANCEL"),select:pe("SELECT"),actionChannel:pe("ACTION_CHANNEL"),cancelled:pe("CANCELLED"),flush:pe("FLUSH"),getContext:pe("GET_CONTEXT"),setContext:pe("SET_CONTEXT")},ye=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function be(e,t){for(var r in t){var n=t[r];n.configurable=n.enumerable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,r,n)}return e}var ve="proc first argument (Saga function result) must be an iterator",we={toString:function(){return"@@redux-saga/CHANNEL_END"}},Ee={toString:function(){return"@@redux-saga/TASK_CANCEL"}},_e=function(){return p},Te=function(e){return"symbol"===(void 0===e?"undefined":ge(e))?function(t){return t.type===e}:function(t){return t.type===String(e)}},Oe=function(e){return function(t){return e.some((function(e){return Ae(e)(t)}))}},Se=function(e){return function(t){return e(t)}};function Ae(e){return("*"===e?_e:w.array(e)?Oe:w.stringableFunc(e)?Te:w.func(e)?Se:Te)(e)}function xe(e,t,r){var n=[],i=void 0,o=!1;function a(e){u(),r(e,!0)}function s(e){n.push(e),e.cont=function(s,u){o||(_(n,e),e.cont=m,u?a(s):(e===t&&(i=s),n.length||(o=!0,r(i))))}}function u(){o||(o=!0,n.forEach((function(e){e.cont=m,e.cancel()})),n=[])}return s(t),{addTask:s,cancelAll:u,abort:a,getTasks:function(){return n},taskNames:function(){return n.map((function(e){return e.name}))}}}function Ie(e){var t=e.context,r=e.fn,n=e.args;if(w.iterator(r))return r;var i,o,a=void 0,s=void 0;try{a=r.apply(t,n)}catch(e){s=e}return w.iterator(a)?a:P(s?function(){throw s}:(i=void 0,o={done:!1,value:a},function(e){return i?{done:!0,value:e}:(i=!0,o)}))}var Re=function(e){return{fn:e}};function Pe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return m},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:m,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:m,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"anonymous",c=arguments[8];g(e,w.iterator,ve);var f="[...effects]",h=C(ne,L(f,"all("+f+")")),p=o.sagaMonitor,y=o.logger,b=o.onError,v=y||D,S=function(e){var t=e.sagaStack;!t&&e.stack&&(t=-1!==e.stack.split("\n")[0].indexOf(e.message)?e.stack:"Error: "+e.message+"\n"+e.stack),v("error","uncaught at "+u,t||e.message||e)},A=te(t),I=Object.create(i);U.cancel=m;var R=fe(a,u,e,c),P={name:u,cancel:M,isRunning:!0},N=xe(0,P,B);function M(){P.isRunning&&!P.isCancelled&&(P.isCancelled=!0,U(Ee))}function j(){e._isRunning&&!e._isCancelled&&(e._isCancelled=!0,N.cancelAll(),B(Ee))}return c&&(c.cancel=j),e._isRunning=!0,U(),R;function U(t,r){if(!P.isRunning)throw new Error("Trying to resume an already finished generator");try{var n=void 0;r?n=e.throw(t):t===Ee?(P.isCancelled=!0,U.cancel(),n=w.func(e.return)?e.return(Ee):{done:!0,value:Ee}):n=t===we?w.func(e.return)?e.return():{done:!0}:e.next(t),n.done?(P.isMainRunning=!1,P.cont&&P.cont(n.value)):q(n.value,a,"",U)}catch(e){P.isCancelled&&S(e),P.isMainRunning=!1,P.cont(e,!0)}}function B(t,r){e._isRunning=!1,A.close(),r?(t instanceof Error&&Object.defineProperty(t,"sagaStack",{value:"at "+u+" \n "+(t.sagaStack||t.stack),configurable:!0}),R.cont||(t instanceof Error&&b?b(t):S(t)),e._error=t,e._isAborted=!0,e._deferredEnd&&e._deferredEnd.reject(t)):(e._result=t,e._deferredEnd&&e._deferredEnd.resolve(t)),R.cont&&R.cont(t,r),R.joiners.forEach((function(e){return e.cb(t,r)})),R.joiners=null}function q(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments[3],i=x();p&&p.effectTriggered({effectId:i,parentEffectId:t,label:r,effect:e});var o=void 0;function a(e,t){o||(o=!0,n.cancel=m,p&&(t?p.effectRejected(i,e):p.effectResolved(i,e)),n(e,t))}a.cancel=m,n.cancel=function(){if(!o){o=!0;try{a.cancel()}catch(e){S(e)}a.cancel=m,p&&p.effectCancelled(i)}};var s=void 0;return w.promise(e)?V(e,a):w.helper(e)?J(Re(e),i,a):w.iterator(e)?H(e,i,u,a):w.array(e)?h(e,i,a):(s=me.take(e))?W(s,a):(s=me.put(e))?X(s,a):(s=me.all(e))?ne(s,i,a):(s=me.race(e))?ie(s,i,a):(s=me.call(e))?z(s,i,a):(s=me.cps(e))?Q(s,a):(s=me.fork(e))?J(s,i,a):(s=me.join(e))?Z(s,a):(s=me.cancel(e))?re(s,a):(s=me.select(e))?oe(s,a):(s=me.actionChannel(e))?ae(s,a):(s=me.flush(e))?ue(s,a):(s=me.cancelled(e))?se(s,a):(s=me.getContext(e))?ce(s,a):(s=me.setContext(e))?le(s,a):a(e)}function V(e,t){var r=e[l];w.func(r)?t.cancel=r:w.func(e.abort)&&(t.cancel=function(){return e.abort()}),e.then(t,(function(e){return t(e,!0)}))}function H(e,i,a,s){Pe(e,t,r,n,I,o,i,a,s)}function W(e,t){var r=e.channel,n=e.pattern,i=e.maybe;r=r||A;var o=function(e){return e instanceof Error?t(e,!0):K(e)&&!i?t(we):t(e)};try{r.take(o,Ae(n))}catch(e){return t(e,!0)}t.cancel=o.cancel}function X(e,t){var n=e.channel,i=e.action,o=e.resolve;Y((function(){var e=void 0;try{e=(n?n.put:r)(i)}catch(e){if(n||o)return t(e,!0);S(e)}if(!o||!w.promise(e))return t(e);V(e,t)}))}function z(e,t,r){var n=e.context,i=e.fn,o=e.args,a=void 0;try{a=i.apply(n,o)}catch(e){return r(e,!0)}return w.promise(a)?V(a,r):w.iterator(a)?H(a,t,i.name,r):r(a)}function Q(e,t){var r=e.context,n=e.fn,i=e.args;try{var o=function(e,r){return w.undef(e)?t(r):t(e,!0)};n.apply(r,i.concat(o)),o.cancel&&(t.cancel=function(){return o.cancel()})}catch(e){return t(e,!0)}}function J(e,i,a){var s=e.context,u=e.fn,c=e.args,l=e.detached,f=Ie({context:s,fn:u,args:c});try{G();var d=Pe(f,t,r,n,I,o,i,u.name,l?null:m);l?a(d):f._isRunning?(N.addTask(d),a(d)):f._error?N.abort(f._error):a(d)}finally{$()}}function Z(e,t){if(e.isRunning()){var r={task:R,cb:t};t.cancel=function(){return _(e.joiners,r)},e.joiners.push(r)}else e.isAborted()?t(e.error(),!0):t(e.result())}function re(e,t){e===d&&(e=R),e.isRunning()&&e.cancel(),t()}function ne(e,t,r){var n=Object.keys(e);if(!n.length)return r(w.array(e)?[]:{});var i=0,o=void 0,a={},s={};n.forEach((function(t){var u=function(s,u){o||(u||K(s)||s===we||s===Ee?(r.cancel(),r(s,u)):(a[t]=s,++i===n.length&&(o=!0,r(w.array(e)?T(ye({},a,{length:n.length})):a))))};u.cancel=m,s[t]=u})),r.cancel=function(){o||(o=!0,n.forEach((function(e){return s[e].cancel()})))},n.forEach((function(r){return q(e[r],t,r,s[r])}))}function ie(e,t,r){var n=void 0,i=Object.keys(e),o={};i.forEach((function(t){var a=function(o,a){if(!n)if(a)r.cancel(),r(o,!0);else if(!K(o)&&o!==we&&o!==Ee){var s;r.cancel(),n=!0;var u=((s={})[t]=o,s);r(w.array(e)?[].slice.call(ye({},u,{length:i.length})):u)}};a.cancel=m,o[t]=a})),r.cancel=function(){n||(n=!0,i.forEach((function(e){return o[e].cancel()})))},i.forEach((function(r){n||q(e[r],t,r,o[r])}))}function oe(e,t){var r=e.selector,i=e.args;try{t(r.apply(void 0,[n()].concat(i)))}catch(e){t(e,!0)}}function ae(e,r){var n=e.pattern,i=e.buffer,o=Ae(n);o.pattern=n,r(ee(t,i||F(),o))}function se(e,t){t(!!P.isCancelled)}function ue(e,t){e.flush(t)}function ce(e,t){t(I[e])}function le(e,t){E(I,e),t()}function fe(e,t,r,n){var i,o;return r._deferredEnd=null,(i={})[s]=!0,i.id=e,i.name=t,"done",(o={}).done=o.done||{},o.done.get=function(){if(r._deferredEnd)return r._deferredEnd.promise;var e=O();return r._deferredEnd=e,r._isRunning||(r._error?e.reject(r._error):e.resolve(r._result)),e.promise},i.cont=n,i.joiners=[],i.cancel=j,i.isRunning=function(){return r._isRunning},i.isCancelled=function(){return r._isCancelled},i.isAborted=function(){return r._isAborted},i.result=function(){return r._result},i.error=function(){return r._error},i.setContext=function(e){g(e,w.object,k("task",e)),E(I,e)},be(i,o),i}}var De="runSaga(storeInterface, saga, ...args): saga argument must be a Generator function!";function Ce(e,t){for(var r=arguments.length,n=Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];var o=void 0;w.iterator(e)?(o=e,e=t):(g(t,w.func,De),g(o=t.apply(void 0,n),w.iterator,De));var a=e,s=a.subscribe,u=a.dispatch,c=a.getState,l=a.context,f=a.sagaMonitor,d=a.logger,h=a.onError,p=x();f&&(f.effectTriggered=f.effectTriggered||m,f.effectResolved=f.effectResolved||m,f.effectRejected=f.effectRejected||m,f.effectCancelled=f.effectCancelled||m,f.actionDispatched=f.actionDispatched||m,f.effectTriggered({effectId:p,root:!0,parentEffectId:0,effect:{root:!0,saga:t,args:n}}));var y=Pe(o,s,M(u),c,l,{sagaMonitor:f,logger:d,onError:h},p,t.name);return f&&f.effectResolved(p,y),y}function Le(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}var Ne={done:!0,value:void 0},ke={};function Me(e){return w.channel(e)?"channel":Array.isArray(e)?String(e.map((function(e){return String(e)}))):String(e)}function je(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"iterator",n=void 0,i=t;function o(t,r){if(i===ke)return Ne;if(r)throw i=ke,r;n&&n(t);var o=e[i](),a=o[0],s=o[1],u=o[2];return n=u,(i=a)===ke?Ne:s}return P(o,(function(e){return o(null,e)}),r,!0)}function Ue(e,t){for(var r=arguments.length,n=Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];var o={done:!1,value:ae(e)},a=function(e){return{done:!1,value:fe.apply(void 0,[t].concat(n,[e]))}},s=void 0,u=function(e){return s=e};return je({q1:function(){return["q2",o,u]},q2:function(){return s===z?[ke]:["q1",a(s)]}},"q1","takeEvery("+Me(e)+", "+t.name+")")}function Be(e,t){for(var r=arguments.length,n=Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];var o={done:!1,value:ae(e)},a=function(e){return{done:!1,value:fe.apply(void 0,[t].concat(n,[e]))}},s=function(e){return{done:!1,value:de(e)}},u=void 0,c=void 0,l=function(e){return u=e},f=function(e){return c=e};return je({q1:function(){return["q2",o,f]},q2:function(){return c===z?[ke]:u?["q3",s(u)]:["q1",a(c),l]},q3:function(){return["q1",a(c),l]}},"q1","takeLatest("+Me(e)+", "+t.name+")")}function Fe(e,t){for(var r=arguments.length,n=Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];return fe.apply(void 0,[Ue,e,t].concat(n))}function qe(e,t){for(var r=arguments.length,n=Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];return fe.apply(void 0,[Be,e,t].concat(n))}var Ve=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.context,r=void 0===t?{}:t,n=Le(e,["context"]),i=n.sagaMonitor,o=n.logger,a=n.onError;if(w.func(n))throw new Error("Saga middleware no longer accept Generator functions. Use sagaMiddleware.run instead");if(o&&!w.func(o))throw new Error("`options.logger` passed to the Saga middleware is not a function!");if(a&&!w.func(a))throw new Error("`options.onError` passed to the Saga middleware is not a function!");if(n.emitter&&!w.func(n.emitter))throw new Error("`options.emitter` passed to the Saga middleware is not a function!");function s(e){var t=e.getState,u=e.dispatch,c=Q();return c.emit=(n.emitter||y)(c.emit),s.run=Ce.bind(null,{context:r,subscribe:c.subscribe,dispatch:u,getState:t,sagaMonitor:i,logger:o,onError:a}),function(e){return function(t){i&&i.actionDispatched&&i.actionDispatched(t);var r=e(t);return c.emit(t),r}}}return s.run=function(){throw new Error("Before running a Saga, you must mount the Saga middleware on the Store using applyMiddleware")},s.setContext=function(e){g(e,w.object,k("sagaMiddleware",e)),E(r,e)},s},He=r(42),Ye=r(11),Ge=r.n(Ye),We=r(5),$e=r.n(We),Xe=r(18),ze=r(6),Ke={},Qe={items:{video:[],audio:[]},selectedMedia:null},Je=Object(He.c)({media:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke,t=arguments.length>1?arguments[1]:void 0,r=t.type,n=t.payload,i=t.playerId,o=t.extras,a=t._sender,s=t.tabId,u=Object.assign({},e),c=null,l=a&&a.tab?a.tab.id:s||null;if(!l)return e;switch(e[l]||(u[l]={}),c=u[l],r){case ze.s:return $e()({},Ke);case ze.c:return c.players={},$e()({},u,Ge()({},l,c));case ze.t:return delete u[l],u;case ze.x:var f=Object(Xe.c)(n);return c.players||(c.players={}),c.players[i]=$e()({},Qe,{items:f,selectedMedia:f.video[0],allowOutOfBounds:null==o?void 0:o.allowOutOfBounds}),c.showEula=!1,$e()({},u,Ge()({},l,c));case ze.y:return c.players[i].selectedMedia=n,$e()({},u,Ge()({},l,c));case ze.z:return $e()({},e,Ge()({},l,$e()({},c,{showEula:!0})));case ze.d:return $e()({},e,Ge()({},l,$e()({},c,{showEula:!1})));default:return e}}}),Ze=r(8),et=r.n(Ze),tt=et.a.mark(rt);function rt(e){var t;return et.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e._sender,r.next=3,se({type:ze.s,tabId:t.tab.id});case 3:return r.next=5,S(5e3);case 5:return r.next=7,le(chrome.management.setEnabled,chrome.runtime.id,!1);case 7:case"end":return r.stop()}}),tt)}var nt=r(17),it=r(1),ot=r(32),at=r(121),st=et.a.mark(ut);function ut(e){var t,r,n;return et.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.payload,r=e._sender,i.next=3,le(nt.a.getSync,it.c.AppSettings.KEY);case 3:return(n=i.sent).disabled.push(t),i.next=7,le(nt.a.setSync,it.c.AppSettings.KEY,n);case 7:return i.next=9,se({type:ze.t,tabId:r.tab.id});case 9:return i.next=11,le(ot.a.init);case 11:return i.next=13,se({type:ze.w,tabId:r.tab.id});case 13:return i.next=15,le(at.MessageContent,r.tab.id,ze.e);case 15:case"end":return i.stop()}}),st)}var ct=r(16),lt=et.a.mark(ft);function ft(){var e;return et.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,le(nt.a.getSync,it.c.AppSettings.KEY);case 2:return(e=t.sent).eula=ct.a.EULA_VERSION,t.next=6,le(nt.a.setSync,it.c.AppSettings.KEY,e);case 6:return t.next=8,le(ot.a.init);case 8:return t.next=10,se({type:ze.a});case 10:case"end":return t.stop()}}),lt)}var dt=r(9),ht=et.a.mark(pt);function pt(e){var t,r,n;return et.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.payload,r=e.tabId,i.next=3,ae([ze.d,ze.b]);case 3:if(n=i.sent,n.type!==ze.b){i.next=16;break}return dt.a.debug("Accepting EULA"),i.next=9,se({type:ze.v});case 9:return i.next=11,ae(ze.a);case 11:return dt.a.debug("EULA accepted completed"),i.next=14,se({type:ze.j,payload:t});case 14:i.next=19;break;case 16:return dt.a.debug("EULA rejected"),i.next=19,se({type:ze.r});case 19:return i.next=21,se({type:ze.d,tabId:r});case 21:case"end":return i.stop()}}),ht)}var mt=et.a.mark(wt),yt=r(279);function gt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"START",r="START"===t?it.c.Stats.VIDEO_DOWNLOAD_STARTED:it.c.Stats.VIDEO_DOWNLOAD_COMPLETED;return e===it.a.AUDIO&&(r="START"===t?it.c.Stats.AUDIO_DOWNLOAD_STARTED:it.c.Stats.AUDIO_DOWNLOAD_COMPLETED),r}var bt=function(e,t){return new Promise((function(r,n){chrome.downloads.download({url:t,filename:e},(function(e){!e&&chrome.runtime.lastError&&n(chrome.runtime.lastError),r(e)}))}))},vt=function(e){return ee((function(t){var r=function(r){e===r.id&&t(r)};return chrome.downloads.onChanged.addListener(r),function(){chrome.downloads.onChanged.removeListener(r)}}))};function wt(e){var t,r,n,i,o,a,s,u,c,l,f,d,h;return et.a.wrap((function(p){for(;;)switch(p.prev=p.next){case 0:return t=e.payload,r=t.type,n=t.title,i=t.ext,o=t.quality,a=t.downloadUrl,s="".concat(n.replace(/[/:*?<>\\~|]+/g,"_"),"-").concat(o,".").concat(i),p.next=4,le(bt,yt(s),a);case 4:if(u=p.sent,c=vt(u),!u){p.next=42;break}dt.a.debug("Download file began: "+u),l=!0;case 9:if(!l){p.next=40;break}return p.next=12,ae(c);case 12:if(!(f=p.sent)){p.next=33;break}if(!f.filename||!f.filename.current){p.next=18;break}return d=gt(r),p.next=18,se({type:ze.l,payload:d});case 18:if(!f.endTime||!f.endTime.current){p.next=25;break}return dt.a.debug("File saved as "+s),h=gt(r,"END"),p.next=23,se({type:ze.h,payload:h});case 23:l=!1,c.close();case 25:if(!f.error||!f.error.current.length){p.next=31;break}return dt.a.debug("Download canceled or interrupted for: "+u),p.next=29,se({type:ze.i,payload:f.error});case 29:l=!1,c.close();case 31:p.next=38;break;case 33:return dt.a.debug("download file event is empty, closing channel"),p.next=36,se({type:ze.i});case 36:l=!1,c.close();case 38:p.next=9;break;case 40:p.next=45;break;case 42:return dt.a.debug("Download failed for "+s),p.next=45,se({DOWNLOAD_FAILED:ze.i});case 45:case"end":return p.stop()}}),mt)}var Et=et.a.mark(_t);function _t(e){var t,r;return et.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload,dt.a.debug("Updating download statistics for: "+t),n.next=4,le(nt.a.get,it.c.Stats.KEY);case 4:return(r=n.sent)[t]++,n.next=8,le(nt.a.set,it.c.Stats.KEY,r);case 8:case"end":return n.stop()}}),Et)}var Tt=et.a.mark(Ot);function Ot(e){var t,r;return et.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload,r=e.tabId,n.next=3,le(nt.a.getSync,it.c.AppSettings.KEY);case 3:if(!(n.sent.eula<ct.a.EULA_VERSION)){n.next=9;break}return n.next=7,se({type:ze.z,payload:t,tabId:r});case 7:n.next=11;break;case 9:return n.next=11,se({type:ze.j,payload:t});case 11:case"end":return n.stop()}}),Tt)}var St=r(82),At=et.a.mark(xt);function xt(e){var t,r,n,i,o,a,s,u,c;return et.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:if(t=e.tabId,r=e.payload,n=r.videoId,i=r.extractorName,o=r.rule,a=r.downloadUrl,dt.a.debug("Fetching media info for ".concat(i," with video id: ").concat(n)),!(s=new St.a[i])){l.next=30;break}return l.prev=5,l.next=8,le(s.getMediaInfo.bind(s),n,a);case 8:if(!(u=l.sent)||!u.length){l.next=18;break}return dt.a.debug("Media info result for ".concat(i," with video id: ").concat(n)),dt.a.debug(u),l.next=14,se({type:ze.x,payload:u,tabId:t,playerId:n,extras:{allowOutOfBounds:null===(c=null==o?void 0:o.allowOutOfBounds)||void 0===c||c}});case 14:return l.next=16,se({type:ze.w,tabId:t});case 16:l.next=21;break;case 18:return dt.a.debug("No media info found"),l.next=21,se({type:ze.p});case 21:l.next=28;break;case 23:return l.prev=23,l.t0=l.catch(5),l.t0&&dt.a.debug("Could not fetch media info: "+l.t0.message),l.next=28,se({type:ze.o,payload:l.t0});case 28:l.next=31;break;case 30:dt.a.debug("Invalid media extractor");case 31:case"end":return l.stop()}}),At,null,[[5,23]])}var It=r(41),Rt=et.a.mark(Ct),Pt=function(e,t,r){chrome.browserAction.setBadgeText({tabId:e,text:t}),chrome.browserAction.setBadgeBackgroundColor({tabId:e,color:"#777777"}),chrome.browserAction.setIcon({tabId:e,path:{16:It.a.image("icon16_".concat(r,".png")),32:It.a.image("icon32_".concat(r,".png"))}})},Dt=function(e){return e.media};function Ct(e){var t,r,n,i;return et.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.tabId,o.next=3,he(Dt);case 3:if(r=o.sent,n=matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",!r||!r[t]){o.next=16;break}if(!((i=Object.keys(r[t].players).length)>0)){o.next=12;break}return o.next=10,le(Pt,t,i+"","active");case 10:o.next=14;break;case 12:return o.next=14,le(Pt,t,"",n);case 14:o.next=18;break;case 16:return o.next=18,le(Pt,t,"",n);case 18:case"end":return o.stop()}}),Rt)}var Lt=et.a.mark(Nt);function Nt(e){var t,r,n;return et.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.payload,r=e.tabId,i.next=3,le(nt.a.getSync,it.c.AppSettings.KEY);case 3:return(n=i.sent).disabled=n.disabled.filter((function(e){return e!==t})),i.next=7,le(nt.a.setSync,it.c.AppSettings.KEY,n);case 7:return i.next=9,le(ot.a.init);case 9:return i.next=11,le(at.MessageContent,r,ze.q);case 11:case"end":return i.stop()}}),Lt)}var kt=et.a.mark(Mt);function Mt(){return et.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fe(ze.g,ut);case 2:return e.next=4,Fe(ze.f,rt);case 4:return e.next=6,Fe(ze.j,wt);case 6:return e.next=8,Fe(ze.l,_t);case 8:return e.next=10,Fe(ze.h,_t);case 10:return e.next=12,Fe(ze.n,xt);case 12:return e.next=14,Fe(ze.v,ft);case 14:return e.next=16,qe(ze.k,Ot);case 16:return e.next=18,qe(ze.z,pt);case 18:return e.next=20,qe(ze.w,Ct);case 20:return e.next=22,qe(ze.m,Nt);case 22:case"end":return e.stop()}}),kt)}var jt=Mt;t.default=function(){var e=Ve(),t=Object(He.d)(Je,Object(He.a)(e));return Object(n.wrapStore)(t),e.run(jt),t}}]);